(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(g){var a=/\+/g;function e(n){return b.raw?n:encodeURIComponent(n)}function l(n){return b.raw?n:decodeURIComponent(n)}function m(n){return e(b.json?JSON.stringify(n):String(n))}function d(n){if(n.indexOf('"')===0){n=n.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")}try{n=decodeURIComponent(n.replace(a," "))}catch(o){return}try{return b.json?JSON.parse(n):n}catch(o){}}function f(o,n){var p=b.raw?o:d(o);return g.isFunction(n)?n(p):p}var b=g.cookie=function(u,s,y){if(s!==undefined&&!g.isFunction(s)){y=g.extend({},b.defaults,y);if(typeof y.expires==="number"){var v=y.expires,x=y.expires=new Date();x.setDate(x.getDate()+v)}return(document.cookie=[e(u),"=",m(s),y.expires?"; expires="+y.expires.toUTCString():"",y.path?"; path="+y.path:"",y.domain?"; domain="+y.domain:"",y.secure?"; secure":""].join(""))}var z=u?undefined:{};var w=document.cookie?document.cookie.split("; "):[];for(var r=0,p=w.length;r<p;r++){var q=w[r].split("=");var n=l(q.shift());var o=q.join("=");if(u&&u===n){z=f(o,s);break}if(!u&&(o=f(o))!==undefined){z[n]=o}}return z};b.defaults={};g.removeCookie=function(o,n){if(g.cookie(o)!==undefined){g.cookie(o,"",g.extend({},n,{expires:-1}));return true}return false}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(g){function d(p){var l=g.data(p.data.target,"draggable").options;var o=p.data;var n=o.startLeft+p.pageX-o.startX;var m=o.startTop+p.pageY-o.startY;if(l.deltaX!=null&&l.deltaX!=undefined){n=p.pageX+l.deltaX}if(l.deltaY!=null&&l.deltaY!=undefined){m=p.pageY+l.deltaY}if(p.data.parnet!=document.body){if(g.boxModel==true){n+=g(p.data.parent).scrollLeft();m+=g(p.data.parent).scrollTop()}}if(l.axis=="h"){o.left=n}else{if(l.axis=="v"){o.top=m}else{o.left=n;o.top=m}}}function f(n){var m=g.data(n.data.target,"draggable").options;var l=g.data(n.data.target,"draggable").proxy;if(l){l.css("cursor",m.cursor)}else{l=g(n.data.target);g.data(n.data.target,"draggable").handle.css("cursor",m.cursor)}l.css({left:n.data.left,top:n.data.top})}function a(o){var n=g.data(o.data.target,"draggable").options;var l=g(".droppable").filter(function(){return o.data.target!=this}).filter(function(){var p=g.data(this,"droppable").options.accept;if(p){return g(p).filter(function(){return this==o.data.target}).length>0}else{return true}});g.data(o.data.target,"draggable").droppables=l;var m=g.data(o.data.target,"draggable").proxy;if(!m){if(n.proxy){if(n.proxy=="clone"){m=g(o.data.target).clone().insertAfter(o.data.target)}else{m=n.proxy.call(o.data.target,o.data.target)}g.data(o.data.target,"draggable").proxy=m}else{m=g(o.data.target)}}m.css("position","absolute");d(o);f(o);n.onStartDrag.call(o.data.target,o);return false}function b(m){d(m);if(g.data(m.data.target,"draggable").options.onDrag.call(m.data.target,m)!=false){f(m)}var l=m.data.target;g.data(m.data.target,"draggable").droppables.each(function(){var o=g(this);var n=g(this).offset();if(m.pageX>n.left&&m.pageX<n.left+o.outerWidth(true)&&m.pageY>n.top&&m.pageY<n.top+o.outerHeight(true)){if(!this.entered){g(this).trigger("_dragenter",[l]);this.entered=true}g(this).trigger("_dragover",[l])}else{if(this.entered){g(this).trigger("_dragleave",[l]);this.entered=false}}});return false}function e(p){d(p);var l=g.data(p.data.target,"draggable").proxy;var n=g.data(p.data.target,"draggable").options;if(n.revert){if(o()==true){m();g(p.data.target).css({position:p.data.startPosition,left:p.data.startLeft,top:p.data.startTop})}else{if(l){l.animate({left:p.data.startLeft,top:p.data.startTop},function(){m()})}else{g(p.data.target).animate({left:p.data.startLeft,top:p.data.startTop},function(){g(p.data.target).css("position",p.data.startPosition)})}}}else{g(p.data.target).css({position:"absolute",left:p.data.left,top:p.data.top});m();o()}n.onStopDrag.call(p.data.target,p);function m(){if(l){l.remove()}g.data(p.data.target,"draggable").proxy=null}function o(){var q=false;g.data(p.data.target,"draggable").droppables.each(function(){var s=g(this);var r=g(this).offset();if(p.pageX>r.left&&p.pageX<r.left+s.outerWidth(true)&&p.pageY>r.top&&p.pageY<r.top+s.outerHeight(true)){if(n.revert){g(p.data.target).css({position:p.data.startPosition,left:p.data.startLeft,top:p.data.startTop})}g(this).trigger("_drop",[p.data.target]);q=true;this.entered=false}});return q}g(document).unbind(".draggable");return false}g.fn.draggable=function(l){if(typeof l=="string"){switch(l){case"options":return g.data(this[0],"draggable").options;case"proxy":return g.data(this[0],"draggable").proxy;case"enable":return this.each(function(){g(this).draggable({disabled:false})});case"disable":return this.each(function(){g(this).draggable({disabled:true})})}}return this.each(function(){var n;var p=g.data(this,"draggable");if(p){p.handle.unbind(".draggable");n=g.extend(p.options,l)}else{n=g.extend({},g.fn.draggable.defaults,l||{})}if(n.disabled==true){g(this).css("cursor","default");return}var o=null;if(typeof n.handle=="undefined"||n.handle==null){o=g(this)}else{o=(typeof n.handle=="string"?g(n.handle,this):o)}g.data(this,"draggable",{options:n,handle:o});o.bind("mousedown.draggable",{target:this},q);o.bind("mousemove.draggable",{target:this},r);function q(u){if(m(u)==false){return}var s=g(u.data.target).position();var t={startPosition:g(u.data.target).css("position"),startLeft:s.left,startTop:s.top,left:s.left,top:s.top,startX:u.pageX,startY:u.pageY,target:u.data.target,parent:g(u.data.target).parent()[0]};g(document).bind("mousedown.draggable",t,a);g(document).bind("mousemove.draggable",t,b);g(document).bind("mouseup.draggable",t,e)}function r(s){if(m(s)){g(this).css("cursor",n.cursor)}else{g(this).css("cursor","default")}}function m(z){var A=g(o).offset();var x=g(o).outerWidth(true);var u=g(o).outerHeight(true);var w=z.pageY-A.top;var y=A.left+x-z.pageX;var s=A.top+u-z.pageY;var v=z.pageX-A.left;return Math.min(w,y,s,v)>n.edge}})};g.fn.draggable.defaults={proxy:null,revert:false,cursor:"move",deltaX:null,deltaY:null,handle:null,disabled:false,edge:0,axis:null,onStartDrag:function(l){},onDrag:function(l){},onStopDrag:function(l){}}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(f){f.fn.drag=function(p,l,o){var n=typeof p=="string"?p:"",m=f.isFunction(p)?p:f.isFunction(l)?l:null;if(n.indexOf("drag")!==0){n="drag"+n}o=(p==m?l:o)||{};return m?this.bind(n,o,m):this.trigger(n)};var b=f.event,a=b.special,e=a.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:false,drop:true,click:false},datakey:"dragdata",noBubble:true,add:function(n){var m=f.data(this,e.datakey),l=n.data||{};m.related+=1;f.each(e.defaults,function(o,p){if(l[o]!==undefined){m[o]=l[o]}})},remove:function(){f.data(this,e.datakey).related-=1},setup:function(){if(f.data(this,e.datakey)){return}var l=f.extend({related:0},e.defaults);f.data(this,e.datakey,l);b.add(this,"touchstart mousedown",e.init,l);if(this.attachEvent){this.attachEvent("ondragstart",e.dontstart)}},teardown:function(){var l=f.data(this,e.datakey)||{};if(l.related){return}f.removeData(this,e.datakey);b.remove(this,"touchstart mousedown",e.init);e.textselect(true);if(this.detachEvent){this.detachEvent("ondragstart",e.dontstart)}},init:function(n){if(e.touched){return}var l=n.data,m;if(n.which!=0&&l.which>0&&n.which!=l.which){return}if(f(n.target).is(l.not)){return}if(l.handle&&!f(n.target).closest(l.handle,n.currentTarget).length){return}e.touched=n.type=="touchstart"?this:null;l.propagates=1;l.mousedown=this;l.interactions=[e.interaction(this,l)];l.target=n.target;l.pageX=n.pageX;l.pageY=n.pageY;l.dragging=null;m=e.hijack(n,"draginit",l);if(!l.propagates){return}m=e.flatten(m);if(m&&m.length){l.interactions=[];f.each(m,function(){l.interactions.push(e.interaction(this,l))})}l.propagates=l.interactions.length;if(l.drop!==false&&a.drop){a.drop.handler(n,l)}e.textselect(false);if(e.touched){b.add(e.touched,"touchmove touchend",e.handler,l)}else{b.add(document,"mousemove mouseup",e.handler,l)}if(!e.touched||l.live){return false}},interaction:function(m,l){var n=f(m)[l.relative?"position":"offset"]()||{top:0,left:0};return{drag:m,callback:new e.callback(),droppable:[],offset:n}},handler:function(m){var l=m.data;switch(m.type){case !l.dragging&&"touchmove":m.preventDefault();case !l.dragging&&"mousemove":if(Math.pow(m.pageX-l.pageX,2)+Math.pow(m.pageY-l.pageY,2)<Math.pow(l.distance,2)){break}m.target=l.target;e.hijack(m,"dragstart",l);if(l.propagates){l.dragging=true}case"touchmove":m.preventDefault();case"mousemove":if(l.dragging){e.hijack(m,"drag",l);if(l.propagates){if(l.drop!==false&&a.drop){a.drop.handler(m,l)}break}m.type="mouseup"}case"touchend":case"mouseup":default:if(e.touched){b.remove(e.touched,"touchmove touchend",e.handler)}else{b.remove(document,"mousemove mouseup",e.handler)}if(l.dragging){if(l.drop!==false&&a.drop){a.drop.handler(m,l)}e.hijack(m,"dragend",l)}e.textselect(true);if(l.click===false&&l.dragging){f.data(l.mousedown,"suppress.click",new Date().getTime()+5)}l.dragging=e.touched=false;break}},hijack:function(m,s,v,t,o){if(!v){return}var u={event:m.originalEvent,type:m.type},q=s.indexOf("drop")?"drag":"drop",y,p=t||0,n,l,w,r=!isNaN(t)?t:v.interactions.length;m.type=s;m.originalEvent=null;v.results=[];do{if(n=v.interactions[p]){if(s!=="dragend"&&n.cancelled){continue}w=e.properties(m,v,n);n.results=[];f(o||n[q]||v.droppable).each(function(z,x){w.target=x;m.isPropagationStopped=function(){return false};y=x?b.dispatch.call(x,m,w):null;if(y===false){if(q=="drag"){n.cancelled=true;v.propagates-=1}if(s=="drop"){n[q][z]=null}}else{if(s=="dropinit"){n.droppable.push(e.element(y)||x)}}if(s=="dragstart"){n.proxy=f(e.element(y)||n.drag)[0]}n.results.push(y);delete m.result;if(s!=="dropinit"){return y}});v.results[p]=e.flatten(n.results);if(s=="dropinit"){n.droppable=e.flatten(n.droppable)}if(s=="dragstart"&&!n.cancelled){w.update()}}}while(++p<r);m.type=u.type;m.originalEvent=u.event;return e.flatten(v.results)},properties:function(n,l,m){var o=m.callback;o.drag=m.drag;o.proxy=m.proxy||m.drag;o.startX=l.pageX;o.startY=l.pageY;o.deltaX=n.pageX-l.pageX;o.deltaY=n.pageY-l.pageY;o.originalX=m.offset.left;o.originalY=m.offset.top;o.offsetX=o.originalX+o.deltaX;o.offsetY=o.originalY+o.deltaY;o.drop=e.flatten((m.drop||[]).slice());o.available=e.flatten((m.droppable||[]).slice());return o},element:function(l){if(l&&(l.jquery||l.nodeType==1)){return l}},flatten:function(l){return f.map(l,function(m){return m&&m.jquery?f.makeArray(m):m&&m.length?e.flatten(m):m})},textselect:function(l){f(document)[l?"unbind":"bind"]("selectstart",e.dontstart).css("MozUserSelect",l?"":"none");document.unselectable=l?"off":"on"},dontstart:function(){return false},callback:function(){}};e.callback.prototype={update:function(){if(a.drop&&this.available.length){f.each(this.available,function(l){a.drop.locate(this,l)})}}};var g=b.dispatch;b.dispatch=function(l){if(f.data(this,"suppress."+l.type)-new Date().getTime()>0){f.removeData(this,"suppress."+l.type);return}return g.apply(this,arguments)};var d=b.fixHooks.touchstart=b.fixHooks.touchmove=b.fixHooks.touchend=b.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(m,n){if(n){var l=(n.touches&&n.touches[0])||(n.changedTouches&&n.changedTouches[0])||null;if(l){f.each(d.props,function(o,p){m[p]=l[p]})}}return m}};a.draginit=a.dragstart=a.dragend=e}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(b){b.extend(true,window,{hotKeyregister:a()});function a(){var e={};function f(l,r,n){var q={type:"keydown",propagate:false,disable_in_input:true,target:document,keycode:false};if(!n){n=q}else{for(var g in q){if(typeof n[g]=="undefined"){n[g]=q[g]}}}var p=n.target;if(typeof n.target=="string"){p=document.getElementById(n.target)}var m=this;l=l.toLowerCase();var o=function(w){w=w||window.event;if(w.keyCode){code=w.keyCode}else{if(w.which){code=w.which}}var v=String.fromCharCode(code).toLowerCase();if(n.disable_in_input){var t;if(w.target){t=w.target}else{if(w.srcElement){t=w.srcElement}}if(t.nodeType==3){t=t.parentNode}if(t.tagName=="INPUT"||t.tagName=="TEXTAREA"){if(w.ctrlKey&&"a,z,c,x,y,v".indexOf(v)!=-1){return}}}if(code==188){v=","}if(code==190){v="."}var A=l.split("+");var z=0;var x={"`":"~","1":"!","2":"@","3":"#","4":"$","5":"%","6":"^","7":"&","8":"*","9":"(","0":")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"};var u={esc:27,escape:27,tab:9,space:32,"return":13,enter:13,backspace:8,scrolllock:145,scroll_lock:145,scroll:145,capslock:20,caps_lock:20,caps:20,numlock:144,num_lock:144,num:144,pause:19,"break":19,insert:45,home:36,"delete":46,end:35,pageup:33,page_up:33,pu:33,pagedown:34,page_down:34,pd:34,left:37,up:38,right:39,down:40,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123};var y={shift:{wanted:false,pressed:false},ctrl:{wanted:false,pressed:false},alt:{wanted:false,pressed:false},meta:{wanted:false,pressed:false}};if(w.ctrlKey){y.ctrl.pressed=true}if(w.shiftKey){y.shift.pressed=true}if(w.altKey){y.alt.pressed=true}if(w.metaKey){y.meta.pressed=true}for(var s=0;k=A[s],s<A.length;s++){if(k=="ctrl"||k=="control"){z++;y.ctrl.wanted=true}else{if(k=="shift"){z++;y.shift.wanted=true}else{if(k=="alt"){z++;y.alt.wanted=true}else{if(k=="meta"){z++;y.meta.wanted=true}else{if(k.length>1){if(u[k]==code){z++}}else{if(n.keycode){if(n.keycode==code){z++}}else{if(v==k){z++}else{if(x[v]&&w.shiftKey){v=x[v];if(v==k){z++}}}}}}}}}}if(z==A.length&&y.ctrl.pressed==y.ctrl.wanted&&y.shift.pressed==y.shift.wanted&&y.alt.pressed==y.alt.wanted&&y.meta.pressed==y.meta.wanted){if(Base.globvar&&!Base.globvar.isSubmitNow){r(w)}if(!n.propagate){w.cancelBubble=true;w.returnValue=false;if(w.stopPropagation){w.stopPropagation();w.preventDefault()}return false}}};e[l]={callback:o,target:p,event:n.type};if(p.addEventListener){p.addEventListener(n.type,o,false)}else{if(p.attachEvent){p.attachEvent("on"+n.type,o)}else{p["on"+n.type]=o}}}function d(g){g=g.toLowerCase();var n=e[g];delete (e[g]);if(!n){return}var l=n.event;var m=n.target;var o=n.callback;if(m.removeEventListener){m.removeEventListener(l,o,false)}else{if(m.detachEvent){m.detachEvent("on"+l,o)}else{m["on"+l]=false}}}return{remove:d,add:f,all_shortcuts:e}}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function($){var escapeable=/["\\\x00-\x1f\x7f-\x9f]/g,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};$.toJSON=typeof JSON==="object"&&JSON.stringify?JSON.stringify:function(o){if(o===null){return"null"}var type=typeof o;if(type==="undefined"){return undefined}if(type==="number"||type==="boolean"){return""+o}if(type==="string"){return $.quoteString(o)}if(type==="object"){if(typeof o.toJSON==="function"){return $.toJSON(o.toJSON())}if(o.constructor===Date){var month=o.getUTCMonth()+1,day=o.getUTCDate(),year=o.getUTCFullYear(),hours=o.getUTCHours(),minutes=o.getUTCMinutes(),seconds=o.getUTCSeconds(),milli=o.getUTCMilliseconds();if(month<10){month="0"+month}if(day<10){day="0"+day}if(hours<10){hours="0"+hours}if(minutes<10){minutes="0"+minutes}if(seconds<10){seconds="0"+seconds}if(milli<100){milli="0"+milli}if(milli<10){milli="0"+milli}return'"'+year+"-"+month+"-"+day+"T"+hours+":"+minutes+":"+seconds+"."+milli+'Z"'}if(o.constructor===Array){var ret=[];for(var i=0;i<o.length;i++){ret.push($.toJSON(o[i])||"null")}return"["+ret.join(",")+"]"}var name,val,pairs=[];for(var k in o){type=typeof k;if(type==="number"){name='"'+k+'"'}else{if(type==="string"){name=$.quoteString(k)}else{continue}}type=typeof o[k];if(type==="function"||type==="undefined"){continue}val=$.toJSON(o[k]);pairs.push(name+":"+val)}return"{"+pairs.join(",")+"}"}};$.evalJSON=typeof JSON==="object"&&JSON.parse?JSON.parse:function(src){return eval("("+src+")")};$.secureEvalJSON=typeof JSON==="object"&&JSON.parse?JSON.parse:function(src){var filtered=src.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(filtered)){return eval("("+src+")")}else{throw new SyntaxError("Error parsing JSON, source is not valid.")}};$.quoteString=function(string){if(string.match(escapeable)){return'"'+string.replace(escapeable,function(a){var c=meta[a];if(typeof c==="string"){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"'}return'"'+string+'"'}}));(function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)})(function(l){function f(p,q){var e,w,u,v=p.nodeName.toLowerCase();return"area"===v?(e=p.parentNode,w=e.name,p.href&&w&&"map"===e.nodeName.toLowerCase()?(u=l("img[usemap='#"+w+"']")[0],!!u&&d(u)):!1):(/input|select|textarea|button|object/.test(v)?!p.disabled:"a"===v?p.href||q:q)&&d(p)}function d(a){return l.expr.filters.visible(a)&&!l(a).parents().addBack().filter(function(){return"hidden"===l.css(this,"visibility")}).length}l.ui=l.ui||{},l.extend(l.ui,{version:"1.11.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),l.fn.extend({scrollParent:function(p){var o=this.css("position"),q="absolute"===o,e=p?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var a=l(this);return q&&"static"===a.css("position")?!1:e.test(a.css("overflow")+a.css("overflow-y")+a.css("overflow-x"))}).eq(0);return"fixed"!==o&&r.length?r:l(this[0].ownerDocument||document)},uniqueId:function(){var a=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&l(this).removeAttr("id")})}}),l.extend(l.expr[":"],{data:l.expr.createPseudo?l.expr.createPseudo(function(a){return function(e){return !!l.data(e,a)}}):function(e,a,n){return !!l.data(e,n[3])},focusable:function(a){return f(a,!isNaN(l.attr(a,"tabindex")))},tabbable:function(n){var o=l.attr(n,"tabindex"),e=isNaN(o);return(e||o>=0)&&f(n,!e)}}),l("<a>").outerWidth(1).jquery||l.each(["Width","Height"],function(p,o){function q(r,a,w,x){return l.each(e,function(){a-=parseFloat(l.css(r,"padding"+this))||0,w&&(a-=parseFloat(l.css(r,"border"+this+"Width"))||0),x&&(a-=parseFloat(l.css(r,"margin"+this))||0)}),a}var e="Width"===o?["Left","Right"]:["Top","Bottom"],v=o.toLowerCase(),u={innerWidth:l.fn.innerWidth,innerHeight:l.fn.innerHeight,outerWidth:l.fn.outerWidth,outerHeight:l.fn.outerHeight};l.fn["inner"+o]=function(a){return void 0===a?u["inner"+o].call(this):this.each(function(){l(this).css(v,q(this,a)+"px")})},l.fn["outer"+o]=function(r,n){return"number"!=typeof r?u["outer"+o].call(this,r):this.each(function(){l(this).css(v,q(this,r,!0,n)+"px")})}}),l.fn.addBack||(l.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),l("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(l.fn.removeData=function(a){return function(e){return arguments.length?a.call(this,l.camelCase(e)):a.call(this)}}(l.fn.removeData)),l.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),l.fn.extend({focus:function(a){return function(e,n){return"number"==typeof e?this.each(function(){var o=this;setTimeout(function(){l(o).focus(),n&&n.call(o)},e)}):a.apply(this,arguments)}}(l.fn.focus),disableSelection:function(){var a="onselectstart" in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(a+".ui-disableSelection",function(n){n.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(o){if(void 0!==o){return this.css("zIndex",o)}if(this.length){for(var n,p,e=l(this[0]);e.length&&e[0]!==document;){if(n=e.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(p=parseInt(e.css("zIndex"),10),!isNaN(p)&&0!==p)){return p}e=e.parent()}}return 0}}),l.ui.plugin={add:function(p,o,q){var e,r=l.ui[p].prototype;for(e in q){r.plugins[e]=r.plugins[e]||[],r.plugins[e].push([o,q[e]])}},call:function(u,q,p,r){var o,v=u.plugins[q];if(v&&(r||u.element[0].parentNode&&11!==u.element[0].parentNode.nodeType)){for(o=0;v.length>o;o++){u.options[v[o][0]]&&v[o][1].apply(u.element,p)}}}};var g=0,b=Array.prototype.slice;l.cleanData=function(a){return function(o){var p,e,t;for(t=0;null!=(e=o[t]);t++){try{p=l._data(e,"events"),p&&p.remove&&l(e).triggerHandler("remove")}catch(q){}}a(o)}}(l.cleanData),l.widget=function(y,v,z){var x,q,e,p,w={},u=y.split(".")[0];return y=y.split(".")[1],x=u+"-"+y,z||(z=v,v=l.Widget),l.expr[":"][x.toLowerCase()]=function(a){return !!l.data(a,x)},l[u]=l[u]||{},q=l[u][y],e=l[u][y]=function(n,a){return this._createWidget?(arguments.length&&this._createWidget(n,a),void 0):new e(n,a)},l.extend(e,q,{version:z.version,_proto:l.extend({},z),_childConstructors:[]}),p=new v,p.options=l.widget.extend({},p.options),l.each(z,function(a,n){return l.isFunction(n)?(w[a]=function(){var r=function(){return v.prototype[a].apply(this,arguments)},o=function(s){return v.prototype[a].apply(this,s)};return function(){var A,s=this._super,B=this._superApply;return this._super=r,this._superApply=o,A=n.apply(this,arguments),this._super=s,this._superApply=B,A}}(),void 0):(w[a]=n,void 0)}),e.prototype=l.widget.extend(p,{widgetEventPrefix:q?p.widgetEventPrefix||y:y},w,{constructor:e,namespace:u,widgetName:y,widgetFullName:x}),q?(l.each(q._childConstructors,function(n,a){var o=a.prototype;l.widget(o.namespace+"."+o.widgetName,e,a._proto)}),delete q._childConstructors):v._childConstructors.push(e),l.widget.bridge(y,e),e},l.widget.extend=function(e){for(var a,p,v=b.call(arguments,1),q=0,u=v.length;u>q;q++){for(a in v[q]){p=v[q][a],v[q].hasOwnProperty(a)&&void 0!==p&&(e[a]=l.isPlainObject(p)?l.isPlainObject(e[a])?l.widget.extend({},e[a],p):l.widget.extend({},p):p)}}return e},l.widget.bridge=function(e,a){var n=a.prototype.widgetFullName||e;l.fn[e]=function(t){var q="string"==typeof t,s=b.call(arguments,1),p=this;return t=!q&&s.length?l.widget.extend.apply(null,[t].concat(s)):t,q?this.each(function(){var r,o=l.data(this,n);return"instance"===t?(p=o,!1):o?l.isFunction(o[t])&&"_"!==t.charAt(0)?(r=o[t].apply(o,s),r!==o&&void 0!==r?(p=r&&r.jquery?p.pushStack(r.get()):r,!1):void 0):l.error("no such method '"+t+"' for "+e+" widget instance"):l.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+t+"'")}):this.each(function(){var o=l.data(this,n);o?(o.option(t||{}),o._init&&o._init()):l.data(this,n,new a(t,this))}),p}},l.Widget=function(){},l.Widget._childConstructors=[],l.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,a){a=l(a||this.defaultElement||this)[0],this.element=l(a),this.uuid=g++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=l.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=l(),this.hoverable=l(),this.focusable=l(),a!==this&&(l.data(a,this.widgetFullName,this),this._on(!0,this.element,{remove:function(n){n.target===a&&this.destroy()}}),this.document=l(a.style?a.ownerDocument:a.document||a),this.window=l(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:l.noop,_getCreateEventData:l.noop,_create:l.noop,_init:l.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(l.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:l.noop,widget:function(){return this.element},option:function(p,o){var q,e,v,u=p;if(0===arguments.length){return l.widget.extend({},this.options)}if("string"==typeof p){if(u={},q=p.split("."),p=q.shift(),q.length){for(e=u[p]=l.widget.extend({},this.options[p]),v=0;q.length-1>v;v++){e[q[v]]=e[q[v]]||{},e=e[q[v]]}if(p=q.pop(),1===arguments.length){return void 0===e[p]?null:e[p]}e[p]=o}else{if(1===arguments.length){return void 0===this.options[p]?null:this.options[p]}u[p]=o}}return this._setOptions(u),this},_setOptions:function(n){var a;for(a in n){this._setOption(a,n[a])}return this},_setOption:function(n,a){return this.options[n]=a,"disabled"===n&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!a),a&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(p,o,q){var e,r=this;"boolean"!=typeof p&&(q=o,o=p,p=!1),q?(o=e=l(o),this.bindings=this.bindings.add(o)):(q=o,o=this.element,e=this.widget()),l.each(q,function(v,w){function x(){return p||r.options.disabled!==!0&&!l(this).hasClass("ui-state-disabled")?("string"==typeof w?r[w]:w).apply(r,arguments):void 0}"string"!=typeof w&&(x.guid=w.guid=w.guid||x.guid||l.guid++);var t=v.match(/^([\w:-]*)\s*(.*)$/),a=t[1]+r.eventNamespace,n=t[2];n?e.delegate(n,a,x):o.bind(a,x)})},_off:function(n,a){a=(a||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,n.unbind(a).undelegate(a)},_delay:function(p,n){function a(){return("string"==typeof p?o[p]:p).apply(o,arguments)}var o=this;return setTimeout(a,n||0)},_hoverable:function(a){this.hoverable=this.hoverable.add(a),this._on(a,{mouseenter:function(e){l(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){l(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(a){this.focusable=this.focusable.add(a),this._on(a,{focusin:function(e){l(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){l(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(p,o,q){var e,v,u=this.options[p];if(q=q||{},o=l.Event(o),o.type=(p===this.widgetEventPrefix?p:this.widgetEventPrefix+p).toLowerCase(),o.target=this.element[0],v=o.originalEvent){for(e in v){e in o||(o[e]=v[e])}}return this.element.trigger(o,q),!(l.isFunction(u)&&u.apply(this.element[0],[o].concat(q))===!1||o.isDefaultPrevented())}},l.each({show:"fadeIn",hide:"fadeOut"},function(e,a){l.Widget.prototype["_"+e]=function(q,p,v){"string"==typeof p&&(p={effect:p});var t,u=p?p===!0||"number"==typeof p?a:p.effect||a:e;p=p||{},"number"==typeof p&&(p={duration:p}),t=!l.isEmptyObject(p),p.complete=v,p.delay&&q.delay(p.delay),t&&l.effects&&l.effects.effect[u]?q[e](p):u!==e&&q[u]?q[u](p.duration,p.easing,v):q.queue(function(n){l(this)[e](),v&&v.call(q[0]),n()})}}),l.widget;var m=!1;l(document).mouseup(function(){m=!1}),l.widget("ui.mouse",{version:"1.11.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var a=this;this.element.bind("mousedown."+this.widgetName,function(n){return a._mouseDown(n)}).bind("click."+this.widgetName,function(e){return !0===l.data(e.target,a.widgetName+".preventClickEvent")?(l.removeData(e.target,a.widgetName+".preventClickEvent"),e.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(o){if(!m){this._mouseStarted&&this._mouseUp(o),this._mouseDownEvent=o;var n=this,p=1===o.which,e="string"==typeof this.options.cancel&&o.target.nodeName?l(o.target).closest(this.options.cancel).length:!1;return p&&!e&&this._mouseCapture(o)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(o)&&this._mouseDelayMet(o)&&(this._mouseStarted=this._mouseStart(o)!==!1,!this._mouseStarted)?(o.preventDefault(),!0):(!0===l.data(o.target,this.widgetName+".preventClickEvent")&&l.removeData(o.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return n._mouseMove(a)},this._mouseUpDelegate=function(a){return n._mouseUp(a)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),o.preventDefault(),m=!0,!0)):!0}},_mouseMove:function(a){return l.ui.ie&&(!document.documentMode||9>document.documentMode)&&!a.button?this._mouseUp(a):a.which?this._mouseStarted?(this._mouseDrag(a),a.preventDefault()):(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,a)!==!1,this._mouseStarted?this._mouseDrag(a):this._mouseUp(a)),!this._mouseStarted):this._mouseUp(a)},_mouseUp:function(a){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,a.target===this._mouseDownEvent.target&&l.data(a.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(a)),m=!1,!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return !0}}),l.widget("ui.sortable",l.ui.mouse,{version:"1.11.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(o,n,a){return o>=n&&n+a>o},_isFloating:function(a){return/left|right/.test(a.css("float"))||/inline|table-cell/.test(a.css("display"))},_create:function(){var a=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===a.axis||this._isFloating(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(n,a){this._super(n,a),"handle"===n&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),l.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--){this.items[a].item.removeData(this.widgetName+"-item")}return this},_mouseCapture:function(p,o){var q=null,e=!1,r=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(p),l(p.target).parents().each(function(){return l.data(this,r.widgetName+"-item")===r?(q=l(this),!1):void 0}),l.data(p.target,r.widgetName+"-item")===r&&(q=l(p.target)),q?!this.options.handle||o||(l(this.options.handle,q).find("*").addBack().each(function(){this===p.target&&(e=!0)}),e)?(this.currentItem=q,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(p,o,q){var e,v,u=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(p),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},l.extend(this.offset,{click:{left:p.pageX-this.offset.left,top:p.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(p),this.originalPageX=p.pageX,this.originalPageY=p.pageY,u.cursorAt&&this._adjustOffsetFromHelper(u.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),u.containment&&this._setContainment(),u.cursor&&"auto"!==u.cursor&&(v=this.document.find("body"),this.storedCursor=v.css("cursor"),v.css("cursor",u.cursor),this.storedStylesheet=l("<style>*{ cursor: "+u.cursor+" !important; }</style>").appendTo(v)),u.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",u.opacity)),u.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",u.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",p,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!q){for(e=this.containers.length-1;e>=0;e--){this.containers[e]._trigger("activate",p,this._uiHash(this))}}return l.ui.ddmanager&&(l.ui.ddmanager.current=this),l.ui.ddmanager&&!u.dropBehaviour&&l.ui.ddmanager.prepareOffsets(this,p),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(p),!0},_mouseDrag:function(q){var p,u,e,x,v=this.options,w=!1;for(this.position=this._generatePosition(q),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-q.pageY<v.scrollSensitivity?this.scrollParent[0].scrollTop=w=this.scrollParent[0].scrollTop+v.scrollSpeed:q.pageY-this.overflowOffset.top<v.scrollSensitivity&&(this.scrollParent[0].scrollTop=w=this.scrollParent[0].scrollTop-v.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-q.pageX<v.scrollSensitivity?this.scrollParent[0].scrollLeft=w=this.scrollParent[0].scrollLeft+v.scrollSpeed:q.pageX-this.overflowOffset.left<v.scrollSensitivity&&(this.scrollParent[0].scrollLeft=w=this.scrollParent[0].scrollLeft-v.scrollSpeed)):(q.pageY-l(document).scrollTop()<v.scrollSensitivity?w=l(document).scrollTop(l(document).scrollTop()-v.scrollSpeed):l(window).height()-(q.pageY-l(document).scrollTop())<v.scrollSensitivity&&(w=l(document).scrollTop(l(document).scrollTop()+v.scrollSpeed)),q.pageX-l(document).scrollLeft()<v.scrollSensitivity?w=l(document).scrollLeft(l(document).scrollLeft()-v.scrollSpeed):l(window).width()-(q.pageX-l(document).scrollLeft())<v.scrollSensitivity&&(w=l(document).scrollLeft(l(document).scrollLeft()+v.scrollSpeed))),w!==!1&&l.ui.ddmanager&&!v.dropBehaviour&&l.ui.ddmanager.prepareOffsets(this,q)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),p=this.items.length-1;p>=0;p--){if(u=this.items[p],e=u.item[0],x=this._intersectsWithPointer(u),x&&u.instance===this.currentContainer&&e!==this.currentItem[0]&&this.placeholder[1===x?"next":"prev"]()[0]!==e&&!l.contains(this.placeholder[0],e)&&("semi-dynamic"===this.options.type?!l.contains(this.element[0],e):!0)){if(this.direction=1===x?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(u)){break}this._rearrange(q,u),this._trigger("change",q,this._uiHash());break}}return this._contactContainers(q),l.ui.ddmanager&&l.ui.ddmanager.drag(this,q),this._trigger("sort",q,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(p,o){if(p){if(l.ui.ddmanager&&!this.options.dropBehaviour&&l.ui.ddmanager.drop(this,p),this.options.revert){var q=this,e=this.placeholder.offset(),v=this.options.axis,u={};v&&"x"!==v||(u.left=e.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),v&&"y"!==v||(u.top=e.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,l(this.helper).animate(u,parseInt(this.options.revert,10)||500,function(){q._clear(p)})}else{this._clear(p,o)}return !1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var a=this.containers.length-1;a>=0;a--){this.containers[a]._trigger("deactivate",null,this._uiHash(this)),this.containers[a].containerCache.over&&(this.containers[a]._trigger("out",null,this._uiHash(this)),this.containers[a].containerCache.over=0)}}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),l.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?l(this.domPosition.prev).after(this.currentItem):l(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var a=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},l(a).each(function(){var o=(l(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);o&&n.push((e.key||o[1]+"[]")+"="+(e.key&&e.expression?o[1]:o[2]))}),!n.length&&e.key&&n.push(e.key+"="),n.join("&")},toArray:function(e){var a=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},a.each(function(){n.push(l(e.item||this).attr(e.attribute||"id")||"")}),n},_intersectsWith:function(B){var G=this.positionAbs.left,z=G+this.helperProportions.width,H=this.positionAbs.top,E=H+this.helperProportions.height,x=B.left,q=x+B.width,w=B.top,A=w+B.height,y=this.offset.click.top,F=this.offset.click.left,C="x"===this.options.axis||H+y>w&&A>H+y,D="y"===this.options.axis||G+F>x&&q>G+F,v=C&&D;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>B[this.floating?"width":"height"]?v:G+this.helperProportions.width/2>x&&q>z-this.helperProportions.width/2&&H+this.helperProportions.height/2>w&&A>E-this.helperProportions.height/2},_intersectsWithPointer:function(u){var q="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,u.top,u.height),p="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,u.left,u.width),r=q&&p,o=this._getDragVerticalDirection(),v=this._getDragHorizontalDirection();return r?this.floating?v&&"right"===v||"down"===o?2:1:o&&("down"===o?2:1):!1},_intersectsWithSides:function(r){var p=this._isOverAxis(this.positionAbs.top+this.offset.click.top,r.top+r.height/2,r.height),o=this._isOverAxis(this.positionAbs.left+this.offset.click.left,r.left+r.width/2,r.width),q=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return this.floating&&n?"right"===n&&o||"left"===n&&!o:q&&("down"===q&&p||"up"===q&&!p)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!==a&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!==a&&(a>0?"right":"left")},refresh:function(a){return this._refreshItems(a),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor===String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(y){function v(){p.push(this)}var z,x,q,e,p=[],w=[],u=this._connectWith();if(u&&y){for(z=u.length-1;z>=0;z--){for(q=l(u[z]),x=q.length-1;x>=0;x--){e=l.data(q[x],this.widgetFullName),e&&e!==this&&!e.options.disabled&&w.push([l.isFunction(e.options.items)?e.options.items.call(e.element):l(e.options.items,e.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),e])}}}for(w.push([l.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):l(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),z=w.length-1;z>=0;z--){w[z][0].each(v)}return l(p)},_removeCurrentsFromItems:function(){var a=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=l.grep(this.items,function(o){for(var n=0;a.length>n;n++){if(a[n]===o.item[0]){return !1}}return !0})},_refreshItems:function(C){this.items=[],this.containers=[this];var w,D,A,q,e,p,x,v,B=this.items,y=[[l.isFunction(this.options.items)?this.options.items.call(this.element[0],C,{item:this.currentItem}):l(this.options.items,this.element),this]],z=this._connectWith();if(z&&this.ready){for(w=z.length-1;w>=0;w--){for(A=l(z[w]),D=A.length-1;D>=0;D--){q=l.data(A[D],this.widgetFullName),q&&q!==this&&!q.options.disabled&&(y.push([l.isFunction(q.options.items)?q.options.items.call(q.element[0],C,{item:this.currentItem}):l(q.options.items,q.element),q]),this.containers.push(q))}}}for(w=y.length-1;w>=0;w--){for(e=y[w][1],p=y[w][0],D=0,v=p.length;v>D;D++){x=l(p[D]),x.data(this.widgetName+"-item",e),B.push({item:x,instance:e,width:0,height:0,left:0,top:0})}}},refreshPositions:function(p){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var o,q,e,r;for(o=this.items.length-1;o>=0;o--){q=this.items[o],q.instance!==this.currentContainer&&this.currentContainer&&q.item[0]!==this.currentItem[0]||(e=this.options.toleranceElement?l(this.options.toleranceElement,q.item):q.item,p||(q.width=e.outerWidth(),q.height=e.outerHeight()),r=e.offset(),q.left=r.left,q.top=r.top)}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(o=this.containers.length-1;o>=0;o--){r=this.containers[o].element.offset(),this.containers[o].containerCache.left=r.left,this.containers[o].containerCache.top=r.top,this.containers[o].containerCache.width=this.containers[o].element.outerWidth(),this.containers[o].containerCache.height=this.containers[o].element.outerHeight()}}return this},_createPlaceholder:function(e){e=e||this;var a,n=e.options;n.placeholder&&n.placeholder.constructor!==String||(a=n.placeholder,n.placeholder={element:function(){var p=e.currentItem[0].nodeName.toLowerCase(),o=l("<"+p+">",e.document[0]).addClass(a||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===p?e.currentItem.children().each(function(){l("<td>&#160;</td>",e.document[0]).attr("colspan",l(this).attr("colspan")||1).appendTo(o)}):"img"===p&&o.attr("src",e.currentItem.attr("src")),a||o.css("visibility","hidden"),o},update:function(p,o){(!a||n.forcePlaceholderSize)&&(o.height()||o.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),o.width()||o.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=l(n.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),n.placeholder.update(e,e.placeholder)},_contactContainers:function(E){var y,F,C,w,e,v,z,x,D,A,B=null,q=null;for(y=this.containers.length-1;y>=0;y--){if(!l.contains(this.currentItem[0],this.containers[y].element[0])){if(this._intersectsWith(this.containers[y].containerCache)){if(B&&l.contains(this.containers[y].element[0],B.element[0])){continue}B=this.containers[y],q=y}else{this.containers[y].containerCache.over&&(this.containers[y]._trigger("out",E,this._uiHash(this)),this.containers[y].containerCache.over=0)}}}if(B){if(1===this.containers.length){this.containers[q].containerCache.over||(this.containers[q]._trigger("over",E,this._uiHash(this)),this.containers[q].containerCache.over=1)}else{for(C=10000,w=null,D=B.floating||this._isFloating(this.currentItem),e=D?"left":"top",v=D?"width":"height",A=D?"clientX":"clientY",F=this.items.length-1;F>=0;F--){l.contains(this.containers[q].element[0],this.items[F].item[0])&&this.items[F].item[0]!==this.currentItem[0]&&(z=this.items[F].item.offset()[e],x=!1,E[A]-z>this.items[F][v]/2&&(x=!0),C>Math.abs(E[A]-z)&&(C=Math.abs(E[A]-z),w=this.items[F],this.direction=x?"up":"down"))}if(!w&&!this.options.dropOnEmpty){return}if(this.currentContainer===this.containers[q]){return}w?this._rearrange(E,w,null,!0):this._rearrange(E,null,this.containers[q].element,!0),this._trigger("change",E,this._uiHash()),this.containers[q]._trigger("change",E,this._uiHash(this)),this.currentContainer=this.containers[q],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[q]._trigger("over",E,this._uiHash(this)),this.containers[q].containerCache.over=1}}},_createHelper:function(e){var a=this.options,n=l.isFunction(a.helper)?l(a.helper.apply(this.element[0],[e,this.currentItem])):"clone"===a.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||l("parent"!==a.appendTo?a.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!n[0].style.width||a.forceHelperSize)&&n.width(this.currentItem.width()),(!n[0].style.height||a.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(a){"string"==typeof a&&(a=a.split(" ")),l.isArray(a)&&(a={left:+a[0],top:+a[1]||0}),"left" in a&&(this.offset.click.left=a.left+this.margins.left),"right" in a&&(this.offset.click.left=this.helperProportions.width-a.right+this.margins.left),"top" in a&&(this.offset.click.top=a.top+this.margins.top),"bottom" in a&&(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&l.contains(this.scrollParent[0],this.offsetParent[0])&&(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&l.ui.ie)&&(a={top:0,left:0}),{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var o,n,p,e=this.options;"parent"===e.containment&&(e.containment=this.helper[0].parentNode),("document"===e.containment||"window"===e.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,l("document"===e.containment?document:window).width()-this.helperProportions.width-this.margins.left,(l("document"===e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(e.containment)||(o=l(e.containment)[0],n=l(e.containment).offset(),p="hidden"!==l(o).css("overflow"),this.containment=[n.left+(parseInt(l(o).css("borderLeftWidth"),10)||0)+(parseInt(l(o).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(l(o).css("borderTopWidth"),10)||0)+(parseInt(l(o).css("paddingTop"),10)||0)-this.margins.top,n.left+(p?Math.max(o.scrollWidth,o.offsetWidth):o.offsetWidth)-(parseInt(l(o).css("borderLeftWidth"),10)||0)-(parseInt(l(o).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(p?Math.max(o.scrollHeight,o.offsetHeight):o.offsetHeight)-(parseInt(l(o).css("borderTopWidth"),10)||0)-(parseInt(l(o).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(p,o){o||(o=this.position);var q="absolute"===p?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&l.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(e[0].tagName);return{top:o.top+this.offset.relative.top*q+this.offset.parent.top*q-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:e.scrollTop())*q,left:o.left+this.offset.relative.left*q+this.offset.parent.left*q-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:e.scrollLeft())*q}},_generatePosition:function(q){var p,v,e=this.options,y=q.pageX,w=q.pageY,x="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&l.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,u=/(html|body)/i.test(x[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(q.pageX-this.offset.click.left<this.containment[0]&&(y=this.containment[0]+this.offset.click.left),q.pageY-this.offset.click.top<this.containment[1]&&(w=this.containment[1]+this.offset.click.top),q.pageX-this.offset.click.left>this.containment[2]&&(y=this.containment[2]+this.offset.click.left),q.pageY-this.offset.click.top>this.containment[3]&&(w=this.containment[3]+this.offset.click.top)),e.grid&&(p=this.originalPageY+Math.round((w-this.originalPageY)/e.grid[1])*e.grid[1],w=this.containment?p-this.offset.click.top>=this.containment[1]&&p-this.offset.click.top<=this.containment[3]?p:p-this.offset.click.top>=this.containment[1]?p-e.grid[1]:p+e.grid[1]:p,v=this.originalPageX+Math.round((y-this.originalPageX)/e.grid[0])*e.grid[0],y=this.containment?v-this.offset.click.left>=this.containment[0]&&v-this.offset.click.left<=this.containment[2]?v:v-this.offset.click.left>=this.containment[0]?v-e.grid[0]:v+e.grid[0]:v)),{top:w-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():u?0:x.scrollTop()),left:y-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():u?0:x.scrollLeft())}},_rearrange:function(r,p,o,q){o?o[0].appendChild(this.placeholder[0]):p.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?p.item[0]:p.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!q)})},_clear:function(r,p){function o(u,s,a){return function(e){a._trigger(u,e,s._uiHash(s))}}this.reverting=!1;var q,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(q in this._storedCSS){("auto"===this._storedCSS[q]||"static"===this._storedCSS[q])&&(this._storedCSS[q]="")}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}for(this.fromOutside&&!p&&n.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||p||n.push(function(a){this._trigger("update",a,this._uiHash())}),this!==this.currentContainer&&(p||(n.push(function(a){this._trigger("remove",a,this._uiHash())}),n.push(function(a){return function(e){a._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(a){return function(e){a._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),q=this.containers.length-1;q>=0;q--){p||n.push(o("deactivate",this,this.containers[q])),this.containers[q].containerCache.over&&(n.push(o("out",this,this.containers[q])),this.containers[q].containerCache.over=0)}if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!p){for(this._trigger("beforeStop",r,this._uiHash()),q=0;n.length>q;q++){n[q].call(this,r)}this._trigger("stop",r,this._uiHash())}return this.fromOutside=!1,!1}if(p||this._trigger("beforeStop",r,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!p){for(q=0;n.length>q;q++){n[q].call(this,r)}this._trigger("stop",r,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){l.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var a=e||this;return{helper:a.helper,placeholder:a.placeholder||l([]),position:a.position,originalPosition:a.originalPosition,offset:a.positionAbs,item:a.currentItem,sender:e?e.element:null}}})});jQuery.browser={};jQuery.browser.mozilla=/firefox/.test(navigator.userAgent.toLowerCase());jQuery.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase());jQuery.browser.opera=/opera/.test(navigator.userAgent.toLowerCase());jQuery.browser.msie11=/rv:11.0/.test(navigator.userAgent.toLowerCase());jQuery.browser.msie=/msie/.test(navigator.userAgent.toLowerCase())||jQuery.browser.msie11;jQuery.fn.extend({taserialize:function(a){return jQuery.param(this.taserializeArray(a))},taserializeArray:function(a){if(a==true?false:Base.globvar.commitNullField==false){return this.map(function(){var b=((this.tagName&&(this.tagName.toLowerCase()=="input"||this.tagName=="TEXTAREA"))?true:false);return this.elements?jQuery.makeArray(this.elements):jQuery.makeArray(b?this:$(this).find(":input").get())}).filter(function(){return this.name&&!this.disabled&&(this.checked||/^(?:select|textarea)/i.test(this.nodeName)||/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i.test(this.type))}).map(function(b,d){var e=jQuery(this).val();return e==null||((typeof e=="string")&&e.trim()=="")?null:jQuery.isArray(e)?jQuery.map(e,function(g,f){return{name:d.name,value:g.trim().replace(/\r?\n/g,"\r\n")}}):{name:d.name,value:e.trim().replace(/\r?\n/g,"\r\n")}}).get()}else{return this.map(function(){var b=((this.tagName&&(this.tagName.toLowerCase()=="input"||this.tagName=="TEXTAREA"))?true:false);return this.elements?jQuery.makeArray(this.elements):jQuery.makeArray(b?this:$(this).find(":input").get())}).filter(function(){return this.name&&!this.disabled&&(this.checked||/^(?:select|textarea)/i.test(this.nodeName)||/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i.test(this.type))}).get()}}});(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(b){b.fn.IsBubblePopupOpen=function(){var a=null;b(this).each(function(l,g){var f=b(g).data("private_jquerybubblepopup_options");if(f!=null&&typeof f=="object"&&!b.isArray(f)&&!b.isEmptyObject(f)&&f.privateVars!=null&&typeof f.privateVars=="object"&&!b.isArray(f.privateVars)&&!b.isEmptyObject(f.privateVars)&&typeof f.privateVars.is_open!="undefined"){a=f.privateVars.is_open?true:false}return false});return a};b.fn.GetBubblePopupLastDisplayDateTime=function(){var a=null;b(this).each(function(l,g){var m=b(g).data("private_jquerybubblepopup_options");if(m!=null&&typeof m=="object"&&!b.isArray(m)&&!b.isEmptyObject(m)&&m.privateVars!=null&&typeof m.privateVars=="object"&&!b.isArray(m.privateVars)&&!b.isEmptyObject(m.privateVars)&&typeof m.privateVars.last_display_datetime!="undefined"&&m.privateVars.last_display_datetime!=null){a=d(m.privateVars.last_display_datetime)}return false});function d(e){return new Date(e*1000)}return a};b.fn.GetBubblePopupLastModifiedDateTime=function(){var a=null;b(this).each(function(l,g){var m=b(g).data("private_jquerybubblepopup_options");if(m!=null&&typeof m=="object"&&!b.isArray(m)&&!b.isEmptyObject(m)&&m.privateVars!=null&&typeof m.privateVars=="object"&&!b.isArray(m.privateVars)&&!b.isEmptyObject(m.privateVars)&&typeof m.privateVars.last_modified_datetime!="undefined"&&m.privateVars.last_modified_datetime!=null){a=d(m.privateVars.last_modified_datetime)}return false});function d(e){return new Date(e*1000)}return a};b.fn.GetBubblePopupCreationDateTime=function(){var a=null;b(this).each(function(l,g){var m=b(g).data("private_jquerybubblepopup_options");if(m!=null&&typeof m=="object"&&!b.isArray(m)&&!b.isEmptyObject(m)&&m.privateVars!=null&&typeof m.privateVars=="object"&&!b.isArray(m.privateVars)&&!b.isEmptyObject(m.privateVars)&&typeof m.privateVars.creation_datetime!="undefined"&&m.privateVars.creation_datetime!=null){a=d(m.privateVars.creation_datetime)}return false});function d(e){return new Date(e*1000)}return a};b.fn.GetBubblePopupMarkup=function(){var a=null;b(this).each(function(g,f){var l=b(f).data("private_jquerybubblepopup_options");if(l!=null&&typeof l=="object"&&!b.isArray(l)&&!b.isEmptyObject(l)&&l.privateVars!=null&&typeof l.privateVars=="object"&&!b.isArray(l.privateVars)&&!b.isEmptyObject(l.privateVars)&&typeof l.privateVars.id!="undefined"){a=b("#"+l.privateVars.id).length>0?b("#"+l.privateVars.id).html():null}return false});return a};b.fn.GetBubblePopupID=function(){var a=null;b(this).each(function(g,f){var l=b(f).data("private_jquerybubblepopup_options");if(l!=null&&typeof l=="object"&&!b.isArray(l)&&!b.isEmptyObject(l)&&l.privateVars!=null&&typeof l.privateVars=="object"&&!b.isArray(l.privateVars)&&!b.isEmptyObject(l.privateVars)&&typeof l.privateVars.id!="undefined"){a=l.privateVars.id}return false});return a};b.fn.RemoveBubblePopup=function(){var a=0;b(this).each(function(g,f){var l=b(f).data("private_jquerybubblepopup_options");if(l!=null&&typeof l=="object"&&!b.isArray(l)&&!b.isEmptyObject(l)&&l.privateVars!=null&&typeof l.privateVars=="object"&&!b.isArray(l.privateVars)&&!b.isEmptyObject(l.privateVars)&&typeof l.privateVars.id!="undefined"){b(f).unbind("managebubblepopup");b(f).unbind("setbubblepopupinnerhtml");b(f).unbind("setbubblepopupoptions");b(f).unbind("positionbubblepopup");b(f).unbind("freezebubblepopup");b(f).unbind("unfreezebubblepopup");b(f).unbind("showbubblepopup");b(f).unbind("hidebubblepopup");b(f).data("private_jquerybubblepopup_options",{});if(b("#"+l.privateVars.id).length>0){b("#"+l.privateVars.id).remove()}a++}});return a};b.fn.HasBubblePopup=function(){var a=false;b(this).each(function(l,g){var f=b(g).data("private_jquerybubblepopup_options");if(f!=null&&typeof f=="object"&&!b.isArray(f)&&!b.isEmptyObject(f)&&f.privateVars!=null&&typeof f.privateVars=="object"&&!b.isArray(f.privateVars)&&!b.isEmptyObject(f.privateVars)&&typeof f.privateVars.id!="undefined"){a=true}return false});return a};b.fn.GetBubblePopupOptions=function(){var a={};b(this).each(function(f,e){a=b(e).data("private_jquerybubblepopup_options");if(a!=null&&typeof a=="object"&&!b.isArray(a)&&!b.isEmptyObject(a)&&a.privateVars!=null&&typeof a.privateVars=="object"&&!b.isArray(a.privateVars)&&!b.isEmptyObject(a.privateVars)){delete a.privateVars}else{a=null}return false});if(b.isEmptyObject(a)){a=null}return a};b.fn.SetBubblePopupInnerHtml=function(a,d){b(this).each(function(g,f){if(typeof d!="boolean"){d=true}b(f).trigger("setbubblepopupinnerhtml",[a,d])})};b.fn.SetBubblePopupOptions=function(a){b(this).each(function(f,e){b(e).trigger("setbubblepopupoptions",[a])})};b.fn.ShowBubblePopup=function(a,d){b(this).each(function(g,f){b(f).trigger("showbubblepopup",[a,d,true]);return false})};b.fn.ShowAllBubblePopups=function(a,d){b(this).each(function(g,f){b(f).trigger("showbubblepopup",[a,d,true])})};b.fn.HideBubblePopup=function(){b(this).each(function(a,d){b(d).trigger("hidebubblepopup",[true]);return false})};b.fn.HideAllBubblePopups=function(){b(this).each(function(a,d){b(d).trigger("hidebubblepopup",[true])})};b.fn.FreezeBubblePopup=function(){b(this).each(function(a,d){b(d).trigger("freezebubblepopup");return false})};b.fn.FreezeAllBubblePopups=function(){b(this).each(function(a,d){b(d).trigger("freezebubblepopup")})};b.fn.UnfreezeBubblePopup=function(){b(this).each(function(a,d){b(d).trigger("unfreezebubblepopup");return false})};b.fn.UnfreezeAllBubblePopups=function(){b(this).each(function(a,d){b(d).trigger("unfreezebubblepopup")})};b.fn.CreateBubblePopup=function(G){var t={me:this,cache:[],options_key:"private_jquerybubblepopup_options",model_tr:["top","middle","bottom"],model_td:["left","middle","right"],model_markup:'<div class="{BASE_CLASS} {TEMPLATE_CLASS}"{DIV_STYLE} id="{DIV_ID}"> 									<table{TABLE_STYLE}> 									<tbody> 									<tr> 										<td class="{BASE_CLASS}-top-left"{TOP-LEFT_STYLE}>{TOP-LEFT}</td> 										<td class="{BASE_CLASS}-top-middle"{TOP-MIDDLE_STYLE}>{TOP-MIDDLE}</td> 										<td class="{BASE_CLASS}-top-right"{TOP-RIGHT_STYLE}>{TOP-RIGHT}</td> 									</tr> 									<tr> 										<td class="{BASE_CLASS}-middle-left"{MIDDLE-LEFT_STYLE}>{MIDDLE-LEFT}</td> 										<td class="{BASE_CLASS}-innerHtml"{INNERHTML_STYLE}>{INNERHTML}</td> 										<td class="{BASE_CLASS}-middle-right"{MIDDLE-RIGHT_STYLE}>{MIDDLE-RIGHT}</td> 									</tr> 									<tr> 										<td class="{BASE_CLASS}-bottom-left"{BOTTOM-LEFT_STYLE}>{BOTTOM-LEFT}</td> 										<td class="{BASE_CLASS}-bottom-middle"{BOTTOM-MIDDLE_STYLE}>{BOTTOM-MIDDLE}</td> 										<td class="{BASE_CLASS}-bottom-right"{BOTTOM-RIGHT_STYLE}>{BOTTOM-RIGHT}</td> 									</tr> 									</tbody> 									</table> 									</div>',privateVars:{id:null,creation_datetime:null,last_modified_datetime:null,last_display_datetime:null,is_open:false,is_freezed:false,is_animating:false,is_animation_complete:false,is_mouse_over:false,is_position_changed:false,last_options:{}},position:"top",positionValues:["left","top","right","bottom"],align:"center",alignValues:["left","center","right","top","middle","bottom"],alignHorizontalValues:["left","center","right"],alignVerticalValues:["top","middle","bottom"],distance:"20px",width:null,height:null,divStyle:{},tableStyle:{},innerHtml:null,innerHtmlStyle:{},tail:{align:"center",hidden:false},dropShadow:true,alwaysVisible:true,selectable:false,manageMouseEvents:true,mouseOver:"show",mouseOverValues:["show","hide"],mouseOut:"hide",mouseOutValues:["show","hide"],openingSpeed:250,closingSpeed:250,openingDelay:0,closingDelay:0,baseClass:"jquerybubblepopup",themeName:"azure",themePath:"jquerybubblepopup-themes/",themeMargins:{total:"13px",difference:"10px"},afterShown:function(){},afterHidden:function(){},hideElementId:[],marginHeight:10};D(G);function E(e){var d={privateVars:{},width:t.width,height:t.height,divStyle:t.divStyle,tableStyle:t.tableStyle,position:t.position,align:t.align,distance:t.distance,openingSpeed:t.openingSpeed,closingSpeed:t.closingSpeed,openingDelay:t.openingDelay,closingDelay:t.closingDelay,mouseOver:t.mouseOver,mouseOut:t.mouseOut,tail:t.tail,innerHtml:t.innerHtml,innerHtmlStyle:t.innerHtmlStyle,baseClass:t.baseClass,themeName:t.themeName,themePath:t.themePath,themeMargins:t.themeMargins,dropShadow:t.dropShadow,manageMouseEvents:t.manageMouseEvents,alwaysVisible:t.alwaysVisible,selectable:t.selectable,afterShown:t.afterShown,afterHidden:t.afterHidden,hideElementId:t.hideElementId};var g=b.extend(false,d,(typeof e=="object"&&!b.isArray(e)&&!b.isEmptyObject(e)&&e!=null?e:{}));g.privateVars.id=t.privateVars.id;g.privateVars.creation_datetime=t.privateVars.creation_datetime;g.privateVars.last_modified_datetime=t.privateVars.last_modified_datetime;g.privateVars.last_display_datetime=t.privateVars.last_display_datetime;g.privateVars.is_open=t.privateVars.is_open;g.privateVars.is_freezed=t.privateVars.is_freezed;g.privateVars.is_animating=t.privateVars.is_animating;g.privateVars.is_animation_complete=t.privateVars.is_animation_complete;g.privateVars.is_mouse_over=t.privateVars.is_mouse_over;g.privateVars.is_position_changed=t.privateVars.is_position_changed;g.privateVars.last_options=t.privateVars.last_options;g.width=(typeof g.width=="string"||typeof g.width=="number")&&parseInt(g.width)>0?parseInt(g.width):t.width;g.height=(typeof g.height=="string"||typeof g.height=="number")&&parseInt(g.height)>0?parseInt(g.height):t.height;g.divStyle=g.divStyle!=null&&typeof g.divStyle=="object"&&!b.isArray(g.divStyle)&&!b.isEmptyObject(g.divStyle)?g.divStyle:t.divStyle;g.tableStyle=g.tableStyle!=null&&typeof g.tableStyle=="object"&&!b.isArray(g.tableStyle)&&!b.isEmptyObject(g.tableStyle)?g.tableStyle:t.tableStyle;g.position=typeof g.position=="string"&&w(g.position.toLowerCase(),t.positionValues)?g.position.toLowerCase():t.position;g.align=typeof g.align=="string"&&w(g.align.toLowerCase(),t.alignValues)?g.align.toLowerCase():t.align;g.distance=(typeof g.distance=="string"||typeof g.distance=="number")&&parseInt(g.distance)>=0?parseInt(g.distance):t.distance;g.openingSpeed=typeof g.openingSpeed=="number"&&parseInt(g.openingSpeed)>0?parseInt(g.openingSpeed):t.openingSpeed;g.closingSpeed=typeof g.closingSpeed=="number"&&parseInt(g.closingSpeed)>0?parseInt(g.closingSpeed):t.closingSpeed;g.openingDelay=typeof g.openingDelay=="number"&&g.openingDelay>=0?g.openingDelay:t.openingDelay;g.closingDelay=typeof g.closingDelay=="number"&&g.closingDelay>=0?g.closingDelay:t.closingDelay;g.mouseOver=typeof g.mouseOver=="string"&&w(g.mouseOver.toLowerCase(),t.mouseOverValues)?g.mouseOver.toLowerCase():t.mouseOver;g.mouseOut=typeof g.mouseOut=="string"&&w(g.mouseOut.toLowerCase(),t.mouseOutValues)?g.mouseOut.toLowerCase():t.mouseOut;g.tail=g.tail!=null&&typeof g.tail=="object"&&!b.isArray(g.tail)&&!b.isEmptyObject(g.tail)?g.tail:t.tail;g.tail.align=typeof g.tail.align!="undefined"?g.tail.align:t.tail.align;g.tail.hidden=typeof g.tail.hidden!="undefined"?g.tail.hidden:t.tail.hidden;g.innerHtml=typeof g.innerHtml=="string"&&g.innerHtml.length>0?g.innerHtml:t.innerHtml;g.innerHtmlStyle=g.innerHtmlStyle!=null&&typeof g.innerHtmlStyle=="object"&&!b.isArray(g.innerHtmlStyle)&&!b.isEmptyObject(g.innerHtmlStyle)?g.innerHtmlStyle:t.innerHtmlStyle;g.baseClass=B(typeof g.baseClass=="string"&&g.baseClass.length>0?g.baseClass:t.baseClass);g.themeName=typeof g.themeName=="string"&&g.themeName.length>0?b.trim(g.themeName):t.themeName;g.themePath=typeof g.themePath=="string"&&g.themePath.length>0?b.trim(g.themePath):t.themePath;g.themeMargins=g.themeMargins!=null&&typeof g.themeMargins=="object"&&!b.isArray(g.themeMargins)&&!b.isEmptyObject(g.themeMargins)&&(typeof parseInt(g.themeMargins.total)=="number"&&typeof parseInt(g.themeMargins.difference)=="number")?g.themeMargins:t.themeMargins;g.dropShadow=typeof g.dropShadow=="boolean"&&g.dropShadow==true?true:false;g.manageMouseEvents=typeof g.manageMouseEvents=="boolean"&&g.manageMouseEvents==true?true:false;g.alwaysVisible=typeof g.alwaysVisible=="boolean"&&g.alwaysVisible==true?true:false;g.selectable=typeof g.selectable=="boolean"&&g.selectable==true?true:false;g.afterShown=typeof g.afterShown=="function"?g.afterShown:t.afterShown;g.afterHidden=typeof g.afterHidden=="function"?g.afterHidden:t.afterHidden;g.hideElementId=b.isArray(g.hideElementId)?g.hideElementId:t.hideElementId;if(g.position=="left"||g.position=="right"){g.align=w(g.align,t.alignVerticalValues)?g.align:"middle"}else{g.align=w(g.align,t.alignHorizontalValues)?g.align:"center"}for(var f in g.tail){switch(f){case"align":g.tail.align=typeof g.tail.align=="string"&&w(g.tail.align.toLowerCase(),t.alignValues)?g.tail.align.toLowerCase():t.tail.align;if(g.position=="left"||g.position=="right"){g.tail.align=w(g.tail.align,t.alignVerticalValues)?g.tail.align:"middle"}else{g.tail.align=w(g.tail.align,t.alignHorizontalValues)?g.tail.align:"center"}break;case"hidden":g.tail.hidden=g.tail.hidden==true?true:false;break}}return g}function z(d){if(d==0){return 0}if(d>0){return -(Math.abs(d))}else{return Math.abs(d)}}function w(e,d){var g=false;for(var f in d){if(d[f]==e){g=true;break}}return g}function A(d){b(d).each(function(){b("<img/>")[0].src=this})}function J(f){if(f.hideElementId&&f.hideElementId.length>0){for(var e=0;e<f.hideElementId.length;e++){var d=(f.hideElementId[e].charAt(0)!="#"?"#"+f.hideElementId[e]:f.hideElementId[e]);b(d).css({visibility:"hidden"})}}}function a(g){if(g.hideElementId&&g.hideElementId.length>0){for(var f=0;f<g.hideElementId.length;f++){var d=(g.hideElementId[f].charAt(0)!="#"?"#"+g.hideElementId[f]:g.hideElementId[f]);b(d).css({visibility:"visible"});var e=b(d).length;for(var l=0;l<e.length;l++){b(e[l]).css({visibility:"visible"})}}}}function y(f){var d=f.themePath;var g=f.themeName;var e=(d.substring(d.length-1)=="/"||d.substring(d.length-1)=="\\")?d.substring(0,d.length-1)+"/"+g+"/":d+"/"+g+"/";return e+(f.dropShadow==true?(b.browser.msie?"ie/":""):"ie/")}function B(e){var d=e.substring(0,1)=="."?e.substring(1,e.length):e;return d}function u(d){if(b("#"+d.privateVars.id).length>0){var e="bottom-middle";switch(d.position){case"left":e="middle-right";break;case"top":e="bottom-middle";break;case"right":e="middle-left";break;case"bottom":e="top-middle";break}if(w(d.tail.align,t.alignHorizontalValues)){b("#"+d.privateVars.id).find("td."+d.baseClass+"-"+e).css("text-align",d.tail.align)}else{b("#"+d.privateVars.id).find("td."+d.baseClass+"-"+e).css("vertical-align",d.tail.align)}}}function v(q){var n=t.model_markup;var r=y(q);var m="";var p="";var s="";if(!q.tail.hidden){switch(q.position){case"left":p="right";s="{MIDDLE-RIGHT}";break;case"top":p="bottom";s="{BOTTOM-MIDDLE}";break;case"right":p="left";s="{MIDDLE-LEFT}";break;case"bottom":p="top";s="{TOP-MIDDLE}";break}m='<img src="'+r+"tail-"+p+"."+(q.dropShadow==true?(b.browser.msie?"gif":"png"):"gif")+'" alt="" class="'+q.baseClass+'-tail" />'}var M=t.model_tr;var e=t.model_td;var d,L,Q,f;var P="";var g="";var N=new Array();for(L in M){Q="";f="";for(d in e){Q=M[L]+"-"+e[d];Q=Q.toUpperCase();f="{"+Q+"_STYLE}";Q="{"+Q+"}";if(Q==s){n=n.replace(Q,m);P=""}else{n=n.replace(Q,"");P=""}if(M[L]+"-"+e[d]!="middle-middle"){g=r+M[L]+"-"+e[d]+"."+(q.dropShadow==true?(b.browser.msie?"gif":"png"):"gif");N.push(g);n=n.replace(f,' style="'+P+"background-image:url("+g+');"')}}}if(N.length>0){A(N)}var o="";if(q.tableStyle!=null&&typeof q.tableStyle=="object"&&!b.isArray(q.tableStyle)&&!b.isEmptyObject(q.tableStyle)){for(var O in q.tableStyle){o+=O+":"+q.tableStyle[O]+";"}}o+=(q.width!=null||q.height!=null)?(q.width!=null?"width:"+q.width+"px;":"")+(q.height!=null?"height:"+q.height+"px;":""):"";n=o.length>0?n.replace("{TABLE_STYLE}",' style="'+o+'"'):n.replace("{TABLE_STYLE}","");var l="";if(q.divStyle!=null&&typeof q.divStyle=="object"&&!b.isArray(q.divStyle)&&!b.isEmptyObject(q.divStyle)){for(var O in q.divStyle){l+=O+":"+q.divStyle[O]+";"}}n=l.length>0?n.replace("{DIV_STYLE}",' style="'+l+'"'):n.replace("{DIV_STYLE}","");n=n.replace("{TEMPLATE_CLASS}",q.baseClass+"-"+q.themeName);n=q.privateVars.id!=null?n.replace("{DIV_ID}",q.privateVars.id):n.replace("{DIV_ID}","");while(n.indexOf("{BASE_CLASS}")>-1){n=n.replace("{BASE_CLASS}",q.baseClass)}n=q.innerHtml!=null?n.replace("{INNERHTML}",q.innerHtml):n.replace("{INNERHTML}","");f="";for(var O in q.innerHtmlStyle){f+=O+":"+q.innerHtmlStyle[O]+";"}n=f.length>0?n.replace("{INNERHTML_STYLE}",' style="'+f+'"'):n.replace("{INNERHTML_STYLE}","");return n}function F(){return Math.round(new Date().getTime()/1000)}function I(V,f,r){var e=r.position;var m=r.align;var n=r.distance;var T=r.themeMargins;var q=new Array();var U=f.offset();var W=parseInt(U.top);var p=parseInt(U.left);var d=parseInt(f.outerWidth(false));var l=parseInt(f.outerHeight(false));var S=parseInt(V.outerWidth(false));var g=parseInt(V.outerHeight(false));T.difference=Math.abs(parseInt(T.difference));T.total=Math.abs(parseInt(T.total));var Q=z(T.difference);var o=z(T.difference);var aa=z(T.total);var s=y(r);switch(m){case"left":q.top=e=="top"?W-g-n+z(Q):W+l+n+Q;q.left=p+aa;break;case"center":var X=Math.abs(S-d)/2;q.top=e=="top"?W-g-n+z(Q)-t.marginHeight:W+l+n+Q+t.marginHeight;q.left=S>=d?p-X:p+X;break;case"right":var X=Math.abs(S-d);q.top=e=="top"?W-g-n+z(Q):W+l+n+Q;q.left=S>=d?p-X+z(aa):p+X+z(aa);break;case"top":q.top=W+aa;q.left=e=="left"?p-S-n+z(o):p+d+n+o;break;case"middle":var X=Math.abs(g-l)/2;q.top=g>=l?W-X:W+X;q.left=e=="left"?p-S-n+z(o)-t.marginHeight:p+d+n+o+t.marginHeight;break;case"bottom":var X=Math.abs(g-l);q.top=g>=l?W-X+z(aa):W+X+z(aa);q.left=e=="left"?p-S-n+z(o):p+d+n+o;break}q.position=e;if(b("#"+r.privateVars.id).length>0&&b("#"+r.privateVars.id).find("img."+r.baseClass+"-tail").length>0){b("#"+r.privateVars.id).find("img."+r.baseClass+"-tail").remove();var R="bottom";var Y="bottom-middle";switch(e){case"left":R="right";Y="middle-right";break;case"top":R="bottom";Y="bottom-middle";break;case"right":R="left";Y="middle-left";break;case"bottom":R="top";Y="top-middle";break}b("#"+r.privateVars.id).find("td."+r.baseClass+"-"+Y).empty();b("#"+r.privateVars.id).find("td."+r.baseClass+"-"+Y).html('<img src="'+s+"tail-"+R+"."+(r.dropShadow==true?(b.browser.msie?"gif":"png"):"gif")+'" alt="" class="'+r.baseClass+'-tail" />');u(r)}if(r.alwaysVisible==true){if(q.top<b(window).scrollTop()||q.top+g>b(window).scrollTop()+b(window).height()){if(b("#"+r.privateVars.id).length>0&&b("#"+r.privateVars.id).find("img."+r.baseClass+"-tail").length>0){b("#"+r.privateVars.id).find("img."+r.baseClass+"-tail").remove()}var Z="";if(q.top<b(window).scrollTop()){q.position="bottom";q.top=W+l+n+Q;if(b("#"+r.privateVars.id).length>0&&!r.tail.hidden){b("#"+r.privateVars.id).find("td."+r.baseClass+"-top-middle").empty();b("#"+r.privateVars.id).find("td."+r.baseClass+"-top-middle").html('<img src="'+s+"tail-top."+(r.dropShadow==true?(b.browser.msie?"gif":"png"):"gif")+'" alt="" class="'+r.baseClass+'-tail" />');Z="top-middle"}}else{if(q.top+g>b(window).scrollTop()+b(window).height()){q.position="top";q.top=W-g-n+z(Q);if(b("#"+r.privateVars.id).length>0&&!r.tail.hidden){b("#"+r.privateVars.id).find("td."+r.baseClass+"-bottom-middle").empty();b("#"+r.privateVars.id).find("td."+r.baseClass+"-bottom-middle").html('<img src="'+s+"tail-bottom."+(r.dropShadow==true?(b.browser.msie?"gif":"png"):"gif")+'" alt="" class="'+r.baseClass+'-tail" />');Z="bottom-middle"}}}if(q.left<0){q.left=0;if(Z.length>0){b("#"+r.privateVars.id).find("td."+r.baseClass+"-"+Z).css("text-align","center")}}else{if(q.left+S>b(window).width()){q.left=b(window).width()-S;if(Z.length>0){b("#"+r.privateVars.id).find("td."+r.baseClass+"-"+Z).css("text-align","center")}}}}else{if(q.left<0||q.left+S>b(window).width()){if(b("#"+r.privateVars.id).length>0&&b("#"+r.privateVars.id).find("img."+r.baseClass+"-tail").length>0){b("#"+r.privateVars.id).find("img."+r.baseClass+"-tail").remove()}var Z="";if(q.left<0){q.position="right";q.left=p+d+n+o;if(b("#"+r.privateVars.id).length>0&&!r.tail.hidden){b("#"+r.privateVars.id).find("td."+r.baseClass+"-middle-left").empty();b("#"+r.privateVars.id).find("td."+r.baseClass+"-middle-left").html('<img src="'+s+"tail-left."+(r.dropShadow==true?(b.browser.msie?"gif":"png"):"gif")+'" alt="" class="'+r.baseClass+'-tail" />');Z="middle-left"}}else{if(q.left+S>b(window).width()){q.position="left";q.left=p-S-n+z(o);if(b("#"+r.privateVars.id).length>0&&!r.tail.hidden){b("#"+r.privateVars.id).find("td."+r.baseClass+"-middle-right").empty();b("#"+r.privateVars.id).find("td."+r.baseClass+"-middle-right").html('<img src="'+s+"tail-right."+(r.dropShadow==true?(b.browser.msie?"gif":"png"):"gif")+'" alt="" class="'+r.baseClass+'-tail" />');Z="middle-right"}}}if(q.top<b(window).scrollTop()){q.top=b(window).scrollTop();if(Z.length>0){b("#"+r.privateVars.id).find("td."+r.baseClass+"-"+Z).css("vertical-align","middle")}}else{if(q.top+g>b(window).scrollTop()+b(window).height()){q.top=(b(window).scrollTop()+b(window).height())-g;if(Z.length>0){b("#"+r.privateVars.id).find("td."+r.baseClass+"-"+Z).css("vertical-align","middle")}}}}}}return q}function H(d,e){b(d).data(t.options_key,e)}function x(d){return b(d).data(t.options_key)}function C(e){var d=e!=null&&typeof e=="object"&&!b.isArray(e)&&!b.isEmptyObject(e)?true:false;return d}function D(d){b(window).resize(function(){b(t.me).each(function(f,e){b(e).trigger("positionbubblepopup")})});b(document).mousemove(function(e){b(t.me).each(function(g,f){b(f).trigger("managebubblepopup",[e.pageX,e.pageY])})});b(t.me).each(function(f,e){var g=E(d);g.privateVars.creation_datetime=F();g.privateVars.id=g.baseClass+"-"+g.privateVars.creation_datetime+"-"+f;H(e,g);b(e).bind("managebubblepopup",function(P,m,n){var p=x(this);if(C(p)&&C(p.privateVars)&&typeof m!="undefined"&&typeof n!="undefined"){if(p.manageMouseEvents){var W=b(this);var r=W.offset();var s=parseInt(r.top);var T=parseInt(r.left);var V=parseInt(W.outerWidth(false));var O=parseInt(W.outerHeight(false));var R=false;if(T<=m&&m<=V+T&&s<=n&&n<=O+s){R=true}else{R=false}if(R&&!p.privateVars.is_mouse_over){p.privateVars.is_mouse_over=true;H(this,p);if(p.mouseOver=="show"){if($(this).is(":hidden")){return}b(this).trigger("showbubblepopup")}else{if(p.selectable&&b("#"+p.privateVars.id).length>0){var Q=b("#"+p.privateVars.id);var o=Q.offset();var l=parseInt(o.top);var S=parseInt(o.left);var U=parseInt(Q.outerWidth(false));var q=parseInt(Q.outerHeight(false));if(S<=m&&m<=U+S&&l<=n&&n<=q+l){}else{b(this).trigger("hidebubblepopup")}}else{b(this).trigger("hidebubblepopup")}}}else{if(!R&&p.privateVars.is_mouse_over){p.privateVars.is_mouse_over=false;H(this,p);if(p.mouseOut=="show"){b(this).trigger("showbubblepopup")}else{if(p.selectable&&b("#"+p.privateVars.id).length>0){var Q=b("#"+p.privateVars.id);var o=Q.offset();var l=parseInt(o.top);var S=parseInt(o.left);var U=parseInt(Q.outerWidth(false));var q=parseInt(Q.outerHeight(false));if(S<=m&&m<=U+S&&l<=n&&n<=q+l){}else{b(this).trigger("hidebubblepopup")}}else{b(this).trigger("hidebubblepopup")}}}else{if(!R&&!p.privateVars.is_mouse_over){if(p.selectable&&b("#"+p.privateVars.id).length>0&&!p.privateVars.is_animating){var Q=b("#"+p.privateVars.id);var o=Q.offset();var l=parseInt(o.top);var S=parseInt(o.left);var U=parseInt(Q.outerWidth(false));var q=parseInt(Q.outerHeight(false));if(S<=m&&m<=U+S&&l<=n&&n<=q+l){}else{b(this).trigger("hidebubblepopup")}}}}}}}});b(e).bind("setbubblepopupinnerhtml",function(m,l,n){var o=x(this);if(C(o)&&C(o.privateVars)&&typeof l!="undefined"){o.privateVars.last_modified_datetime=F();if(typeof n=="boolean"&&n==true){o.innerHtml=l}H(this,o);if(b("#"+o.privateVars.id).length>0){b("#"+o.privateVars.id).find("td."+o.baseClass+"-innerHtml").html(l);if(o.privateVars.is_animation_complete){b(this).trigger("positionbubblepopup",[false])}else{b(this).trigger("positionbubblepopup",[true])}}}});b(e).bind("setbubblepopupoptions",function(m,n){var l=x(this);if(C(l)&&C(l.privateVars)){var o=l;l=E(n);l.privateVars.id=o.privateVars.id;l.privateVars.creation_datetime=o.privateVars.creation_datetime;l.privateVars.last_modified_datetime=F();l.privateVars.last_display_datetime=o.privateVars.last_display_datetime;l.privateVars.is_open=o.privateVars.is_open;l.privateVars.is_freezed=o.privateVars.is_freezed;l.privateVars.last_options={};H(this,l)}});b(e).bind("positionbubblepopup",function(m,q){var o=x(this);if(C(o)&&C(o.privateVars)&&b("#"+o.privateVars.id).length>0&&o.privateVars.is_open==true){var l=b("#"+o.privateVars.id);var n=I(l,b(this),o);var p=2;if(typeof q=="boolean"&&q==true){l.css({top:n.top,left:n.left})}else{switch(o.position){case"left":l.css({top:n.top,left:(n.position!=o.position?n.left-(Math.abs(o.themeMargins.difference)*p):n.left+(Math.abs(o.themeMargins.difference)*p))});break;case"top":l.css({top:(n.position!=o.position?n.top-(Math.abs(o.themeMargins.difference)*p):n.top+(Math.abs(o.themeMargins.difference)*p)),left:n.left});break;case"right":l.css({top:n.top,left:(n.position!=o.position?n.left+(Math.abs(o.themeMargins.difference)*p):n.left-(Math.abs(o.themeMargins.difference)*p))});break;case"bottom":l.css({top:(n.position!=o.position?n.top+(Math.abs(o.themeMargins.difference)*p):n.top-(Math.abs(o.themeMargins.difference)*p)),left:n.left});break}}}});b(e).bind("freezebubblepopup",function(){var l=x(this);if(C(l)&&C(l.privateVars)){l.privateVars.is_freezed=true;H(this,l)}});b(e).bind("unfreezebubblepopup",function(){var l=x(this);if(C(l)&&C(l.privateVars)){l.privateVars.is_freezed=false;H(this,l)}});b(e).bind("showbubblepopup",function(r,o,l,K){var s=x(this);if((typeof K=="boolean"&&K==true&&(C(s)&&C(s.privateVars)))||(typeof K=="undefined"&&(C(s)&&C(s.privateVars)&&!s.privateVars.is_freezed&&!s.privateVars.is_open))){if(typeof K=="boolean"&&K==true){b(this).trigger("unfreezebubblepopup")}s.privateVars.is_open=true;s.privateVars.is_freezed=false;s.privateVars.is_animating=false;s.privateVars.is_animation_complete=false;if(C(s.privateVars.last_options)){s=s.privateVars.last_options}else{s.privateVars.last_options={}}if(C(o)){var m=s;var L=F();s=E(o);s.privateVars.id=m.privateVars.id;s.privateVars.creation_datetime=m.privateVars.creation_datetime;s.privateVars.last_modified_datetime=L;s.privateVars.last_display_datetime=L;s.privateVars.is_open=true;s.privateVars.is_freezed=false;s.privateVars.is_animating=false;s.privateVars.is_animation_complete=false;s.privateVars.is_mouse_over=m.privateVars.is_mouse_over;s.privateVars.is_position_changed=m.privateVars.is_position_changed;s.privateVars.last_options={};if(typeof l=="boolean"&&l==false){m.privateVars.last_modified_datetime=L;m.privateVars.last_display_datetime=L;s.privateVars.last_options=m}}H(this,s);J(s);if(b("#"+s.privateVars.id).length>0){b("#"+s.privateVars.id).remove()}var q={};var n=v(s);q=b(n);q.appendTo("body");q=b("#"+s.privateVars.id);q.css({opacity:0,top:"0px",left:"0px",position:"absolute",display:"block"});if(s.dropShadow==true){if(b.browser.msie&&parseInt(b.browser.version)<9){b("#"+s.privateVars.id+" table").addClass(s.baseClass+"-ie")}}u(s);var M=I(q,b(this),s);q.css({top:M.top,left:M.left});if(M.position==s.position){s.privateVars.is_position_changed=false}else{s.privateVars.is_position_changed=true}H(this,s);var p=setTimeout(function(){s.privateVars.is_animating=true;H(e,s);q.stop();switch(s.position){case"left":q.animate({opacity:1,left:(s.privateVars.is_position_changed?"-=":"+=")+s.distance+"px"},s.openingSpeed,"swing",function(){s.privateVars.is_animating=false;s.privateVars.is_animation_complete=true;H(e,s);if(s.dropShadow==true){if(b.browser.msie&&parseInt(b.browser.version)>8){q.addClass(s.baseClass+"-ie")}}s.afterShown()});break;case"top":q.animate({opacity:1,top:(s.privateVars.is_position_changed?"-=":"+=")+s.distance+"px"},s.openingSpeed,"swing",function(){s.privateVars.is_animating=false;s.privateVars.is_animation_complete=true;H(e,s);if(s.dropShadow==true){if(b.browser.msie&&parseInt(b.browser.version)>8){q.addClass(s.baseClass+"-ie")}}s.afterShown()});break;case"right":q.animate({opacity:1,left:(s.privateVars.is_position_changed?"+=":"-=")+s.distance+"px"},s.openingSpeed,"swing",function(){s.privateVars.is_animating=false;s.privateVars.is_animation_complete=true;H(e,s);if(s.dropShadow==true){if(b.browser.msie&&parseInt(b.browser.version)>8){q.addClass(s.baseClass+"-ie")}}s.afterShown()});break;case"bottom":q.animate({opacity:1,top:(s.privateVars.is_position_changed?"+=":"-=")+s.distance+"px"},s.openingSpeed,"swing",function(){s.privateVars.is_animating=false;s.privateVars.is_animation_complete=true;H(e,s);if(s.dropShadow==true){if(b.browser.msie&&parseInt(b.browser.version)>8){q.addClass(s.baseClass+"-ie")}}s.afterShown()});break}},s.openingDelay)}});b(e).bind("hidebubblepopup",function(q,m){var l=x(this);if((typeof m=="boolean"&&m==true&&(C(l)&&C(l.privateVars)&&b("#"+l.privateVars.id).length>0))||(typeof m=="undefined"&&(C(l)&&C(l.privateVars)&&b("#"+l.privateVars.id).length>0&&!l.privateVars.is_freezed&&l.privateVars.is_open))){if(typeof m=="boolean"&&m==true){b(this).trigger("unfreezebubblepopup")}l.privateVars.is_animating=false;l.privateVars.is_animation_complete=false;H(this,l);var p=b("#"+l.privateVars.id);var o=typeof m=="undefined"?l.closingDelay:0;var n=setTimeout(function(){l.privateVars.is_animating=true;H(e,l);p.stop();if(l.dropShadow==true){if(b.browser.msie&&parseInt(b.browser.version)>8){p.removeClass(l.baseClass+"-ie")}}switch(l.position){case"left":p.animate({opacity:0,left:(l.privateVars.is_position_changed?"+=":"-=")+l.distance+"px"},l.closingSpeed,"swing",function(){l.privateVars.is_open=false;l.privateVars.is_animating=false;l.privateVars.is_animation_complete=true;H(e,l);p.css("display","none");l.afterHidden()});break;case"top":p.animate({opacity:0,top:(l.privateVars.is_position_changed?"+=":"-=")+l.distance+"px"},l.closingSpeed,"swing",function(){l.privateVars.is_open=false;l.privateVars.is_animating=false;l.privateVars.is_animation_complete=true;H(e,l);p.css("display","none");l.afterHidden()});break;case"right":p.animate({opacity:0,left:(l.privateVars.is_position_changed?"-=":"+=")+l.distance+"px"},l.closingSpeed,"swing",function(){l.privateVars.is_open=false;l.privateVars.is_animating=false;l.privateVars.is_animation_complete=true;H(e,l);p.css("display","none");l.afterHidden()});break;case"bottom":p.animate({opacity:0,top:(l.privateVars.is_position_changed?"-=":"+=")+l.distance+"px"},l.closingSpeed,"swing",function(){l.privateVars.is_open=false;l.privateVars.is_animating=false;l.privateVars.is_animation_complete=true;H(e,l);p.css("display","none");l.afterHidden()});break}},o);l.privateVars.last_display_datetime=F();l.privateVars.is_freezed=false;H(this,l);a(l)}})})}return this}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function($){function removeNode(node){node.each(function(){$(this).remove();if($.browser.msie){this.outerHTML=""}})}function setSize(target,param){var opts=$.data(target,"panel").options;var panel=$.data(target,"panel").panel;var pheader=panel.find(">div.panel-header");var pbody=panel.find(">div.panel-body");if(param){if(param.width){opts.width=param.width}if(param.height){opts.height=param.height}if(param.left!=null){opts.left=param.left}if(param.top!=null){opts.top=param.top}}if(opts.fit==true){var p=panel.parent();opts.width=p.width();opts.height=p.height()}panel.css({left:opts.left,top:opts.top});panel.css(opts.style);panel.addClass(opts.cls);pheader.addClass(opts.headerCls);pbody.addClass(opts.bodyCls);if(!isNaN(opts.width)){if($.boxModel==true){panel.width(opts.width-(panel.outerWidth(true)-panel.width()));pheader.width(panel.width()-(pheader.outerWidth(true)-pheader.width()));pbody.width(panel.width()-(pbody.outerWidth(true)-pbody.width()))}else{panel.width(opts.width);pheader.width(panel.width());pbody.width(panel.width())}}else{panel.width("auto");pbody.width("auto")}if(!isNaN(opts.height)){if($.boxModel==true){panel.height(opts.height-(panel.outerHeight(true)-panel.height()));pbody.height(panel.height()-pheader.outerHeight(true)-(pbody.outerHeight(true)-pbody.height()))}else{panel.height(opts.height);pbody.height(panel.height()-pheader.outerHeight(true))}}else{pbody.height("auto")}panel.css("height",null);opts.onResize.apply(target,[opts.width,opts.height]);panel.find(">div.panel-body>div").triggerHandler("_resize")}function movePanel(target,param){var opts=$.data(target,"panel").options;var panel=$.data(target,"panel").panel;if(param){if(param.left!=null){opts.left=param.left}if(param.top!=null){opts.top=param.top}}panel.css({left:opts.left,top:opts.top});opts.onMove.apply(target,[opts.left,opts.top])}function wrapPanel(target){var panel=$(target).addClass("panel-body").wrap('<div class="panel panelnomargin"></div>').parent();panel.bind("_resize",function(){var opts=$.data(target,"panel").options;if(opts.fit==true){setSize(target)}return false});return panel}function addHeader(target){var opts=$.data(target,"panel").options;var panel=$.data(target,"panel").panel;removeNode(panel.find(">div.panel-header"));if(opts.title&&!opts.noheader){var header=$('<div class="panel-header"><div class="panel-title">'+opts.title+"</div></div>").prependTo(panel);if(opts.iconCls){header.find(".panel-title").addClass("panel-with-icon");$('<div class="panel-icon"></div>').addClass(opts.iconCls).appendTo(header)}var tool=$('<div class="panel-tool"></div>').appendTo(header);if(opts.closable){$('<div class="panel-tool-close">x</div>').appendTo(tool).bind("click",onClose)}if(opts.maximizable){$('<div class="panel-tool-max"></div>').appendTo(tool).bind("click",onMax)}if(opts.minimizable){$('<div class="panel-tool-min"></div>').appendTo(tool).bind("click",onMin)}if(opts.collapsible){$('<div class="panel-tool-collapse" title="收缩"></div>').appendTo(tool).bind("click",onToggle)}if(opts.tools){for(var i=opts.tools.length-1;i>=0;i--){var t=$("<div></div>").addClass(opts.tools[i].iconCls).appendTo(tool);if(opts.tools[i].handler){t.bind("click",eval(opts.tools[i].handler))}}}tool.find("div").hover(function(){$(this).addClass("panel-tool-over")},function(){$(this).removeClass("panel-tool-over")});panel.find(">div.panel-body").removeClass("panel-body-noheader")}else{panel.find(">div.panel-body").addClass("panel-body-noheader")}function onToggle(){if($(this).hasClass("panel-tool-expand")){expandPanel(target,true)}else{collapsePanel(target,true)}return false}function onMin(){minimizePanel(target);return false}function onMax(){if($(this).hasClass("panel-tool-restore")){restorePanel(target)}else{maximizePanel(target)}return false}function onClose(){closePanel(target);return false}}function loadData(target){var state=$.data(target,"panel");if(state.options.href&&(!state.isLoaded||!state.options.cache)){state.isLoaded=false;var pbody=state.panel.find(">div.panel-body");pbody.html($('<div class="panel-loading"></div>').html(state.options.loadingMessage));pbody.load(state.options.href,null,function(){if(typeof require==="function"){require(["domReady"],function(domReady){domReady(function(){require(["taLayout"],function(){$(pbody).taLayout()})})})}else{$(pbody).taLayout()}state.options.onLoad.apply(target,arguments);state.isLoaded=true})}}function openPanel(target,forceOpen){var opts=$.data(target,"panel").options;var panel=$.data(target,"panel").panel;if(forceOpen!=true){if(opts.onBeforeOpen.call(target)==false){return}}panel.show();opts.closed=false;opts.onOpen.call(target);if(opts.maximized==true){maximizePanel(target)}if(opts.minimized==true){minimizePanel(target)}if(opts.collapsed==true){collapsePanel(target)}if(!opts.collapsed){loadData(target)}}function closePanel(target,forceClose){var opts=$.data(target,"panel").options;var panel=$.data(target,"panel").panel;if(forceClose!=true){if(opts.onBeforeClose.call(target)==false){return}}panel.hide();opts.closed=true;opts.onClose.call(target)}function destroyPanel(target,forceDestroy){var opts=$.data(target,"panel").options;var panel=$.data(target,"panel").panel;if(forceDestroy!=true){if(opts.onBeforeDestroy.call(target)==false){return}}removeNode(panel);opts.onDestroy.call(target)}function collapsePanel(target,animate){var opts=$.data(target,"panel").options;var panel=$.data(target,"panel").panel;var body=panel.find(">div.panel-body");var tool=panel.find(">div.panel-header .panel-tool-collapse");if(tool.hasClass("panel-tool-expand")){return}body.stop(true,true);if(opts.onBeforeCollapse.call(target)==false){return}$.data(target,"panel").original={width:opts.width,height:opts.height,fit:opts.fit};setSize(target,{width:opts.width,height:27});tool.addClass("panel-tool-expand");if(animate==true){body.slideUp("normal",function(){opts.collapsed=true;opts.onCollapse.call(target)})}else{body.hide();opts.collapsed=true;opts.onCollapse.call(target)}}function expandPanel(target,animate){var opts=$.data(target,"panel").options;var panel=$.data(target,"panel").panel;var body=panel.find(">div.panel-body");var tool=panel.find(">div.panel-header .panel-tool-collapse");if(!tool.hasClass("panel-tool-expand")){return}body.stop(true,true);if(opts.onBeforeExpand.call(target)==false){return}tool.removeClass("panel-tool-expand");var original=$.data(target,"panel").original;opts.width=original.width;opts.height=original.height;opts.fit=original.fit;if(animate==true){body.slideDown("normal",function(){opts.collapsed=false;opts.onExpand.call(target);loadData(target);setSize(target)})}else{body.show();opts.collapsed=false;opts.onExpand.call(target);loadData(target);setSize(target)}}function maximizePanel(target){var opts=$.data(target,"panel").options;var panel=$.data(target,"panel").panel;var tool=panel.find(">div.panel-header .panel-tool-max");if(tool.hasClass("panel-tool-restore")){return}tool.addClass("panel-tool-restore");$.data(target,"panel").original={width:opts.width,height:opts.height,left:opts.left,top:opts.top,fit:opts.fit};opts.left=0;opts.top=0;opts.fit=true;setSize(target);opts.minimized=false;opts.maximized=true;$(">div[fit=true],>form[fit=true]",panel.find(">div.panel-body")).triggerHandler("_resize");$(">div div.l-layout",panel.find(">div.panel-body")).each(function(){$(this).triggerHandler("_resize")});opts.onMaximize.call(target)}function minimizePanel(target){var opts=$.data(target,"panel").options;var panel=$.data(target,"panel").panel;panel.hide();opts.minimized=true;opts.maximized=false;$(">div[fit=true],>form[fit=true]",panel.find(">div.panel-body")).triggerHandler("_resize");$(">div div.l-layout",panel.find(">div.panel-body")).each(function(){$(this).triggerHandler("_resize")});opts.onMinimize.call(target)}function restorePanel(target){var opts=$.data(target,"panel").options;var panel=$.data(target,"panel").panel;var tool=panel.find(">div.panel-header .panel-tool-max");if(!tool.hasClass("panel-tool-restore")){return}panel.show();tool.removeClass("panel-tool-restore");var original=$.data(target,"panel").original;opts.width=original.width;opts.height=original.height;opts.left=original.left;opts.top=original.top;opts.fit=original.fit;setSize(target);opts.minimized=false;opts.maximized=false;$(">div[fit=true],>form[fit=true]",panel.find(">div.panel-body")).triggerHandler("_resize");$(">div div.l-layout",panel.find(">div.panel-body")).each(function(){$(this).triggerHandler("_resize")});opts.onRestore.call(target)}function setBorder(target){var opts=$.data(target,"panel").options;var panel=$.data(target,"panel").panel;if(opts.border==true){panel.find(">div.panel-header").removeClass("panel-header-noborder");panel.find(">div.panel-body").removeClass("panel-body-noborder")}else{panel.find(">div.panel-header").addClass("panel-header-noborder");panel.find(">div.panel-body").addClass("panel-body-noborder")}}function setTitle(target,title){$.data(target,"panel").options.title=title;$(target).panel("header").find("div.panel-title").html(title)}$(window).unbind(".panel").bind("resize.panel",function(){var layout=$("body.layout");if(layout.length){layout.layout("resize")}else{$("body>div.panel").triggerHandler("_resize")}});$.fn.ta3panel=function(options,param){if(typeof options=="string"){switch(options){case"options":return $.data(this[0],"panel").options;case"panel":return $.data(this[0],"panel").panel;case"header":return $.data(this[0],"panel").panel.find(">div.panel-header");case"body":return $.data(this[0],"panel").panel.find(">div.panel-body");case"setTitle":return this.each(function(){setTitle(this,param)});case"open":return this.each(function(){openPanel(this,param)});case"close":return this.each(function(){closePanel(this,param)});case"destroy":return this.each(function(){destroyPanel(this,param)});case"refresh":return this.each(function(){$.data(this,"panel").isLoaded=false;loadData(this)});case"resize":return this.each(function(){setSize(this,param)});case"move":return this.each(function(){movePanel(this,param)});case"maximize":return this.each(function(){maximizePanel(this)});case"minimize":return this.each(function(){minimizePanel(this)});case"restore":return this.each(function(){restorePanel(this)});case"collapse":return this.each(function(){collapsePanel(this,param)});case"expand":return this.each(function(){expandPanel(this,param)})}}options=options||{};return this.each(function(){var state=$.data(this,"panel");var opts;if(state){opts=$.extend(state.options,options)}else{var t=$(this);opts=$.extend({},$.fn.ta3panel.defaults,{width:(parseInt(t.width())||undefined),height:(parseInt(t.height())||undefined),left:(parseInt(t.css("left"))||undefined),top:(parseInt(t.css("top"))||undefined),title:t.attr("title"),iconCls:t.attr("icon"),cls:t.attr("cls"),headerCls:t.attr("headerCls"),bodyCls:t.attr("bodyCls"),href:t.attr("href"),cache:(t.attr("cache")?t.attr("cache")=="true":undefined),fit:(t.attr("fit")?t.attr("fit")=="true":undefined),border:(t.attr("border")?t.attr("border")=="true":undefined),noheader:(t.attr("noheader")?t.attr("noheader")=="true":undefined),collapsible:(t.attr("collapsible")?t.attr("collapsible")=="true":undefined),minimizable:(t.attr("minimizable")?t.attr("minimizable")=="true":undefined),maximizable:(t.attr("maximizable")?t.attr("maximizable")=="true":undefined),closable:(t.attr("closable")?t.attr("closable")=="true":undefined),collapsed:(t.attr("collapsed")?t.attr("collapsed")=="true":undefined),minimized:(t.attr("minimized")?t.attr("minimized")=="true":undefined),maximized:(t.attr("maximized")?t.attr("maximized")=="true":undefined),closed:(t.attr("closed")?t.attr("closed")=="true":undefined)},options);t.attr("title","");state=$.data(this,"panel",{options:opts,panel:wrapPanel(this),isLoaded:false})}if(opts.content){$(this).html(opts.content);if($.parser){$.parser.parse(this)}}addHeader(this);setBorder(this);if(opts.doSize==true){state.panel.css("display","block");setSize(this)}if(opts.closed==true){state.panel.hide()}else{openPanel(this)}})};$.fn.ta3panel.defaults={title:null,iconCls:null,width:"auto",height:"auto",left:null,top:null,cls:null,headerCls:null,bodyCls:null,style:{},href:null,cache:true,fit:false,border:true,doSize:true,noheader:false,content:null,collapsible:false,minimizable:false,maximizable:false,closable:false,collapsed:false,minimized:false,maximized:false,closed:false,tools:[],href:null,loadingMessage:"Loading...",onLoad:function(){},onBeforeOpen:function(){},onOpen:function(){},onBeforeClose:function(){},onClose:function(){},onBeforeDestroy:function(){},onDestroy:function(){},onResize:function(width,height){},onMove:function(left,top){},onMaximize:function(){},onRestore:function(){},onMinimize:function(){},onBeforeCollapse:function(){},onBeforeExpand:function(){},onCollapse:function(){},onExpand:function(){}};$.fn.panel=$.fn.ta3panel}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function($){$.extend(true,window,{Ta:{Query:toQuery}});function toQuery(id,options,args){var defaults={queryFormId:id,queryBtnId:null,resetBtnId:null,toggleBtnId:null,isAutoQuery:false,queryMethod:null,queryHotKey:null,resetHotKey:null,resetGridIds:null,resetCallback:null,targetGrid:null,url:null,otherParam:null,validator:null,autoValidate:false,successCallback:null,failureCallback:null};var $g_container;function init(){$g_container=$(id);options=$.extend({},defaults,options);var $queryForm=$("#"+options.queryFormId);var $basic_cols=$queryForm.attr("cols");var $basicfield=$queryForm.find("div.basicfield");if($basicfield.length==1){var $element=$basicfield.eq(0);var _basicfield_tool=$element.find("div.basicfield-tool");var _bt_columnWidth=$element.attr("toolButtonsColumnWidth");if(_bt_columnWidth){_basicfield_tool.attr("columnWidth",_bt_columnWidth)}if($element.attr("cols")==""){$element.attr("cols",$basic_cols)}else{$basic_cols=$element.attr("cols")}var _field_divs=$element.find("div.fielddiv");var _real_divs=[];_field_divs.each(function(){if($(this).parent().parent().hasClass("basicfield")){_real_divs.push($(this))}});var _field_length=_real_divs.length;var _effect_field_col=[];var _count=0;for(var i=0;i<_real_divs.length;i++){if(_real_divs[i].css("display")!="none"){_effect_field_col.push(_count)}_count++}if(_effect_field_col.length<$basic_cols-1){if(_field_length>=1){_basicfield_tool.parent().insertAfter(_real_divs[_field_length-1].parent())}}else{_basicfield_tool.parent().insertAfter(_real_divs[_effect_field_col[$basic_cols-2]].parent())}}else{alert("query组件有且仅有一个basicfield子组件!");return}var $addtionfield=$queryForm.find("div.addtionfield");if($addtionfield.length>0){$addtionfield.each(function(){if($(this).attr("cols")==""){$(this).attr("cols",$basic_cols)}})}var _query=$("#"+options.queryBtnId);var _reset=$("#"+options.resetBtnId);var _toggle=$("#"+options.toggleBtnId);if(options.queryHotKey&&hotKeyregister){hotKeyregister.add(options.queryHotKey,function(){_query.focus();_query.click();return false})}if(options.resetHotKey&&hotKeyregister){hotKeyregister.add(options.resetHotKey,function(){_reset.focus();_reset.click();return false})}_query.bind("click",function(){if(options.isAutoQuery){var _submitIds="";if(options.targetGrid!=null){_submitIds+=options.targetGrid+","}_submitIds+=options.queryFormId;Base.submit(_submitIds,options.url,options.otherParam,options.validator,options.autoValidate,options.successCallback,options.failureCallback)}else{if(typeof options.validator=="boolean"){if(options.validator==false){return}}if(typeof options.queryMethod=="function"){options.queryMethod()}}});_reset.bind("click",function(){Base.resetForm(options.queryFormId);$queryForm.find(".textinput").each(function(){var o=$(this);var selId=o.find("input").eq(0).attr("id");Base.setValue(selId,"")});if(options.resetGridIds!=null){var ids=options.resetGridIds.split(",");for(var id in ids){Base.clearGridData(ids[id])}}if(typeof options.resetCallback=="function"){options.resetCallback()}});var _addtion_field=$queryForm.find("div.addtionfield");if(_addtion_field.length==0){_toggle.hide()}else{_toggle.bind("click",function(){var _icon_span=$("#"+options.toggleBtnId+">span>span>span");if(_icon_span.hasClass("xui-icon-slidedown")){_icon_span.addClass("xui-icon-slideup").removeClass("xui-icon-slidedown");_addtion_field.show();$queryForm.nextAll("div.panel").each(function(){var _fit=eval($(this).attr("fit"));if(_fit&&_fit==true){$(this).tauipanel("resize")}});$queryForm.nextAll("div.grid").each(function(){var _o=$(this);var _grid_fit=eval(_o.attr("fit"));if(!_o.hasClass("fielddiv")&&!_o.hasClass("addtionfield")&&!_o.hasClass("basicfield")){if(_grid_fit&&_grid_fit==true){_o.tauifitheight()}}})}else{_icon_span.addClass("xui-icon-slidedown").removeClass("xui-icon-slideup");_addtion_field.hide();$queryForm.nextAll("div.panel").each(function(){var _fit=eval($(this).attr("fit"));if(_fit&&_fit==true){$(this).tauipanel("resize")}});$queryForm.nextAll("div.grid").each(function(){var _o=$(this);var _grid_fit=eval(_o.attr("fit"));if(!_o.hasClass("fielddiv")&&!_o.hasClass("addtionfield")&&!_o.hasClass("basicfield")){if(_grid_fit&&_grid_fit==true){_o.tauifitheight()}}})}})}}init()}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function($){$.extend(true,window,{taselectpanel:taselectpanel});function taselectpanel($spDiv,options){var self=this;options=$.extend({spanelId:"selectpanel",beforeSetVal:""},options||{});function init(){var $spDiv=$("#"+options.spanelId+"-spDiv");var $content=$("#"+options.spanelId+"-area");var $form=$("#"+options.spanelId+"-form");$spDiv.unbind(".selectpanel");$spDiv.bind("mouseover",function(){$spDiv.addClass("bottom-hide").parent().addClass("ta-sp-hover");$content.show()}).bind("mouseout",function(){$spDiv.removeClass("bottom-hide").parent().removeClass("ta-sp-hover");$content.hide()});$content.bind("mouseover",function(){$spDiv.addClass("bottom-hide");$content.show()}).bind("mouseout",function(){$spDiv.removeClass("bottom-hide");$content.hide()});var $prov=$content.find("#stock_province_item");var $city=$content.find("#stock_city_item");var $county=$content.find("#stock_county_item");var provs=[{id:"1",name:"北京"},{id:"2",name:"天津"},{id:"3",name:"河北"},{id:"4",name:"四川"},{id:"5",name:"云南"},{id:"6",name:"广东"}];var citys=[{id:"1",pid:"1",name:"北京市"},{id:"2",pid:"2",name:"天津市"},{id:"3",pid:"3",name:"石家庄市"},{id:"4",pid:"3",name:"唐山市"},{id:"5",pid:"4",name:"成都市"},{id:"6",pid:"4",name:"广安市"},{id:"7",pid:"5",name:"昆明市"},{id:"8",pid:"5",name:"玉溪市"},{id:"9",pid:"6",name:"广州市"},{id:"10",pid:"6",name:"深圳市"},{id:"11",pid:"6",name:"佛山市"}];var countys=[{id:"1",pid:"1",name:"海淀区"},{id:"2",pid:"1",name:"朝阳区"},{id:"3",pid:"2",name:"和平区"},{id:"4",pid:"3",name:"长安区"},{id:"5",pid:"4",name:"路南区"},{id:"6",pid:"5",name:"锦江区"},{id:"7",pid:"5",name:"金牛区"},{id:"8",pid:"6",name:"华蓥市"},{id:"9",pid:"6",name:"岳池县"},{id:"10",pid:"7",name:"昆明区"},{id:"11",pid:"8",name:"玉溪县"},{id:"12",pid:"9",name:"黄埔区"},{id:"13",pid:"10",name:"罗湖区"},{id:"1",pid:"1",name:"顺德区"}];loadAreas(null,provs,$prov);$prov.find("a").bind("click",function(){$content.unbind("mouseout");$content.find("#provinceName span").text($(this).text());$form.find("#provinceId").val($(this).attr("data-value"));loadAreas(this,citys,$city);$content.find(".tab li a").removeClass("ta-sp-hover");$content.find("#cityName").addClass("ta-sp-hover");$prov.hide();$city.show();$county.hide();$city.find("a").bind("click",function(){$content.find("#cityName span").text($(this).text());$form.find("#cityId").val($(this).attr("data-value"));loadAreas(this,countys,$county);$content.find(".tab li a").removeClass("ta-sp-hover");$content.find("#countyName").addClass("ta-sp-hover");$prov.hide();$city.hide();$county.show();$county.find("a").bind("click",function(){$content.find("#countyName span").text($(this).text());$form.find("#countyId").val($(this).attr("data-value"));var flag=true;var beforeSetVal=$spDiv.attr("beforeSetVal");if(beforeSetVal!=null&&beforeSetVal!=""){flag=eval(template+"()")}if(flag){var address=$content.find("#provinceName span").text()+""+$content.find("#cityName span").text()+""+$content.find("#countyName span").text();$spDiv.find("div").attr("title",address).text(address);$content.hide()}})})});$content.find(".tab").find("a").bind("click",function(){$content.unbind("mouseout");if(!$(this).hasClass("ta-sp-hover")){$content.find(".tab li a").removeClass("ta-sp-hover");$(this).addClass("ta-sp-hover");var _id=$(this).attr("_id");switch(_id){case"1":$prov.show();$city.hide();$county.hide();break;case"2":$prov.hide();$city.show();$county.hide();break;case"3":$prov.hide();$city.hide();$county.show();break;default:break}}});function loadAreas(obj,data,$level){var provList=new Array;for(var i=0;i<data.length;i++){var str="";if(obj==null){str="<li><a data-value='"+data[i].id+"'>"+data[i].name+"</a></li>"}else{var oid=$(obj).attr("data-value");if(data[i].pid==oid){str="<li><a data-value='"+data[i].id+"'>"+data[i].name+"</a></li>"}}provList.push(str)}$level.find("ul").html(provList.join(" "))}return self}init();$.extend(this,{cmptype:"taselectpanel"})}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(f){function a(m,n,l){if(l==true){f(">div >div.panel-title",f(m)).html(n)}else{f(">div >div.panel-title",f(m)).text(n)}}function e(m){var n=f(m);var l=f(">div.panel-header .panel-tool-collapse",n);if(!l){return}n.find(">div.panel-toolbar,>div.panel-body,>div.panel-button").slideUp(200);l.toggleClass("panel-tool-expand")}function d(m){var n=f(m);var l=f(">div.panel-header .panel-tool-collapse",n);if(l.hasClass("panel-tool-expand")){return}n.find(">div.panel-toolbar,>div.panel-body,>div.panel-button").slideDown(200);l.toggleClass("panel-tool-expand")}function g(A){var n=f(A);var r=f(">div.panel-body",n);if(r.length==0){r=n}else{r=f(r[0])}var z=f(">div.panel-header",n).outerHeight(true);var u=z?z:0;var p=f(">div.panel-button",n).outerHeight(true);var v=p?p-2:0;var q=f(">div.panel-toolbar",n).outerHeight(true);var C=q?q:0;var w=0;var B=n.parent();w=B.height();if(B[0].tagName.toLowerCase()=="body"){w=f(window).height();w-=parseInt(f("body").css("paddingBottom"));w-=parseInt(f("body").css("marginBottom"));w-=n.offset().top;var l=n.css("marginBottom");w-=(l=="auto"?0:parseInt(l))}else{if(B.hasClass("window-body")){var y=parseInt(n.offsetParent().css("top"));w-=n.offset().top-y-24;var t=n.css("marginTop");w+=(t=="auto"?0:parseInt(t))}else{if(B.css("position")=="absolute"){w-=n.position().top-parseInt(B.css("paddingTop"));if(B.parent()[0].tagName.toLowerCase()=="body"){w-=B.position().top-parseInt(f("body").css("paddingTop"))}}else{var x=n.prevAll(":visible").not("#pageloading");if(x.length>0){x.each(function(){w-=f(this).outerHeight(true)})}var t=n.css("marginTop");w-=(t=="auto"?0:parseInt(t));var l=n.css("marginBottom");w-=(l=="auto"?0:parseInt(l));if(n.parents(".l-layout-content").size()==0){var m=B.css("paddingBottom");w-=(m=="auto"?0:parseInt(m))}}}}w-=parseInt(r.css("paddingTop"));w-=parseInt(r.css("paddingBottom"));var s=f.data(A,"panel");w-=s.heightDiff;w-=2;var o=Number(f(A).attr("minHeight"));if(w-u-v-C<o){r.height(o-u-v-C)}else{r.height(w-u-v-C)}f(">div[fit=true] ,>form[fit=true]",r).triggerHandler("_resize");if(r.hasClass("l-layout")){r.triggerHandler("_resize")}}function b(l,m){}f.fn.tauipanel=function(m,n,l){if(typeof m=="string"){switch(m){case"setTitle":return this.each(function(){a(this,n,l)});case"collapse":return this.each(function(){e(this,n)});case"expand":return this.each(function(){d(this,n)});case"destroy":return this.each(function(){destroyPanel(this,n)});case"resize":return this.each(function(){g(this)});case"mask":return this.each(function(){b(this,n)})}}m=m||{};return this.each(function(){var A;var z=f(this);A=f.extend({},f.fn.tauipanel.defaults,{href:z.attr("href"),onLoad:(z.attr("onLoad")?z.attr("onLoad"):undefined),fit:(z.attr("fit")=="true"?true:false),heightDiff:(z.attr("heightDiff")||0),minHeight:(z.attr("minHeight"))},m);f.data(this,"panel",A);if(A.fit){g(this);var p=f(this);p.bind("_resize",function(){g(z[0])});if(this.parentNode.tagName.toLowerCase()=="body"){f(window).unbind(".tauipanel").bind("resize.tauipanel",function(){p.triggerHandler("_resize")})}}f("> div.panel-header > div.panel-tool > div.panel-tool-collapse",z).mouseover(function(){f(this).addClass("panel-tool-over")}).mouseout(function(){f(this).removeClass("panel-tool-over")}).click(function(){var t=f(this).hasClass("panel-tool-expand");if(!t){t=false;var M=f(this.parentNode.parentNode.parentNode);M.find(">div.panel-toolbar,>div.panel-body,>div.panel-button").slideUp(100);setTimeout(function(){M.siblings("div[fit=true],form[fit=true]").triggerHandler("_resize")},100)}else{t=true;var M=f(this.parentNode.parentNode.parentNode);M.find(">div.panel-toolbar,>div.panel-body,>div.panel-button").slideDown(100);setTimeout(function(){M.siblings("div[fit=true],form[fit=true]").triggerHandler("_resize")},100)}f(this).toggleClass("panel-tool-expand")});var x=0;var r=0;var K=0;var E=0;var D=0;var v=0;var J=0;var u=0;var q=0;var s=0;var I=0;var C=0;var L=0;var H=0;var w=0;var y=false;var o=false;var F=false;var B=null;var G=f("body").find("div.l-layout-left,div.l-layout-right,div.l-layout-center,div.l-layout-top,div.l-layout-bottom");f("> div.panel-header > div.panel-tool > div.panel-tool-max",z).mouseover(function(){f(this).addClass("panel-tool-over")}).mouseout(function(){f(this).removeClass("panel-tool-over")}).click(function(){var t=f(this).hasClass("panel-tool-restore");if(!t){var M=f(this.parentNode.parentNode.parentNode);var N=M.find(">div.panel-body");if(x==0&&r==0){var R=M.find(">div.panel-toolbar");var S=M.find(">div.panel-button");x=M.width();r=M.height();E=M.css("top");D=M.css("left");K=M.css("z-index");v=M.css("margin-top");J=M.css("margin-bottom");u=M.css("margin-left");q=M.css("margin-right");s=N.height();L=parseInt(N.css("border-left-width").replace("px",""))+parseInt(N.css("border-right-width").replace("px",""));if((M.width()+parseInt(u.replace("px",""))+parseInt(q.replace("px","")))==M.parent().width()){o=true}if(M.attr("fit")=="true"){F=true}if(R.length>0){H=31}if(S.length>0){w=40}}I=f(window).width()-2;C=f(window).height()-2;B=f("body").find("div.l-layout-drophandle-left,div.l-layout-drophandle-right,div.l-layout-drophandle-top,div.l-layout-drophandle-bottom,div.l-layout-collapse-left,div.l-layout-collapse-right").not(":hidden");if(G.length>0||B.length>0){B.hide();G.css({position:"static"});y=true}if(H>0||w>0){M.removeClass("panelnomargin")}var Q=(K=="auto")?0:K;M.css({position:"fixed",zIndex:9002>Q?9002:Q,background:"#fcfdfd"});M.animate({width:I,height:C,top:y==true?-2:(F==true?-1:-2),left:1,marginTop:3,marginBottom:3,marginLeft:0,marginRight:0},{duration:100,complete:function(){var T=C-25-H-w;N.css({height:T,width:I-L});N.find("div[fit=true],form[fit=true],div.grid,div.panel").triggerHandler("_resize")}})}else{var M=f(this.parentNode.parentNode.parentNode);var N=M.find(">div.panel-body");var P=(E=="auto")?0:E;var O=(D=="auto")?0:D;M.css({zIndex:K});M.animate({width:x,height:r,top:P,left:O,marginTop:v,marginBottom:J,marginLeft:u,marginRight:q},{duration:100,complete:function(){if(G||B){G.css({position:"absolute"});B.show()}if(H>0||w>0){M.addClass("panelnomargin")}M.css({position:"relative",background:"none",top:E,left:D,width:o==true?"auto":x,height:F==true?"auto":r});N.css({height:s,width:o==true?"auto":x-L});N.find("div[fit=true],form[fit=true],div.grid,div.panel").triggerHandler("_resize")}})}f(this).toggleClass("panel-tool-restore")})})};f.fn.tauipanel.defaults={href:null,onLoad:function(){},fit:false,heightDiff:0}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function($){function getTabLeftPosition(container,tab){var w=0;var b=true;$(">div.tabs-header ul.tabs li",container).each(function(){if(this==tab){b=false}if(b==true){w+=$(this).outerWidth(true)}});return w}function getMaxScrollWidth(container){var header=$(">div.tabs-header",container);var tabsWidth=0;$("ul.tabs li",header).each(function(){tabsWidth+=$(this).outerWidth(true)});var wrapWidth=$(".tabs-wrap",header).width();var padding=parseInt($(".tabs",header).css("padding-left"));return tabsWidth-wrapWidth+padding+40}function setScrollers(container){var header=$(">div.tabs-header",container);var tabsWidth=0;$("ul.tabs li",header).each(function(){tabsWidth+=$(this).outerWidth(true)});if(tabsWidth>header.width()){$(".tabs-scroller-left",header).css("display","block");$(".tabs-scroller-right",header).css("display","block");$(".tabs-wrap",header).addClass("tabs-scrolling")}}function setSize(container){var opts=$.data(container,"tabs").options;var cc=$(container);var header=$(">div.tabs-header",container);setScrollers(container);var panels=$(">div.tabs-panels",container);if(opts.fit){var panelparent=cc.parent();var h=panelparent.height();if(h>$(window).height()){h=$(window).height()}if(panelparent[0].tagName.toLowerCase()=="body"){h=$(window).height();h-=parseInt($("body").css("paddingBottom"));h-=parseInt($("body").css("marginBottom"));h-=cc.offset().top}else{if(panelparent.hasClass("window-body")){var windowTop=parseInt(cc.offsetParent().css("top"));h-=cc.offset().top-windowTop-28}else{if(panelparent.css("position")=="relative"||panelparent.css("position")=="absolute"){h-=cc.position().top-parseInt(panelparent.css("paddingBottom"));if(panelparent.parent()[0].tagName.toLowerCase()=="body"){h-=parseInt($("body").css("paddingTop"))}}else{var pall=cc.prevAll(":visible").not("#pageloading");if(pall.length>0){pall.each(function(){h-=$(this).outerHeight(true)})}var mt=panelparent.css("marginTop");if(mt=="auto"){mt=0}else{mt=parseInt(mt)}h-=mt;h-=parseInt(panelparent.css("paddingBottom"));h-=parseInt(panelparent.css("paddingTop"));var mb=panelparent.css("marginBottom");if(mb=="auto"){mb=0}else{mb=parseInt(mb)}h-=mb}}}var cmb=cc.css("marginBottom");if(cmb=="auto"){cmb=0}else{cmb=parseInt(cmb)}h-=cmb;h-=header.outerHeight(true);h-=opts.heightDiff;panels.height(h-1);$(">div",panels).each(function(){var $this=$(this);$(this).height(h-parseInt($this.css("paddingTop"))-parseInt($this.css("paddingBottom")))})}else{var height=(opts.height-1);if(!isNaN(height)){if($.boxModel==true){var delta=panels.outerHeight(true)-panels.height();height=(height-header.outerHeight(true)-delta)||"auto"}else{height=height-header.outerHeight(true)}panels.css("height",height);$(">div",panels).each(function(){var $this=$(this);$(this).height(height-parseInt($this.css("paddingTop"))-parseInt($this.css("paddingBottom")))})}else{panels.height(height)}}var panelfit=$(">div:visible  div[fit=true]:first, >div:visible form[fit=true]:first",panels);panelfit.triggerHandler("_resize")}function fitContent(container){return}function wrapTabs(container){$(container).addClass("tabs-container");$(container).wrapInner('<div class="tabs-panels"/>');$('<div class="tabs-header"><div class="tabs-scroller-left"></div><div class="tabs-scroller-right"></div><div class="tabs-wrap"><ul class="tabs"></ul></div></div>').prependTo(container);var header=$(">div.tabs-header",container);$(">div.tabs-panels>div",container).each(function(){if(!$(this).attr("id")){$(this).attr("id","gen-tabs-panel"+$.fn.tauitabs.defaults.idSeed++)}var options={id:$(this).attr("id"),title:$(this).attr("title"),content:null,href:$(this).attr("href"),closable:$(this).attr("closable")=="true",icon:$(this).attr("icon"),selected:$(this).attr("selected")!==undefined,cache:$(this).attr("cache")=="false"?false:true,enable:$(this).attr("enable")=="false"?false:true};$(this).attr("title","");createTab(container,options)});$(".tabs-scroller-left, .tabs-scroller-right",header).hover(function(){$(this).addClass("tabs-scroller-over")},function(){$(this).removeClass("tabs-scroller-over")}).mousedown(function(){$(this).addClass("tabs-scroller-mousedown")}).mouseup(function(){$(this).removeClass("tabs-scroller-mousedown")});$(container).bind("_resize",function(){var opts=$.data(container,"tabs").options;if(opts.fit==true){setSize(container);fitContent(container)}return false})}function setProperties(container){var opts=$.data(container,"tabs").options;var header=$(">div.tabs-header",container);var panels=$(">div.tabs-panels",container);var tabs=$("ul.tabs",header);if(opts.plain==true){header.addClass("tabs-header-plain")}else{header.removeClass("tabs-header-plain")}if(opts.border==true){header.removeClass("tabs-header-noborder");panels.removeClass("tabs-panels-noborder")}else{header.addClass("tabs-header-noborder");panels.addClass("tabs-panels-noborder")}$("li",tabs).unbind(".tabs").bind("click.tabs",function(){var tabAttr=$.data(this,"tabs.tab");if(!tabAttr.enable){return}$(".tabs-selected",tabs).removeClass("tabs-selected");$(this).addClass("tabs-selected");$(this).blur();$(">div.tabs-panels>div",container).css("display","none");var wrap=$(".tabs-wrap",header);var leftPos=getTabLeftPosition(container,this);var left=leftPos-wrap.scrollLeft();var right=left+$(this).outerWidth();if(left<0||right>wrap.innerWidth()){var pos=Math.min(leftPos-(wrap.width()-$(this).width())/2,getMaxScrollWidth(container));wrap.animate({scrollLeft:(pos)},opts.scrollDuration)}var panel=$("#"+tabAttr.id);var panelSiblings=panel.siblings("div");for(var j=0;j<panelSiblings.length;j++){var panelSibling=panelSiblings.eq(j);var buttons=panelSibling.find(":button");for(var x=0;x<buttons.length;x++){var button=buttons.eq(x);if(button.attr("hotKey")&&hotKeyregister){hotKeyregister.remove(buttons.eq(x).attr("hotKey"))}}}panel.css("display","block");$(":button",panel).each(function(){var _this=this;var _$this=$(this);if(!_$this.is(":hidden")&&!this.disabled){var _this=this;var hotKey=$(this).attr("hotKey");if(hotKey&&hotKeyregister){hotKeyregister.add(hotKey,function(){_this.focus();_this.click();return false})}}});$("div[fit=true]:first ,form[fit=true]:first",panel).triggerHandler("_resize");if(tabAttr.href&&(!tabAttr.loaded||!tabAttr.cache)){panel.load(tabAttr.href,null,function(){opts.onLoad.apply(this,arguments);tabAttr.loaded=true})}fitContent(container);opts.onSelect.call(panel,tabAttr.id)});$("a.tabs-close",tabs).unbind(".tabs").bind("click.tabs",function(){var elem=$(this).parent()[0];var tabAttr=$.data(elem,"tabs.tab");if(!tabAttr.enable){return}closeTab(container,tabAttr.title,elem)});$(".tabs-scroller-left",header).unbind(".tabs").bind("click.tabs",function(){var wrap=$(".tabs-wrap",header);var pos=wrap.scrollLeft()-opts.scrollIncrement;wrap.animate({scrollLeft:pos},opts.scrollDuration)});$(".tabs-scroller-right",header).unbind(".tabs").bind("click.tabs",function(){var wrap=$(".tabs-wrap",header);var pos=Math.min(wrap.scrollLeft()+opts.scrollIncrement,getMaxScrollWidth(container));wrap.animate({scrollLeft:pos},opts.scrollDuration)})}function createTab(container,options){var header=$(">div.tabs-header",container);var tabs=$("ul.tabs",header);var tab=$("<li></li>");var tab_span=$("<span></span>").html(options.title);var tab_a=$('<a class="tabs-inner '+(options.enable?"":"disabled")+'"></a>').attr("href","javascript:void(0)").append(tab_span);if(Base.globvar.indexStyle=="default"){tab_a.addClass("tabs-inner_163");tab.addClass("tabs_163")}tab.append(tab_a).appendTo(tabs);if(options.closable){tab_span.addClass("tabs-closable");tab_a.after('<a href="javascript:void(0)" class="tabs-close '+(options.enable?"":"disabled")+'"></a>')}if(options.icon){tab_span.addClass("tabs-with-icon");tab_span.after($("<span/>").addClass("tabs-icon").addClass(options.icon))}if(options.selected){tab.addClass("tabs-selected")}if(options.content){$("#"+options.id).html(options.content)}$("#"+options.id).removeAttr("title");$.data(tab[0],"tabs.tab",{id:options.id,title:options.title,href:options.href,loaded:false,cache:options.cache,enable:options.enable})}function addTab(container,options){options=$.extend({id:null,title:"",content:"",href:null,cache:true,icon:null,closable:false,selected:true,height:"auto",width:"auto",enable:true},options||{});if(options.selected){$(".tabs-header .tabs-wrap .tabs li",container).removeClass("tabs-selected")}options.id=options.id||"gen-tabs-panel"+$.fn.tauitabs.defaults.idSeed++;$("<div></div>").attr("id",options.id).attr("title",options.title).css("overflow","auto").height(options.height).width(options.width).appendTo($(">div.tabs-panels",container));createTab(container,options)}function closeTab(container,title,o){var opts=$.data(container,"tabs").options;var elem;if(typeof title=="string"){if(o){elem=o}else{elem=$('>div.tabs-header li:has(a span:contains("'+title+'"))',container)[0]}}else{if(typeof title=="object"){$(">div.tabs-header li",container).each(function(){var tabAttr=$.data(this,"tabs.tab");if(tabAttr.id==title.id){elem=this;return false}})}}if(!elem){return}var tabAttr=$.data(elem,"tabs.tab");var panel=$("#"+tabAttr.id);if(opts.onClose.call(panel,tabAttr.id)==false){return}var selected=$(elem).hasClass("tabs-selected");$.removeData(elem,"tabs.tab");var frame=$("iframe",panel);if(frame.length>0){frame[0].contentWindow.document.$=null;frame[0].contentWindow.document.jQuery=null;frame[0].contentWindow.Ta=null;frame[0].contentWindow.document.write("");frame[0].contentWindow.close();frame[0]=null;frame.remove()}$(elem).remove();panel.remove();setSize(container);if(selected){selectTab(container)}else{var wrap=$(">div.tabs-header .tabs-wrap",container);var pos=Math.min(wrap.scrollLeft(),getMaxScrollWidth(container));wrap.animate({scrollLeft:pos},opts.scrollDuration)}if($.browser.msie){CollectGarbage()}}function hideTab(container,id){var opts=$.data(container,"tabs").options;var elem;$(">div.tabs-header li",container).each(function(){var tabAttr=$.data(this,"tabs.tab");if(tabAttr.id==id){elem=this;return false}});if(!elem){return}if($(elem).hidden){return}var tabAttr=$.data(elem,"tabs.tab");var panel=$("#"+tabAttr.id);var selected=$(elem).hasClass("tabs-selected");$(elem).hide();setSize(container);if(selected){panel.hide();selectTab(container)}else{panel.hide()}}function showTab(container,id){var opts=$.data(container,"tabs").options;var elem;$(">div.tabs-header li",container).each(function(){var tabAttr=$.data(this,"tabs.tab");if(tabAttr.id==id){elem=this;return false}});if(!elem){return}if(!$(elem).is(":hidden")){return}var tabAttr=$.data(elem,"tabs.tab");var panel=$("#"+tabAttr.id);$(elem).show();setSize(container);var wrap=$(">div.tabs-header .tabs-wrap",container);var pos=Math.min(wrap.scrollLeft(),getMaxScrollWidth(container));wrap.animate({scrollLeft:pos},opts.scrollDuration)}function selectTab(container,title){if(title){if(typeof(title)=="string"){var elem=$('>div.tabs-header li:has(a span:contains("'+title+'"))',container)[0];if(elem){$(elem).trigger("click")}}else{$(">div.tabs-header li",container).each(function(){var tabAttr=$.data(this,"tabs.tab");if(tabAttr.id==title.id){$(this).trigger("click");return false}})}}else{var tabs=$(">div.tabs-header ul.tabs",container);if($(".tabs-selected",tabs).length==0){$("li a",tabs).not(".disabled").not(":hidden").eq(0).parent().trigger("click")}else{var t=$(".tabs-selected",tabs);if(!t.is(":hidden")){t.trigger("click")}else{$("li a",tabs).not(".disabled").not(":hidden").eq(0).parent().trigger("click")}}}}function exists(container,title){if(title&&typeof(title)!="string"){var exist=false;$(">div.tabs-header li",container).each(function(){var tabAttr=$.data(this,"tabs.tab");if(tabAttr.id==title.id){exist=true;return false}});return exist}return $('>div.tabs-header li:has(a span:contains("'+title+'"))',container).length>0}function setTitle(container,tabid,title){if(tabid){$(">div.tabs-header li",container).each(function(){var tabAttr=$.data(this,"tabs.tab");if(tabAttr.id==tabid){$(">a span",$(this)).html(title);return false}})}}function enableTab(container,tabid,enable){if(tabid){$(">div.tabs-header li",container).each(function(){var tabAttr=$.data(this,"tabs.tab");if(tabAttr.id==tabid){tabAttr.enable=enable;$.data(this,"tabs.tab",tabAttr);var $a=$(">a",$(this));if(enable){if($a.hasClass("disabled")){$a.removeClass("disabled")}}else{if(!$a.hasClass("disabled")){$a.addClass("disabled")}}return false}})}}$.fn.tauitabs=function(options,param){if(typeof options=="string"){switch(options){case"resize":return this.each(function(){setSize(this)});case"add":return this.each(function(){addTab(this,param);$(this).tauitabs()});case"close":return this.each(function(){closeTab(this,param)});case"select":return this.each(function(){selectTab(this,param)});case"exists":return exists(this[0],param);case"setTitle":return setTitle(this[0],param.tabid,param.title);case"enableTab":return enableTab(this[0],param.tabid,param.enable);case"hideTab":return hideTab(this[0],param);case"showTab":return showTab(this[0],param)}}options=options||{};return this.each(function(){var state=$.data(this,"tabs");var opts;if(state){opts=$.extend(state.options,options);state.options=opts}else{var t=$(this);opts=$.extend({},$.fn.tauitabs.defaults,{width:(parseInt(t.css("width"))||undefined),height:(parseInt(t.css("height"))||undefined),heightDiff:(t.attr("heightDiff")||0),fit:(t.attr("fit")?t.attr("fit")=="true":undefined),border:(t.attr("border")?t.attr("border")=="true":undefined),plain:(t.attr("plain")?t.attr("plain")=="true":undefined),onSelect:(t.attr("onSelect")&&eval(t.attr("onSelect")))||function(){},onClose:(t.attr("onClose")&&eval(t.attr("onClose")))||function(){},onLoad:t.attr("onLoad")&&eval(t.attr("onLoad"))||function(){}},options);wrapTabs(this);$.data(this,"tabs",{options:opts})}setProperties(this);setSize(this);var _this=this;if(opts.fit&&this.parentNode.tagName.toLowerCase()=="body"){$(window).unbind(".tauitabs").bind("resize.tauitabs",function(){$(_this).triggerHandler("_resize")})}selectTab(this)})};$.fn.tauitabs.defaults={width:"auto",height:"auto",heightDiff:0,idSeed:0,plain:false,fit:false,border:true,scrollIncrement:200,scrollDuration:300,onLoad:function(){},onSelect:function(title){},onClose:function(title){}}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(d){function b(l){var f=d(l);f.wrapInner('<div class="dialog-content"></div>');var g=f.find(">div.dialog-content");g.css("padding",f.css("padding"));f.css("padding",0);g.ta3panel({border:false});return g}function e(s){var f=d.data(s,"dialog").options;var x=d.data(s,"dialog").contentPanel;d(s).find("div.dialog-toolbar").remove();d(s).find("div.dialog-button").remove();if(f.toolbar){var v=d('<div class="dialog-toolbar"></div>').prependTo(s);for(var n=0;n<f.toolbar.length;n++){var l=f.toolbar[n];if(l=="-"){v.append('<div class="dialog-tool-separator"></div>')}else{var r=d('<a href="javascript:void(0)"></a>').appendTo(v);r.css("float","left").text(l.text);if(l.iconCls){r.attr("icon",l.iconCls)}if(l.handler){r[0].onclick=l.handler}r.linkbutton({plain:true,disabled:(l.disabled||false)})}}v.append('<div style="clear:both"></div>')}if(f.buttons){var m="";if(f.buttonsAlgin){m=' style="text-align:'+f.buttonsAlgin+'"'}var t=d('<div class="dialog-button" '+m+"></div>").appendTo(s);for(var n=0;n<f.buttons.length;n++){var l=f.buttons[n];var u="",w="",g="";if(l.iconCls){u="<span  class='"+l.iconCls+"'>"}if(l.text){w=l.text}if(l.id){g=" id='"+g+"'"}var q="";if(l.buttonHighHlight){q="<button"+g+' type="button" class="sexybutton_163" style="margin-right:4px;"><span class="button_span isok">'+w+"</span></button>"}else{q="<button"+g+' type="button" class="sexybutton_163" style="margin-right:4px;"><span class="button_span">'+w+"</span></button>"}var o=d(q).appendTo(t);o.focus(function(){d("span.button_span",this).addClass("button_focus")}).blur(function(){d("span.button_span",this).removeClass("button_focus")});if(l.hotKey&&hotKeyregister){hotKeyregister.add(l.hotKey,function(){o.focus();o.click();return false})}if(l.handler){o[0].onclick=l.handler}}}if(f.href){x.ta3panel({href:f.href,onLoad:f.onLoad});f.href=null}d(s).window(d.extend({},f,{onResize:function(y,p){var z=d(s).ta3panel("panel").find(">div.panel-body");x.ta3panel("resize",{width:z.width(),height:(p=="auto")?"auto":z.height()-z.find(">div.dialog-toolbar").outerHeight(true)-z.find(">div.dialog-button").outerHeight(true)});if(f.onResize){f.onResize.call(s,y,p)}}}))}function a(g){var f=d.data(g,"dialog").contentPanel;f.ta3panel("refresh")}d.fn.dialog=function(f,g){if(typeof f=="string"){switch(f){case"options":return d(this[0]).window("options");case"dialog":return d(this[0]).window("window");case"setTitle":return this.each(function(){d(this).window("setTitle",g)});case"open":return this.each(function(){d(this).window("open",g)});case"close":return this.each(function(){d(this).window("close",g)});case"destroy":return this.each(function(){d(this).window("destroy",g)});case"refresh":return this.each(function(){a(this)});case"resize":return this.each(function(){d(this).window("resize",g)});case"move":return this.each(function(){d(this).window("move",g)});case"maximize":return this.each(function(){d(this).window("maximize")});case"minimize":return this.each(function(){d(this).window("minimize")});case"restore":return this.each(function(){d(this).window("restore")});case"collapse":return this.each(function(){d(this).window("collapse",g)});case"expand":return this.each(function(){d(this).window("expand",g)})}}f=f||{};return this.each(function(){var n=d.data(this,"dialog");if(n){d.extend(n.options,f)}else{var l=d(this);var m=d.extend({},d.fn.dialog.defaults,{title:(l.attr("title")?l.attr("title"):undefined),href:l.attr("href"),collapsible:(l.attr("collapsible")?l.attr("collapsible")=="true":undefined),minimizable:(l.attr("minimizable")?l.attr("minimizable")=="true":undefined),maximizable:(l.attr("maximizable")?l.attr("maximizable")=="true":undefined),resizable:(l.attr("resizable")?l.attr("resizable")=="true":undefined)},f);d.data(this,"dialog",{options:m,contentPanel:b(this)})}e(this)})};d.fn.dialog.defaults={title:"New Dialog",href:null,collapsible:false,minimizable:false,maximizable:false,resizable:false,toolbar:null,buttons:null,buttonsAlgin:null}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery","dialog","panel","draggable"],a)}else{a(jQuery)}}(function(b){function f(g,l){b(g).ta3panel("resize")}function e(p,s){var l=b.data(p,"window");var g;if(l){g=b.extend(l.opts,s)}else{var r=b(p);g=b.extend({},b.fn.window.defaults,{title:r.attr("title"),collapsible:(r.attr("collapsible")?r.attr("collapsible")=="true":undefined),minimizable:(r.attr("minimizable")?r.attr("minimizable")=="true":undefined),maximizable:(r.attr("maximizable")?r.attr("maximizable")=="true":undefined),closable:(r.attr("closable")?r.attr("closable")=="true":undefined),closed:(r.attr("closed")?r.attr("closed")=="true":undefined),shadow:(r.attr("shadow")?r.attr("shadow")=="true":undefined),modal:(r.attr("modal")?r.attr("modal")=="true":undefined)},s);if(g.width&&isNaN(g.width)){if(g.width.lastIndexOf("%")==g.width.length-1){var n=g.width.substring(0,g.width.length-1);if(!isNaN(n)){n=n/100}g.width=Math.ceil(d().width*n)}}if(g.height&&isNaN(g.height)){if(g.height.lastIndexOf("%")==g.height.length-1){var n=g.height.substring(0,g.height.length-1);if(!isNaN(n)){n=n/100}g.height=Math.ceil(d().height*n)}}b(p).attr("title","");l=b.data(p,"window",{})}var o=b(p).ta3panel(b.extend({},g,{border:false,doSize:true,closed:true,cls:"window",headerCls:"window-header",bodyCls:"window-body",onBeforeDestroy:function(){if(g.onBeforeDestroy){if(g.onBeforeDestroy.call(p)==false){return false}}var t=b.data(p,"window");if(t.shadow){t.shadow.remove()}if(t.mask){t.mask.remove()}},onClose:function(){var t=b.data(p,"window");if(t.shadow){t.shadow.hide()}if(t.mask){t.mask.hide()}if(g.onClose){g.onClose.call(p)}},onOpen:function(){var t=b.data(p,"window");if(t.mask){t.mask.css({display:"block",zIndex:b.fn.window.defaults.zIndex++})}if(t.shadow){t.shadow.css({display:"block",zIndex:b.fn.window.defaults.zIndex++,left:t.options.left,top:t.options.top,width:t.window.outerWidth(true),height:t.window.outerHeight(true)})}t.window.css("z-index",b.fn.window.defaults.zIndex++);if(g.onOpen){g.onOpen.call(p)}},onResize:function(u,t){var v=b.data(p,"window");if(v.shadow){v.shadow.css({left:v.options.left,top:v.options.top,width:v.window.outerWidth(true),height:v.window.outerHeight(true)})}if(g.onResize){g.onResize.call(p,u,t)}},onMove:function(v,u){var t=b.data(p,"window");if(t.shadow){t.shadow.css({left:t.options.left,top:t.options.top})}if(g.onMove){g.onMove.call(p,v,u)}},onMinimize:function(){var t=b.data(p,"window");if(t.shadow){t.shadow.hide()}if(t.mask){t.mask.hide()}if(g.onMinimize){g.onMinimize.call(p)}},onBeforeCollapse:function(){if(g.onBeforeCollapse){if(g.onBeforeCollapse.call(p)==false){return false}}var t=b.data(p,"window");if(t.shadow){t.shadow.hide()}},onExpand:function(){var t=b.data(p,"window");if(t.shadow){t.shadow.show()}if(g.onExpand){g.onExpand.call(p)}}}));l.options=o.ta3panel("options");l.opts=g;l.window=o.ta3panel("panel");if(l.mask){l.mask.remove()}if(g.modal==true){l.mask=b('<div class="window-mask"></div>').appendTo("body");l.mask.css({width:d().width,height:d().height,display:"none"})}if(l.shadow){l.shadow.remove()}if(g.shadow==true){l.shadow=b('<div class="window-shadow"></div>').insertAfter(l.window);l.shadow.css({display:"none"})}if(l.options.left==null){var m=l.options.width;if(isNaN(m)){m=l.window.outerWidth(true)}l.options.left=(b(window).width()-m)/2+b(document).scrollLeft()}if(l.options.top==null){var q=l.window.height();if(isNaN(q)){q=l.window.outerHeight(true)}l.options.top=(b(window).height()-q)/2+b(document).scrollTop()}o.window("move");if(l.opts.closed==false){o.window("open")}}function a(l){var g=b.data(l,"window");g.window.draggable({handle:">div.panel-header>div.panel-title",disabled:g.options.draggable==false,onStartDrag:function(m){if(g.mask){g.mask.css("z-index",b.fn.window.defaults.zIndex++)}if(g.shadow){g.shadow.css("z-index",b.fn.window.defaults.zIndex++)}g.window.css("z-index",b.fn.window.defaults.zIndex++);if(!g.proxy){g.proxy=b('<div class="window-proxy"></div>').insertAfter(g.window)}g.proxy.css({display:"none",zIndex:b.fn.window.defaults.zIndex++,left:m.data.left,top:m.data.top,width:(b.boxModel==true?(g.window.outerWidth(true)-(g.proxy.outerWidth(true)-g.proxy.width())):g.window.outerWidth(true)),height:(b.boxModel==true?(g.window.outerHeight(true)-(g.proxy.outerHeight(true)-g.proxy.height())):g.window.outerHeight(true))});setTimeout(function(){if(g.proxy){g.proxy.show()}},500)},onDrag:function(m){g.proxy.css({display:"block",left:m.data.left,top:m.data.top});g.window.css({display:"none"});g.shadow.css({display:"none"});return false},onStopDrag:function(m){if(m.data.left<0){m.data.left=0}if(m.data.top<0){m.data.top=0}if(b(window).height()-m.data.top<30){m.data.top=b(window).height()-30}if(b(window).width()-m.data.left<60){m.data.left=b(window).width()-60}g.options.left=m.data.left;g.options.top=m.data.top;b(l).window("move");g.proxy.remove();g.proxy=null;g.window.css({display:"block"});g.shadow.css({display:"block"})}});g.window.resizable({disabled:g.options.resizable==false,onStartResize:function(m){if(!g.proxy){g.proxy=b('<div class="window-proxy"></div>').insertAfter(g.window)}g.proxy.css({zIndex:b.fn.window.defaults.zIndex++,left:m.data.left,top:m.data.top,width:(b.boxModel==true?(m.data.width-(g.proxy.outerWidth(true)-g.proxy.width())):m.data.width),height:(b.boxModel==true?(m.data.height-(g.proxy.outerHeight(true)-g.proxy.height())):m.data.height)})},onResize:function(m){g.proxy.css({left:m.data.left,top:m.data.top,width:(b.boxModel==true?(m.data.width-(g.proxy.outerWidth(true)-g.proxy.width())):m.data.width),height:(b.boxModel==true?(m.data.height-(g.proxy.outerHeight(true)-g.proxy.height())):m.data.height)});return false},onStopResize:function(m){g.options.left=m.data.left;g.options.top=m.data.top;g.options.width=m.data.width;g.options.height=m.data.height;f(l);g.proxy.remove();g.proxy=null}})}function d(){if(document.compatMode=="BackCompat"){return{width:Math.max(document.body.scrollWidth,document.body.clientWidth),height:Math.max(document.body.scrollHeight,document.body.clientHeight)}}else{return{width:Math.max(document.documentElement.scrollWidth,document.documentElement.clientWidth),height:Math.max(document.documentElement.scrollHeight,document.documentElement.clientHeight)}}}b(window).resize(function(){b(".window-mask").css({width:b(window).width(),height:b(window).height()});setTimeout(function(){b(".window-mask").css({width:d().width,height:d().height})},50)});b.fn.window=function(g,l){if(typeof g=="string"){switch(g){case"options":return b.data(this[0],"window").options;case"window":return b.data(this[0],"window").window;case"setTitle":return this.each(function(){b(this).ta3panel("setTitle",l)});case"open":return this.each(function(){b(this).ta3panel("open",l)});case"close":return this.each(function(){b(this).ta3panel("close",l)});case"destroy":return this.each(function(){b(this).ta3panel("destroy",l)});case"refresh":return this.each(function(){b(this).ta3panel("refresh")});case"resize":return this.each(function(){b(this).ta3panel("resize",l)});case"move":return this.each(function(){b(this).ta3panel("move",l)});case"maximize":return this.each(function(){b(this).ta3panel("maximize")});case"minimize":return this.each(function(){b(this).ta3panel("minimize")});case"restore":return this.each(function(){b(this).ta3panel("restore")});case"collapse":return this.each(function(){b(this).ta3panel("collapse",l)});case"expand":return this.each(function(){b(this).ta3panel("expand",l)})}}g=g||{};return this.each(function(){e(this,g);a(this)})};b.fn.window.defaults={zIndex:9000,draggable:true,resizable:true,shadow:true,modal:false,title:"New Window",collapsible:true,minimizable:true,maximizable:true,closable:true,closed:false}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(b){b.extend(true,window,{YH_Window:{Window_Message:a}});function a(e){var f={height:200,width:300,type:"slide",title:"消息提示",text:"无消息",speed:1000};function g(){e=b.extend({},f,e);m(e);if(e.display=="false"){b(".message-container").css("display","none")}else{d(e.type,e.id)}b("#message_close").click(function(){l(e.type,e.id)});if(typeof e.textCallback=="function"){var n=e.textCallback();b("#message_content").html(n)}if(!isNaN(e.closeTime)){setTimeout(function(){l(e.type,e.id)},e.closeTime)}return this}function m(n){b(document.body).prepend('<div id="'+n.id+'" class="message-container"><div class="message-head"><span id="message_close" class="message-close">×</span><div class="message-headbody">'+n.title+'</div><div style="clear:both;"></div></div> <div class="message-body"><div id="message_content" >'+n.text+"</div></div></div>");b(".message-container").css({width:n.width,height:n.height});b("#message_content").css({width:n.width-17,height:n.height-50})}function d(n,o){switch(n){case"slide":b("#"+o).slideDown(e.speed);break;case"fade":b("#"+o).fadeIn(e.speed);break;case"show":b("#"+o).show(e.speed);break;default:b("#"+o).slideDown(e.speed);break}}function l(n,o){switch(n){case"slide":b("#"+o).slideUp(e.speed);break;case"fade":b("#"+o).fadeOut(e.speed);break;case"show":b("#"+o).hide(e.speed);break;default:b("#"+o).slideUp(e.speed);break}}b.extend(this,{cmptype:"messageWindow",UIVersion:"2.0a1"});g()}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(l){l.extend(true,window,{Slick:{Event:b,EventData:f,Range:m,NonDataRow:e,Group:d,GroupTotals:a,EditorLock:g,GlobalEditorLock:new g()}});function f(){var n=false;var o=false;this.stopPropagation=function(){n=true};this.isPropagationStopped=function(){return n};this.stopImmediatePropagation=function(){o=true};this.isImmediatePropagationStopped=function(){return o}}function b(){var n=[];this.subscribe=function(o){n.push(o)};this.unsubscribe=function(p){for(var o=n.length-1;o>=0;o--){if(n[o]===p){n.splice(o,1)}}};this.notify=function(o,s,r){s=s||new f();r=r||this;var q;for(var p=0;p<n.length&&!(s.isPropagationStopped()||s.isImmediatePropagationStopped());p++){q=n[p].call(r,s,o)}return q}}function m(o,n,p,q){if(p===undefined&&q===undefined){p=o;q=n}this.fromRow=Math.min(o,p);this.fromCell=Math.min(n,q);this.toRow=Math.max(o,p);this.toCell=Math.max(n,q);this.isSingleRow=function(){return this.fromRow==this.toRow};this.isSingleCell=function(){return this.fromRow==this.toRow&&this.fromCell==this.toCell};this.contains=function(s,r){return s>=this.fromRow&&s<=this.toRow&&r>=this.fromCell&&r<=this.toCell};this.toString=function(){if(this.isSingleCell()){return"("+this.fromRow+":"+this.fromCell+")"}else{return"("+this.fromRow+":"+this.fromCell+" - "+this.toRow+":"+this.toCell+")"}}}function e(){this.__nonDataRow=true}function d(){this.__group=true;this.__updated=false;this.count=0;this.value=null;this.title=null;this.collapsed=false;this.totals=null}d.prototype=new e();d.prototype.equals=function(n){return this.value===n.value&&this.count===n.count&&this.collapsed===n.collapsed};function a(){this.__groupTotals=true;this.group=null}a.prototype=new e();function g(){var n=null;this.isActive=function(p){return(p?n===p:n!==null)};this.activate=function(p){if(p===n){return}if(n!==null){throw"SlickGrid.EditorLock.activate: an editController is still active, can't activate another editController"}if(!p.commitCurrentEdit){throw"SlickGrid.EditorLock.activate: editController must implement .commitCurrentEdit()"}if(!p.cancelCurrentEdit){throw"SlickGrid.EditorLock.activate: editController must implement .cancelCurrentEdit()"}n=p};this.deactivate=function(p){if(n!==p){throw"SlickGrid.EditorLock.deactivate: specified editController is not the currently active one"}n=null};this.commitCurrentEdit=function(){return(n?n.commitCurrentEdit():true)};this.cancelCurrentEdit=function o(){return(n?n.cancelCurrentEdit():true)}}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery","TaJsUtil"],a)}else{a(jQuery)}}(function(a){a.extend(true,window,{Slick:{CheckboxSelectColumn:b}});function b(w){var n;var d=0;var m=this;var u={};var g={columnId:"_checkbox_selector",cssClass:"slick-cell-checkbox",toolTip:"全选/撤销",width:40};var s=a.extend(true,{},g,w);function t(x){n=x;n.onSelectedRowsChanged.subscribe(o);n.onClick.subscribe(l);n.onHeaderClick.subscribe(r)}function p(){n.onSelectedRowsChanged.unsubscribe(o);n.onClick.unsubscribe(l);n.onHeaderClick.unsubscribe(r)}function o(C,D){var A=n.getSelectedRows();var z={},H,B;for(B=0;B<A.length;B++){H=A[B];z[H]=true;if(z[H]!==u[H]){n.invalidateRow(H);delete u[H]}}for(B in u){n.invalidateRow(B)}u=z;n.render();var x=0;var y=false,G=false;var F=n.getOptions().groupingBy;if(F&&F!="_onlyTotals"){y=true}var E=n.getColumns();for(var B=0;B<E.length;B++){if(E[B].totals!=undefined){G=true}}if(y&&G){x=4}if(y&&!G){x=4}if(!y&&G){x=1}if(A.length==n.getDataLength()-d-x&&n.getDataLength()!=0){n.updateColumnHeader(s.columnId,"<input type='checkbox'  class='slick-checkbox-header' checked='checked'>",s.toolTip)}else{n.updateColumnHeader(s.columnId,"<input type='checkbox'  class='slick-checkbox-header'>",s.toolTip)}}function l(B,y){var x;var A=B.srcElement||B.target;var z;if(a(A).hasClass("slick-cell-checkbox")){z=a(A).children()}else{z=a(A)}if((x=n.getColumns()[y.cell].id)===s.columnId){if(n.getEditorLock().isActive()&&!n.getEditorLock().commitCurrentEdit()){B.preventDefault();B.stopImmediatePropagation();return}if(!z.attr("disabled")){if(u[y.row]){n.setSelectedRows(a.grep(n.getSelectedRows(),function(C){return C!=y.row}))}else{n.setSelectedRows(n.getSelectedRows().concat(y.row))}}if(typeof s.onRowSelect=="function"){s.onRowSelect(y,B)}B.stopPropagation();B.stopImmediatePropagation()}d=0}function r(B,x){d=0;if(x.column&&x.column.id==s.columnId){if(n.getEditorLock().isActive()&&!n.getEditorLock().commitCurrentEdit()){B.preventDefault();B.stopImmediatePropagation();return}if(a(B.target).is(":checked")){var A=[];for(var y=0;y<n.getDataLength();y++){var z=n.getDataView().getItemByIdx(y);if(n.getDataView().getItemMetadata(y)!=undefined){continue}if(s.onChecked){if(s.onChecked(z)){A.push(y)}else{d++}}else{A.push(y)}}n.setSelectedRows(A)}else{n.setSelectedRows([]);d=0}if(typeof s.onRowSelect=="function"){s.onRowSelect(x,B)}B.stopPropagation();B.stopImmediatePropagation()}}function e(){return{id:s.columnId,name:"<input type='checkbox' class='slick-checkbox-header'>",toolTip:s.toolTip,field:"sel",width:s.width,resizable:false,sortable:false,cssClass:s.cssClass,formatter:f}}function q(x){delete u[x]}function f(C,y,A,z,x){var B=true;if(s.onChecked){B=s.onChecked(x)}if(!B){return u[C]?"<input type='checkbox' checked='checked' disabled='true'>":"<input type='checkbox' disabled='true'>"}if(B&&x){return u[C]?"<input type='checkbox' checked='checked'>":"<input type='checkbox'>"}return null}function v(){u=[]}a.extend(this,{init:t,destroy:p,delete_selectedRowsLookup:q,getColumnDefinition:e,setNull:v,handleSelectedRowsChanged:o})}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery","grid.base","grid.dataview","grid.rowselect","grid.group","grid.checkbox","grid.dataview","grid.editors","grid.radioselect","grid.rowselect","grid.pager","event.drag-2.2","sortable"],a)}else{a(jQuery)}}(function($){$.extend(true,window,{Slick:{Grid:SlickGrid}});var scrollbarDimensions;function SlickGrid(container,data,columns,options){var defaults={headerHeight:0,rowHeight:25,defaultColumnWidth:80,enableAddRow:false,leaveSpaceForNewRows:false,editable:false,autoEdit:true,enableCellNavigation:true,enableCellRangeSelection:true,enableColumnReorder:false,asyncEditorLoading:true,asyncEditorLoadDelay:100,forceFitColumns:false,columnsWidthsOverView:false,enableAsyncPostRender:false,asyncPostRenderDelay:60,autoHeight:false,editorLock:Slick.GlobalEditorLock,showHeaderRow:false,headerRowHeight:25,showTopPanel:false,topPanelHeight:30,formatterFactory:null,editorFactory:null,cellFlashingCssClass:"flashing",selectedCellCssClass:"selected",multiSelect:true,enableTextSelectionOnCells:true,selectType:false,columnFilter:false,showToolpaging:false,onSelectChange:null,haveSn:false,groupingExpression:null,serverCvtCode:true,groupingBy:false,snWidth:37,border:false,clickActiveStyle:true,headerColumnsRows:1};var columnDefaults={name:"",resizable:true,sortable:false,minWidth:30,rerenderOnResize:false,headerCssClass:null,align:"center",dataAlign:"left"};var maxSupportedCssHeight;var th;var h;var ph;var n;var cj;var page=0;var offset=0;var scrollDir=1;var $container;var uid="slickgrid_"+Math.round(1000000*Math.random());var self=this;var $headerScroller;var $headers;var $headerRow,$headerRowScroller;var $topPanelScroller;var $topPanel;var $viewport;var $canvas;var $style;var stylesheet,columnCssRulesL,columnCssRulesR;var viewportH,viewportW;var viewportHasHScroll;var headerColumnWidthDiff,headerColumnHeightDiff,cellWidthDiff,cellHeightDiff;var absoluteColumnMinWidth;var activePosX;var activeRow,activeCell;var activeCellNode=null;var currentEditor=null;var serializedEditorValue;var editController;var rowsCache={};var renderedRows=0;var numVisibleRows;var prevScrollTop=0;var scrollTop=0;var lastRenderedScrollTop=0;var prevScrollLeft=0;var avgRowRenderTime=10;var selectionModel;var selectedRows=[];var plugins=[];var cellCssClasses={};var columnsById={};var sortColumnId;var sortAsc=true;var h_editorLoader=null;var h_render=null;var h_postrender=null;var postProcessedRows={};var postProcessToRow=null;var postProcessFromRow=null;var counter_rows_rendered=0;var counter_rows_removed=0;var dataView=null;var selectorTpye=null;var columnFilters={};var selectedRowIds=[];var editorItems=[];var delrows=[];var addrows=[];var hiddenColumns=[];var pager=null;var pId="__id___";var defaultWidth=0;var defaultHeight=0;var hastotals=false;var columnPropertyKey=[];function init(){$container=$(container);maxSupportedCssHeight=10000;scrollbarDimensions={width:17,height:17};if(!options.rowHeight){if(Base.globvar.indexStyle=="default"){options.rowHeight=30}}options=$.extend({},defaults,options);columnDefaults.width=options.defaultColumnWidth;editController={commitCurrentEdit:commitCurrentEdit,cancelCurrentEdit:cancelCurrentEdit};$container.addClass(uid);if(options.border==true){$container.css("border","1px solid #99BBE8")}$headerScroller=$("<div class='slick-header' style='overflow:hidden;position:relative;' />").appendTo($container);$headers=$("<div class='slick-header-columns' style='width:10000px; left:-1000px' />").appendTo($headerScroller);$topPanelScroller=$("<div class='slick-top-panel-scroller' style='overflow:hidden;position:relative;' />").appendTo($container);$topPanel=$("<div class='slick-top-panel' style='width:10000px' />").appendTo($topPanelScroller);if(!options.showTopPanel){$topPanelScroller.hide()}$headerRowScroller=$("<div class='slick-headerrow' style='overflow:hidden;position:relative;' />").appendTo($container);$headerRow=$("<div class='slick-headerrow-columns' style='width:10000px;' />").appendTo($headerRowScroller);if(!options.showHeaderRow){$headerRowScroller.hide()}$viewport=$("<div class='slick-viewport' tabIndex='0' hideFocus>").appendTo($container);$canvas=$("<div class='slick-grid-canvas' tabIndex='0' hideFocus />").appendTo($viewport);measureCellPaddingAndBorder();if(!options.enableTextSelectionOnCells){$viewport.bind("selectstart.ui",function(event){return $(event.target).is("input,textarea")})}viewportW=parseFloat($.css($container[0],"width",true));if(options.selectType=="checkbox"){selectorTpye=new Slick.CheckboxSelectColumn({onChecked:options.onChecked,onRowSelect:options.onRowSelect});columns.unshift(selectorTpye.getColumnDefinition());registerPlugin(selectorTpye)}else{if(options.selectType=="radio"){selectorTpye=new Slick.RadioSelectColumn({});columns.unshift(selectorTpye.getColumnDefinition());registerPlugin(selectorTpye)}}setSelectionModel(new Slick.RowSelectionModel({selectActiveRow:true}));if(options.haveSn){columns.unshift({dataType:"number",id:"__no",resizable:false,selectable:false,sortable:"true",cssClass:"slick-cell-selection",field:pId,width:options.snWidth})}var tmp=null;if(!jQuery.isArray(data)){tmp=data.list||[]}else{tmp=data}for(var i=0;i<tmp.length;i++){tmp[i][pId]=i}dataView=new Slick.Data.DataView(null,self);dataView.setFilter(filter);if(tmp&&typeof tmp=="object"&&tmp.length>0){dataView.beginUpdate();dataView.setItems(tmp);dataView.endUpdate();data=dataView}else{data=dataView}createColumnHeaders();setupColumnSort();createCssRules();resizeAndRender();bindAncestorScrollEvents();$viewport.bind("scroll.slickgrid",handleScroll);$container.bind("_resize.slickgrid",resizeAndRender);$headerScroller.bind("contextmenu.slickgrid",handleHeaderContextMenu).bind("click.slickgrid",handleHeaderClick);$canvas.bind("keydown.slickgrid",handleKeyDown).bind("click.slickgrid",handleClick).bind("dblclick.slickgrid",handleDblClick).bind("contextmenu.slickgrid",handleContextMenu).bind("draginit",handleDragInit).bind("dragstart",handleDragStart).bind("drag",handleDrag).bind("dragend",handleDragEnd);$canvas.delegate(".slick-row","mouseenter",handleMouseEnter);$canvas.delegate(".slick-row","mouseleave",handleMouseLeave);if(options.columnFilter){$(getHeaderRow()).delegate(":input","change keyup",function(e){columnFilters[$(this).data("columnId")]=$.trim($(this).val());if(columnFilters.undefined){delete columnFilters.undefined}dataView.refresh()});self.onColumnsReordered.subscribe(function(e,args){updateHeaderRow()});self.onColumnsResized.subscribe(function(e,args){updateHeaderRow()});updateHeaderRow()}if(options.showToolpaging){var $paging=$("<div id='"+container.toString().replace("#","")+"_paper_' ></div>").appendTo($container);pager=new Slick.Controls.Pager(dataView,self,$paging,options.pagingOptions)}self.onSort.subscribe(function(e,args){sortdir=args.sortAsc?1:-1;sortcol=args.sortCol.field;var type=args.sortCol.dataType?args.sortCol.dataType:"string";if(type=="number"){dataView.sort(comparerNum,args.sortAsc)}else{if(type=="date"){dataView.sort(comparerDate,args.sortAsc)}else{if(type=="dateTime"){dataView.sort(comparerDate,args.sortAsc)}else{dataView.sort(comparer,args.sortAsc)}}}});dataView.onRowCountChanged.subscribe(function(e,args){updateRowCount();render()});dataView.onRowsChanged.subscribe(function(e,args){render()});self.onSelectedRowsChanged.subscribe(function(e,a,b,c){selectedRowIds=[];var rows=self.getSelectedRows();for(var i=0,l=rows.length;i<l;i++){var item=dataView.getItem(rows[i]);if(item){if(item.__group){continue}selectedRowIds.push(item[pId])}}});dataView.onRowsChanged.subscribe(function(e,args){self.invalidateRows(args.rows);self.render();if(selectedRowIds.length>0){var selRows=[];for(var i=0;i<selectedRowIds.length;i++){var idx=dataView.getRowById(selectedRowIds[i]);if(idx!=undefined){selRows.push(idx)}}self.setSelectedRows(selRows)}});function gridGroping(columnId,trueVlue){return}if(options.groupingBy){if(options.groupingBy=="_onlyTotals"){dataView.groupBy(options.groupingBy,function(g){return"<span style='color:green'>(共"+g.count+" 项)</span>"},function(a,b){return a.value-b.value})}else{dataView.groupBy(options.groupingBy,function(g){var value="";for(var i=0;i<columns.length;i++){if(columns[i].id==options.groupingBy){value=columns[i].name}}var trueCollection=getCollectionsDataArrayObject()[options.groupingBy]==undefined?[]:getCollectionsDataArrayObject()[options.groupingBy];var trueValue=g.value;for(var i=0;i<trueCollection.length;i++){if(trueCollection[i].id==g.value){if(trueCollection[i].name!=null){trueValue=trueCollection[i].name;break}}}return value+":  "+trueValue+"  <span style='color:green'>(共"+g.count+" 项)</span>"},function(a,b){return a.value-b.value})}var totals=[];for(var i=0;i<columns.length;i++){if(columns[i].totals!=undefined){switch(columns[i].totals){case"avg":if(typeof columns[i].totalsFormatter=="function"){totals.push(new Slick.Data.Aggregators.Avg(columns[i].id,columns[i].totalsFormatter))}else{totals.push(new Slick.Data.Aggregators.Avg(columns[i].id))}break;case"max":if(typeof columns[i].totalsFormatter=="function"){totals.push(new Slick.Data.Aggregators.Max(columns[i].id,columns[i].totalsFormatter))}else{totals.push(new Slick.Data.Aggregators.Max(columns[i].id))}break;case"min":if(typeof columns[i].totalsFormatter=="function"){totals.push(new Slick.Data.Aggregators.Min(columns[i].id,columns[i].totalsFormatter))}else{totals.push(new Slick.Data.Aggregators.Min(columns[i].id))}break;case"sum":if(typeof columns[i].totalsFormatter=="function"){totals.push(new Slick.Data.Aggregators.Sum(columns[i].id,columns[i].totalsFormatter))}else{totals.push(new Slick.Data.Aggregators.Sum(columns[i].id))}break}}}dataView.setAggregators(totals,true);dataView.collapseGroup(0);dataView.endUpdate()}initTip();if(typeof options.defaultRows=="function"){var str=options.defaultRows();setCheckedRows(str)}else{if(options.defaultRows!=undefined&&options.defaultRows.length>0){setCheckedRows(options.defaultRows)}}if(options.defaultEvent!=null&&options.defaultEvent.length>0){var defaultEvent=options.defaultEvent;for(var i=0;i<defaultEvent.length;i++){var eventName=defaultEvent[i].name;var handler=defaultEvent[i].handler;if(options.eventHandler!=null&&options.eventHandler[handler]!=null){self[eventName].subscribe(options.eventHandler[handler])}else{self[eventName].subscribe(self[handler])}}}}function checkedAllData(){var defaultData=self.getDataView().getItems();var checkedRowsData=[];if(defaultData){for(var i=0;i<defaultData.length;i++){checkedRowsData.push(defaultData[i][pId])}}selectionModel.setSelectedRanges(rowsToRanges(checkedRowsData))}function cancelSelectedAllData(){setSelectedRows([])}function setCheckedRows(obj){var checkedRows=eval(obj);if(checkedRows){if(options.selectType=="checkbox"||options.selectType=="radio"){var defaultData=self.getDataView().getItems();if(defaultData){var checkedRowsData=[];for(var i=0;i<defaultData.length;i++){var d=defaultData[i];for(var j=0;j<checkedRows.length;j++){var checkedRow=checkedRows[j];var l=0,yy=0;for(var x in checkedRow){l++;if(d[x]==checkedRow[x]){yy++}}if(yy==l){checkedRowsData.push(d[pId])}}}selectionModel.setSelectedRanges(rowsToRanges(checkedRowsData))}}}}function cancelCheckedRowsByArray(obj){var checkedRows=eval(obj);if(checkedRows){if(options.selectType=="checkbox"){var defaultData=getSelectRowsDataToObj();if(defaultData){var checkedRowsData=[];var selectedRowsData=[];for(var i=0;i<defaultData.length;i++){selectedRowsData.push(defaultData[i]._row_)}for(var i=0;i<defaultData.length;i++){var d=defaultData[i];for(var j=0;j<checkedRows.length;j++){var checkedRow=checkedRows[j];var l=0,yy=0;for(var x in checkedRow){l++;if(d[x]==checkedRow[x]){yy++}}if(yy==l){checkedRowsData.push(d._row_);break}}}Array.prototype.indexOf=function(val){for(var i=0;i<this.length;i++){if(this[i]==val){return i}}return -1};Array.prototype.remove=function(val){var index=this.indexOf(val);if(index>-1){this.splice(index,1)}};for(var i=0;i<checkedRowsData.length;i++){selectedRowsData.remove(checkedRowsData[i])}setSelectedRows(selectedRowsData)}}}}function cancelCheckedRowByData(data){var s=getSelectRowsDataToObj();var select=[],flag=true;for(var j=0;j<s.length;j++){for(var i=0;i<data.length;i++){for(var obj in data[i]){if(s[j][obj]==data[i][obj]){flag=false;break}}}if(flag){select.push(s[j]._row_)}flag=true}setSelectedRows(select)}function addSelectRowsByData(data){alert("待开发");var checkedRows=[];if(typeof data!="string"){checkedRows=eval(data)}else{checkedRows=data}var checkedRowsData=[];var defaultData=self.getDataView().getItems();for(var i=0;i<defaultData.length;i++){var d=defaultData[i];for(var j=0;j<checkedRows.length;j++){var checkedRow=checkedRows[j];var l=0,yy=0;for(var x in checkedRow){l++;if(d[x]==checkedRow[x]){yy++}}if(yy==l){var flag=false;for(var selects=0;selects<selectedRows.length;selects++){if(d[pId]==selectedRows[0]){flag=true}}if(!flag){checkedRowsData.push(d[pId])}}}}selectedRows=selectedRows.concat(checkedRowsData);setSelectedRows(selectedRows)}function initTip(){function context(e,o){e.preventDefault();var columns=self.getColumns();var cellInfo=self.getCellFromEvent(e);var rowData=self.getDataItem(cellInfo.row);var cellData=rowData[self.getColumns()[cellInfo.cell].field];var collectionData=self.getCollectionsDataArrayObject();if(collectionData){var collectionCell=collectionData[self.getColumns()[cellInfo.cell].field];if(collectionCell){for(var i=0;i<collectionCell.length;i++){if(collectionCell[i].id==cellData){cellData=collectionCell[i].name}}}}cellData=cellData==undefined?"":cellData;var columnName=self.getColumns()[cellInfo.cell].name;columnName=columnName==undefined?"":columnName;var columnId=self.getColumns()[cellInfo.cell].id;for(var i=0;i<columns.length;i++){if(columns[i].showDetailed==true){if(columnId==columns[i].id){if($("#"+self.getGridId()+"_tips").length==0){$("<div id='"+self.getGridId()+"_tips'  class='slick-showdetail'/>").html("<span style='word-break:break-all'><div style='font-weight:bolder'>"+columnName+":</div>"+cellData+"</span>").appendTo($container)}else{$("#"+self.getGridId()+"_tips").find("span").html("<div style='font-weight:bolder'>"+columnName+":</div>"+cellData)}$("#"+self.getGridId()+"_tips").css({left:e.clientX+4,top:e.clientY+4,position:"fixed"});$("#"+self.getGridId()+"_tips").show();break}else{$("#"+self.getGridId()+"_tips").hide()}}}}self.onMouseEnter.subscribe(context);function over(){$("#"+self.getGridId()+"_tips").hide()}self.onMouseLeave.subscribe(over)}function comparer(a,b){var x=a[sortcol]!=undefined?a[sortcol]:"",y=b[sortcol]!=undefined?b[sortcol]:"";if(navigator.userAgent.indexOf("Chrome")!=-1){var xx=getSpell(x);var yy=getSpell(y);return(xx==yy?0:(xx>yy?1:-1))}return x.localeCompare(y)}function comparerNum(a,b){var x=Number(a[sortcol])?Number(a[sortcol]):-999999999999,y=Number(b[sortcol])?Number(b[sortcol]):-999999999999;return(x==y?0:(x>y?1:-1))}function comparerDate(a,b){var dataX=a[sortcol];var dataY=b[sortcol];var x=dataX?Number(dataX.replaceAll("-","").replaceAll(":","").replaceAll(" ","")):-999999999999,y=dataY?Number(dataY.replaceAll("-","").replaceAll(":","").replaceAll(" ","")):-999999999999;return(x==y?0:(x>y?1:-1))}function registerPlugin(plugin){plugins.unshift(plugin);plugin.init(self)}function unregisterPlugin(plugin){for(var i=plugins.length;i>=0;i--){if(plugins[i]===plugin){if(plugins[i].destroy){plugins[i].destroy()}plugins.splice(i,1);break}}}function setSelectionModel(model){if(selectionModel){selectionModel.onSelectedRangesChanged.unsubscribe(handleSelectedRangesChanged);if(selectionModel.destroy){selectionModel.destroy()}}selectionModel=model;if(selectionModel){selectionModel.init(self);selectionModel.onSelectedRangesChanged.subscribe(handleSelectedRangesChanged)}}function getSelectionModel(){return selectionModel}function getCanvasNode(){return $canvas[0]}function measureScrollbar(){var $c=$("<div style='position:absolute; top:-10000px; left:-10000px; width:100px; height:100px; overflow:scroll;'></div>").appendTo("body");var dim={width:$c.width()-$c[0].clientWidth,height:$c.height()-$c[0].clientHeight};$c.remove();return dim}function getRowWidth(){var rowWidth=0;var i=columns.length;while(i--){rowWidth+=(columns[i].width||columnDefaults.width)}return rowWidth}function setCanvasWidth(width){$canvas.width(width);viewportHasHScroll=(width>viewportW-scrollbarDimensions.width)}function disableSelection($target){if($target&&$target.jquery){$target.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})}}function getMaxSupportedCssHeight(){var increment=10000;var supportedHeight=increment;var testUpTo=100000;var div=$("<div style='display:none' />").appendTo(document.body);while(supportedHeight<=testUpTo){div.css("height",supportedHeight+increment);if(div.height()!==supportedHeight+increment){break}else{supportedHeight+=increment}}div.remove();return supportedHeight}function bindAncestorScrollEvents(){var elem=$canvas[0];while((elem=elem.parentNode)!=document.body){if(elem==$viewport[0]||elem.scrollWidth!=elem.clientWidth||elem.scrollHeight!=elem.clientHeight){$(elem).bind("scroll.slickgrid",handleActiveCellPositionChange)}}}function unbindAncestorScrollEvents(){$canvas.parents().unbind("scroll.slickgrid")}function updateColumnHeader(columnId,title,toolTip){var idx=getColumnIndex(columnId);if(idx===undefined){return}var $header=$headers.children().eq(idx);if($header){columns[idx].name=title;columns[idx].toolTip=toolTip;$header.attr("title",toolTip||title||"").children().eq(0).html(title)}}function getHeaderRow(){return $headerRow[0]}function getHeaderRowColumn(columnId){var idx=getColumnIndex(columnId);var $header=$headerRow.children().eq(idx);return $header&&$header[0]}function createColumnHeaders(reorder){var opt=options;var i;var $tableTrs;function hoverBegin(){$(this).addClass("slick-header-column-hover")}function hoverEnd(){$(this).removeClass("slick-header-column-hover")}$headers.empty();$headerRow.empty();columnsById={};if(columns[0]&&columns[0].possation==undefined){for(var j=0;j<columns.length;j++){if(columns[j].possation==undefined){columns[j].possation=j}}}columns=columns.sort(function(a,b){if(a.possation!=undefined&&b.possation!=undefined){return a.possation-b.possation}else{return -1}});for(i=0;i<columns.length;i++){if(columns[i].propertyKey==true){columnPropertyKey.push(columns[i].field)}var m=columns[i]=$.extend({},columnDefaults,columns[i]);columnsById[m.id]=i;var headerStr=["<div class='ui-state-default slick-header-column"];if(m.field=="sel"){headerStr.push(" slick-cell-checkbox ")}headerStr.push(m.headerCssClass||"");headerStr.push("' id='");headerStr.push(uid);headerStr.push(m.id);headerStr.push("' title='");headerStr.push(m.toolTip||m.name.replaceAll("<br/>","")||"");headerStr.push("' field='");headerStr.push(m.id);headerStr.push("' style='width:");headerStr.push(m.width-headerColumnWidthDiff);headerStr.push("px;");if(m.headerBackgroundColor){headerStr.push("background:");headerStr.push(m.headerBackgroundColor);headerStr.push(";")}if(m.align){headerStr.push("text-align:");headerStr.push(m.align);headerStr.push(";")}if(opt.headerColumnsRows){headerStr.push("height:");headerStr.push(22*opt.headerColumnsRows);headerStr.push("px;")}headerStr.push("'>");if(m.editor){if(opt.headerColumnsRows&&opt.headerColumnsRows!=1){headerStr.push("<span class='slick-column-name slick-icon-edit' style='padding-left: 15px;white-space:normal;word-break:break-all;display:block;height:15px;'>");headerStr.push(m.name);headerStr.push("</span>")}else{headerStr.push("<span class='slick-column-name slick-icon-edit' style='padding-left: 15px;display:block;height:15px;'>");headerStr.push(m.name);headerStr.push("</span>")}}else{if(opt.headerColumnsRows&&opt.headerColumnsRows!=1){headerStr.push("<span class='slick-column-name' style='white-space:normal;word-break:break-all;'>");headerStr.push(m.name);headerStr.push("</span>")}else{headerStr.push("<span class='slick-column-name'>");headerStr.push(m.name);headerStr.push("</span>")}}if(m.sortable){headerStr.push("<span class='slick-sort-indicator' />")}if(m.collection&&opt.serverCvtCode){headerStr.push('<input type="hidden"  name="gridInfo[\'');headerStr.push(self.getGridId());headerStr.push('_displayCode\']" value="');headerStr.push(m.id);headerStr.push("`");headerStr.push(m.collection);headerStr.push('" />')}headerStr.push("</div>");var header=$(headerStr.join("")).data("fieldId",m.id);header.hover(hoverBegin,hoverEnd);if(opt.showHeaderRow){$("<div class='ui-state-default slick-headerrow-column c"+i+"'></div>").appendTo($headerRow)}header.appendTo($headers)}setTimeout(function(){setupColumnResize()},1500);if(opt.enableColumnReorder){setupColumnReorder()}}function setupColumnSort(){$headers.click(function(e){if($(e.target).hasClass("slick-resizable-handle")){return}var $col=$(e.target).closest(".slick-header-column");if(!$col.length){return}var column=columns[getColumnIndex($col.data("fieldId"))];if(column.sortable){if(!getEditorLock().commitCurrentEdit()){return}if(column.id===sortColumnId){sortAsc=!sortAsc}else{sortColumnId=column.id;sortAsc=true}setSortColumn(sortColumnId,sortAsc);trigger(self.onSort,{sortCol:column,sortAsc:sortAsc});cancelSelectedAllData()}})}function setupColumnReorder(){$headers.sortable({containment:"parent",axis:"x",cursor:"default",tolerance:"intersection",helper:"clone",placeholder:"slick-sortable-placeholder ui-state-default slick-header-column",forcePlaceholderSize:true,start:function(e,ui){$(ui.helper).addClass("slick-header-column-active")},beforeStop:function(e,ui){$(ui.helper).removeClass("slick-header-column-active")},stop:function(e){if(!getEditorLock().commitCurrentEdit()){$(this).sortable("cancel");return}var reorderedIds=$headers.sortable("toArray");var reorderedColumns=[];var index=0;for(var i=0;i<reorderedIds.length;i++){var column=columns[getColumnIndex(reorderedIds[i].replace(uid,""))];for(var j=0;j<hiddenColumns.length;j++){if(hiddenColumns[j]&&hiddenColumns[j].possation==index){index=hiddenColumns[j].possation+1}}column.possation=index;reorderedColumns.push(column);index++}setColumns(reorderedColumns,true);trigger(self.onColumnsReordered,{});e.stopPropagation();setupColumnResize()}})}function setupColumnResize(){var $col,j,c,pageX,columnElements,minPageX,maxPageX,firstResizable,lastResizable,originalCanvasWidth;columnElements=$headers.children();columnElements.find(".slick-resizable-handle").remove();columnElements.each(function(i,e){if(columns[i]&&columns[i].resizable){if(firstResizable===undefined){firstResizable=i}lastResizable=i}});if(firstResizable===undefined){return}columnElements.each(function(i,e){if(i<firstResizable||(options.forceFitColumns&&i>=lastResizable)){return}$col=$(e);$("<div class='slick-resizable-handle' />").appendTo(e).bind("dragstart",function(e,dd){if(!getEditorLock().commitCurrentEdit()){return false}pageX=e.pageX;$(this).parent().addClass("slick-header-column-active");var shrinkLeewayOnRight=null,stretchLeewayOnRight=null;columnElements.each(function(i,e){columns[i].previousWidth=$(e).outerWidth(true)});if(options.forceFitColumns){shrinkLeewayOnRight=0;stretchLeewayOnRight=0;for(j=i+1;j<columnElements.length;j++){c=columns[j];if(c.resizable){if(stretchLeewayOnRight!==null){if(c.maxWidth){stretchLeewayOnRight+=c.maxWidth-c.previousWidth}else{stretchLeewayOnRight=null}}shrinkLeewayOnRight+=c.previousWidth-Math.max(c.minWidth||0,absoluteColumnMinWidth)}}}var shrinkLeewayOnLeft=0,stretchLeewayOnLeft=0;for(j=0;j<=i;j++){c=columns[j];if(c.resizable){if(stretchLeewayOnLeft!==null){if(c.maxWidth){stretchLeewayOnLeft+=c.maxWidth-c.previousWidth}else{stretchLeewayOnLeft=null}}shrinkLeewayOnLeft+=c.previousWidth-Math.max(c.minWidth||0,absoluteColumnMinWidth)}}if(shrinkLeewayOnRight===null){shrinkLeewayOnRight=100000}if(shrinkLeewayOnLeft===null){shrinkLeewayOnLeft=100000}if(stretchLeewayOnRight===null){stretchLeewayOnRight=100000}if(stretchLeewayOnLeft===null){stretchLeewayOnLeft=100000}maxPageX=pageX+Math.min(shrinkLeewayOnRight,stretchLeewayOnLeft);minPageX=pageX-Math.min(shrinkLeewayOnLeft,stretchLeewayOnRight);originalCanvasWidth=$canvas.width()}).bind("drag",function(e,dd){var actualMinWidth,d=Math.min(maxPageX,Math.max(minPageX,e.pageX))-pageX,x,ci;if(d<0){x=d;for(j=i;j>=0;j--){c=columns[j];if(c.resizable){actualMinWidth=Math.max(c.minWidth||0,absoluteColumnMinWidth);if(x&&c.previousWidth+x<actualMinWidth){x+=c.previousWidth-actualMinWidth;c.width=actualMinWidth}else{c.width=c.previousWidth+x;x=0}}}if(options.forceFitColumns){x=-d;for(j=i+1;j<columnElements.length;j++){c=columns[j];if(c.resizable){if(x&&c.maxWidth&&(c.maxWidth-c.previousWidth<x)){x-=c.maxWidth-c.previousWidth;c.width=c.maxWidth}else{c.width=c.previousWidth+x;x=0}}}}else{if(options.syncColumnCellResize){setCanvasWidth(originalCanvasWidth+d)}}}else{x=d;for(j=i;j>=0;j--){c=columns[j];if(c.resizable){if(x&&c.maxWidth&&(c.maxWidth-c.previousWidth<x)){x-=c.maxWidth-c.previousWidth;c.width=c.maxWidth}else{c.width=c.previousWidth+x;x=0}}}if(options.forceFitColumns){x=-d;for(j=i+1;j<columnElements.length;j++){c=columns[j];if(c.resizable){actualMinWidth=Math.max(c.minWidth||0,absoluteColumnMinWidth);if(x&&c.previousWidth+x<actualMinWidth){x+=c.previousWidth-actualMinWidth;c.width=actualMinWidth}else{c.width=c.previousWidth+x;x=0}}}}else{if(options.syncColumnCellResize){setCanvasWidth(originalCanvasWidth+d)}}}applyColumnHeaderWidths();if(options.syncColumnCellResize){applyColumnWidths()}}).bind("dragend",function(e,dd){var newWidth;$(this).parent().removeClass("slick-header-column-active");for(j=0;j<columnElements.length;j++){c=columns[j];newWidth=$(columnElements[j]).outerWidth(true);if(c.previousWidth!==newWidth&&c.rerenderOnResize){invalidateAllRows()}}applyColumnWidths();resizeCanvas();trigger(self.onColumnsResized,{})})})}function getVBoxDelta($el){var p=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"];var delta=0;$.each(p,function(n,val){delta+=parseFloat($el.css(val))||0});return delta}function measureCellPaddingAndBorder(){var h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"];var v=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"];var e2=$("<div class='slick-cell'></div>").appendTo($canvas);headerColumnWidthDiff=headerColumnHeightDiff=9;cellWidthDiff=cellHeightDiff=0;for(var i=0;i<h.length;i++){cellWidthDiff+=parseFloat(e2.css(h[i]))||0;cellHeightDiff+=parseFloat(e2.css(v[i]))||0}e2.remove();absoluteColumnMinWidth=headerColumnWidthDiff>cellWidthDiff?headerColumnWidthDiff:cellWidthDiff}function createCssRules(){$style=$("<style type='text/css' rel='stylesheet' />").appendTo($("head"));var rowHeight=(options.rowHeight-cellHeightDiff);var rules=["."+uid+" .slick-header-column { left: 1000px; }","."+uid+" .slick-top-panel { height:"+options.topPanelHeight+"px; }","."+uid+" .slick-headerrow-columns { height:"+options.headerRowHeight+"px; }","."+uid+" .slick-cell { height:"+rowHeight+"px; }","."+uid+" .slick-row { width:"+getRowWidth()+"px; height:"+options.rowHeight+"px; }","."+uid+" .lr { float:none; position:absolute; }"];var rowWidth=getRowWidth();var x=0,w;for(var i=0;i<columns.length;i++){w=columns[i].width;rules.push("."+uid+" .l"+i+" { left: "+x+"px; }");rules.push("."+uid+" .r"+i+" { right: "+(rowWidth-x-w)+"px; }");rules.push("."+uid+" .c"+i+" { width:"+(w-cellWidthDiff)+"px; }");x+=columns[i].width}if($style[0].styleSheet){$style[0].styleSheet.cssText=rules.join(" ")}else{$style[0].appendChild(document.createTextNode(rules.join(" ")))}var sheets=document.styleSheets;for(var i=0;i<sheets.length;i++){if((sheets[i].ownerNode||sheets[i].owningElement)==$style[0]){stylesheet=sheets[i];break}}}function findCssRule(selector){var rules=(stylesheet.cssRules||stylesheet.rules);for(var i=0;i<rules.length;i++){if(rules[i].selectorText==selector){return rules[i]}}return null}function removeCssRules(){$style.remove();stylesheet=null}function destroy(){getEditorLock().cancelCurrentEdit();trigger(self.onBeforeDestroy,{});for(var i=0;i<plugins.length;i++){unregisterPlugin(plugins[i])}if(options.enableColumnReorder&&$headers.sortable){$headers.sortable("destroy")}unbindAncestorScrollEvents();$container.unbind(".slickgrid");removeCssRules();$canvas.unbind("draginit dragstart dragend drag");$container.empty().removeClass(uid)}function trigger(evt,args,e){e=e||new Slick.EventData();args=args||{};args.grid=self;return evt.notify(args,e,self)}function getEditorLock(){return options.editorLock}function getEditController(){return editController}function getColumnIndex(id){return columnsById[id]}function autosizeColumns(){if(viewportW<=0){resizeCanvas()}viewportW=parseFloat($.css($container[0],"width",true));if(viewportW==0){if($container.parent().width()!=0&&$container.parent().width()<10000){viewportW=$container.parent().width()}else{if($container.parents("div.tabs-panels").length>0){if($container.parents(".ez-fl").size()>0){viewportW=$container.parents("div.tabs-panels").eq(0).width()*$container.parents(".ez-fl").width()/100}else{viewportW=$container.parents("div.tabs-panels").eq(0).width()-12}}}}var i,c,widths=[],shrinkLeeway=0,availWidth=(options.autoHeight?viewportW:viewportW-scrollbarDimensions.width),total=0,existingTotal=0;for(i=0;i<columns.length;i++){c=columns[i];widths.push(c.width);existingTotal+=c.width;shrinkLeeway+=c.width-Math.max(c.minWidth||0,absoluteColumnMinWidth)}total=existingTotal;invalidateAllRows();while(total>availWidth){if(!shrinkLeeway){return}var shrinkProportion=(total-availWidth)/shrinkLeeway;for(i=0;i<columns.length&&total>availWidth;i++){c=columns[i];if(!c.resizable||c.minWidth===c.width||c.width===absoluteColumnMinWidth){continue}var shrinkSize=Math.floor(shrinkProportion*(c.width-Math.max(c.minWidth||0,absoluteColumnMinWidth)))||1;total-=shrinkSize;widths[i]-=shrinkSize}}if(total<=0){return}var previousTotal=total;while(total<availWidth){var growProportion=availWidth/total;for(i=0;i<columns.length&&total<availWidth;i++){c=columns[i];if(!c.resizable||c.maxWidth<=c.width){continue}var growSize=Math.min(Math.floor(growProportion*c.width)-c.width,(c.maxWidth-c.width)||1000000)||1;total+=growSize;widths[i]+=growSize}if(previousTotal==total){break}previousTotal=total}for(i=0;i<columns.length;i++){columns[i].width=widths[i]}applyColumnHeaderWidths();applyColumnWidths();resizeCanvas();updateHeaderRow()}function applyColumnHeaderWidths(){var h;for(var i=0,headers=$headers.children(),ii=headers.length;i<ii;i++){h=$(headers[i]);if(h.width()!==columns[i].width-headerColumnWidthDiff){h.width(columns[i].width-headerColumnWidthDiff)}}}function applyColumnWidths(){var rowWidth=getRowWidth();var x=0,w,rule;for(var i=0;i<columns.length;i++){w=columns[i].width;rule=findCssRule("."+uid+" .c"+i);rule.style.width=(w-cellWidthDiff)+"px";rule=findCssRule("."+uid+" .l"+i);rule.style.left=x+"px";rule=findCssRule("."+uid+" .r"+i);rule.style.right=(rowWidth-x-w)+"px";x+=columns[i].width}rule=findCssRule("."+uid+" .slick-row");rule.style.width=(rowWidth>0?rowWidth:0)+"px"}function setSortColumn(columnId,ascending){sortColumnId=columnId;sortAsc=ascending;var columnIndex=getColumnIndex(sortColumnId);$headers.children().removeClass("slick-header-column-sorted");$headers.find(".slick-sort-indicator").removeClass("slick-sort-indicator-asc slick-sort-indicator-desc");if(columnIndex!=null){$headers.children().eq(columnIndex).addClass("slick-header-column-sorted").find(".slick-sort-indicator").addClass(sortAsc?"slick-sort-indicator-asc":"slick-sort-indicator-desc")}}function handleSelectedRangesChanged(e,ranges){selectedRows=[];var hash={};for(var i=0;i<ranges.length;i++){for(var j=ranges[i].fromRow;j<=ranges[i].toRow;j++){if(!hash[j]){selectedRows.push(j)}hash[j]={};for(var k=ranges[i].fromCell;k<=ranges[i].toCell;k++){if(canCellBeSelected(j,k)){hash[j][columns[k].id]=options.selectedCellCssClass}}}}setCellCssStyles(options.selectedCellCssClass,hash);if(typeof options.onSelectChange=="function"){options.onSelectChange(getSelectRowsDataToObj(),getSelectedRows().length)}trigger(self.onSelectedRowsChanged,{rows:getSelectedRows(),data:getSelectRowsDataToObj()},e)}function getColumns(){return columns}function getHiddenColumns(){return hiddenColumns}function setColumns(columnDefinitions,reorder){columns=columnDefinitions;invalidateAllRows();createColumnHeaders(reorder);removeCssRules();createCssRules();resizeAndRender();handleScroll();if(options.columnFilter){$(getHeaderRow()).delegate(":input","change keyup",function(e){columnFilters[$(this).data("columnId")]=$.trim($(this).val());dataView.refresh()});updateHeaderRow()}}function getOptions(){return options}function setOptions(args){if(!getEditorLock().commitCurrentEdit()){return}makeActiveCellNormal();if(options.enableAddRow!==args.enableAddRow){invalidateRow(getDataLength())}options=$.extend(options,args);render()}function setData(newData,scrollToTop){invalidateAllRows();var tmp=null;if(!jQuery.isArray(newData)){tmp=newData.list||[]}for(var i=0;i<tmp.length;i++){tmp[i][pId]=i}data=tmp;if(scrollToTop){scrollTo(0)}return tmp}function getData(){return data}function getDataLength(){if(data.getLength){return data.getLength()}else{return data.length}}function getDataItem(i){if(data.getItem){return data.getItem(i)}else{if(data.getData){return data.getData(i)}else{return data[i]}}}function getTopPanel(){return $topPanel[0]}function showTopPanel(){options.showTopPanel=true;$topPanelScroller.slideDown("fast",resizeCanvas)}function hideTopPanel(){options.showTopPanel=false;$topPanelScroller.slideUp("fast",resizeCanvas)}function showHeaderRowColumns(){options.showHeaderRow=true;$headerRowScroller.slideDown("fast",resizeCanvas)}function hideHeaderRowColumns(){options.showHeaderRow=false;$headerRowScroller.slideUp("fast",resizeCanvas)}function scrollTo(y){var oldOffset=offset;page=Math.min(n-1,Math.floor(y/ph));offset=Math.round(page*cj);var newScrollTop=y-offset;if(offset!=oldOffset){var range=getVisibleRange(newScrollTop);cleanupRows(range.top,range.bottom);updateRowPositions()}if(prevScrollTop!=newScrollTop){scrollDir=(prevScrollTop+oldOffset<newScrollTop+offset)?1:-1;$viewport[0].scrollTop=(lastRenderedScrollTop=scrollTop=prevScrollTop=newScrollTop);trigger(self.onViewportChanged,{})}}function defaultFormatter(row,cell,value,columnDef,dataContext){return(value===null||value===undefined)?"":value}function getFormatter(row,column){var rowMetadata=data.getItemMetadata&&data.getItemMetadata(row);var columnOverrides=rowMetadata&&rowMetadata.columns&&(rowMetadata.columns[column.id]||rowMetadata.columns[getColumnIndex(column.id)]);return(columnOverrides&&columnOverrides.formatter)||(rowMetadata&&rowMetadata.formatter)||column.formatter||(options.formatterFactory&&options.formatterFactory.getFormatter(column))||defaultFormatter}function getEditor(row,cell){var column=columns[cell];var rowMetadata=data.getItemMetadata&&data.getItemMetadata(row);var columnMetadata=rowMetadata&&rowMetadata.columns;if(columnMetadata&&columnMetadata[column.id]&&columnMetadata[column.id].editor!==undefined){return columnMetadata[column.id].editor}if(columnMetadata&&columnMetadata[cell]&&columnMetadata[cell].editor!==undefined){return columnMetadata[cell].editor}return column.editor||(options.editorFactory&&options.editorFactory.getEditor(column))}function appendRowHtml(stringArray,row){var d=getDataItem(row);var dataLoading=row<getDataLength()&&!d;var cellCss;var rowCss="slick-row odd";var metadata=data.getItemMetadata&&data.getItemMetadata(row);if(metadata&&metadata.cssClasses){rowCss+=" "+metadata.cssClasses}if(typeof options.rowColorfn=="function"){var datColor=options.rowColorfn(data.getItem(row));if(datColor){stringArray.push("<div class='ui-widget-content "+rowCss+"' row='"+row+"' style='background-color:"+datColor+";top:"+(options.rowHeight*row-offset)+"px'>")}else{stringArray.push("<div class='ui-widget-content "+rowCss+"' row='"+row+"' style='top:"+(options.rowHeight*row-offset)+"px'>")}}else{stringArray.push("<div class='ui-widget-content "+rowCss+"' row='"+row+"' style='top:"+(options.rowHeight*row-offset)+"px'>")}var colspan;for(var i=0,cols=columns.length;i<cols;i++){var m=columns[i];colspan=getColspan(row,i);if(d.__group!=true){cellCss="slick-cell lr l"+i+" r"+Math.min(columns.length-1,i+colspan-1)+(m.cssClass?" "+m.cssClass:"")}else{cellCss="slick-cell lr l"+i+" r"+Math.min(columns.length-1,i+colspan-1)}if(row===activeRow&&i===activeCell){cellCss+=(" active")}for(var key in cellCssClasses){if(cellCssClasses[key][row]&&cellCssClasses[key][row][m.id]){cellCss+=(" "+cellCssClasses[key][row][m.id])}}if((m.dataType=="number"||m.dataType=="date")&&d.__group!=true&&d.__groupTotals!=true){if(m.dataAlign!=undefined){stringArray.push("<div class='"+cellCss+"' style='text-align:"+m.dataAlign+"'>")}else{stringArray.push("<div class='"+cellCss+"' style='text-align:right'>")}}else{if(m.dataAlign!=undefined&&d.__group!=true&&d.__groupTotals!=true){stringArray.push("<div class='"+cellCss+"' style='text-align:"+m.dataAlign+"'>")}else{if(m.totalsAlign!=undefined&&d.__groupTotals==true){stringArray.push("<div class='"+cellCss+"' style='text-align:"+m.totalsAlign+"'>")}else{stringArray.push("<div class='"+cellCss+"'>")}}}if(d){var htmlData=getFormatter(row,m)(row,i,d[m.field],m,d);if(m.dataType=="date"){htmlData=htmlData.substring(0,10)}if(m.id==="__no"&&d.__group!=true&&d.__groupTotals!=true){htmlData=Number(row)+1}else{htmlData=htmlData}stringArray.push(htmlData)}if(m.operate==true){var operateMenus=[];operateMenus.push("<center><div class='slick-item-operate' row='");operateMenus.push(row);operateMenus.push("' ><span class='slick-item-operate-button'>");operateMenus.push("<b class='slick-item-operate-icon'></b></span><span class='slick-item-operate-text'></span></div></center>");stringArray.push(operateMenus.join(""))}if(m.icon&&!d.__groupTotals){var center="<center>";center+="<div title='单击' class='"+m.icon+"' style='cursor:pointer;height:16px;width:16px;margin-top:3px'></div>";center+="</center>";stringArray.push(center)}stringArray.push("</div>");if(colspan){i+=(colspan-1)}}stringArray.push("</div>")}function cleanupRows(rangeToKeep){for(var i in rowsCache){if(((i=parseInt(i,10))!==activeRow)&&(i<rangeToKeep.top||i>rangeToKeep.bottom)){removeRowFromCache(i)}}}function invalidate(){updateRowCount();invalidateAllRows();render()}function invalidateAllRows(){if(currentEditor){makeActiveCellNormal()}for(var row in rowsCache){removeRowFromCache(row)}}function removeRowFromCache(row){var node=rowsCache[row];if(!node){return}$canvas[0].removeChild(node);delete rowsCache[row];delete postProcessedRows[row];renderedRows--;counter_rows_removed++}function invalidateRows(rows){var i,rl;if(!rows||!rows.length){return}scrollDir=0;for(i=0,rl=rows.length;i<rl;i++){if(currentEditor&&activeRow===i){makeActiveCellNormal()}if(rowsCache[rows[i]]){removeRowFromCache(rows[i])}}}function invalidateRow(row){invalidateRows([row])}function updateCell(row,cell){var cellNode=getCellNode(row,cell);if(!cellNode){return}var m=columns[cell],d=getDataItem(row);if(currentEditor&&activeRow===row&&activeCell===cell){currentEditor.loadValue(d)}else{cellNode.innerHTML=d?getFormatter(row,m)(row,cell,d[m.field],m,d):"";invalidatePostProcessingResults(row)}}function updateRow(row){if(!rowsCache[row]){return}$(rowsCache[row]).children().each(function(i){var m=columns[i];if(row===activeRow&&i===activeCell&&currentEditor){currentEditor.loadValue(getDataItem(activeRow))}else{if(getDataItem(row)){if(m.id=="__no"){this.innerHTML=getFormatter(row,m)(row,i,getDataItem(row)[m.field]+1,m,getDataItem(row))}else{if(m.icon){this.innerHTML="<center><div title='单击' class='"+m.icon+"' style='cursor:pointer;height:16px;width:16px;margin-top:3px'></div></center>"}else{this.innerHTML=getFormatter(row,m)(row,i,getDataItem(row)[m.field],m,getDataItem(row))}}}else{innerHTML=""}}});invalidatePostProcessingResults(row)}function getViewportHeight(){var off=37;if(options.showToolpaging){off=64}return parseFloat($.css($container[0],"height",true))-options.headerHeight-getVBoxDelta($headers)-(options.showTopPanel?options.topPanelHeight+getVBoxDelta($topPanelScroller):0)-(options.showHeaderRow?options.headerRowHeight+getVBoxDelta($headerRowScroller):0)-off}function resizeCanvas(isNotDefault){if(options.autoHeight){viewportH=options.rowHeight*(getDataLength()+(options.enableAddRow?1:0)+(options.leaveSpaceForNewRows?numVisibleRows-1:0))}else{viewportH=getViewportHeight()}numVisibleRows=Math.ceil(viewportH/options.rowHeight);viewportW=parseFloat($.css($container[0],"width",true));if(viewportW==0){if($container.parent().width()!=0&&$container.parent().width()<10000){viewportW=$container.parent().width()}else{if($container.parents("div.tabs-panels").length>0){if($container.parents(".ez-fl").size()>0){viewportW=$container.parents("div.tabs-panels").eq(0).width()*$container.parents(".ez-fl").width()/100}else{viewportW=$container.parents("div.tabs-panels").eq(0).width()-12}}}}if(options.headerColumnsRows&&!isNaN(options.headerColumnsRows)&&options.headerColumnsRows>1){viewportH=viewportH-22*(options.headerColumnsRows-1)}$viewport.height(viewportH);var w=0,i=columns.length;while(i--){w+=columns[i].width}setCanvasWidth(w);updateRowCount();render();if(!isNotDefault){var box=absBox($container[0]).width;defaultWidth=absBox($container[0]).width;defaultHeight=absBox($container[0]).height}}function resizeAndRender(){if(options.forceFitColumns){if(!Base.globvar.columnsWidthsOverView){autosizeColumns()}else{if(Base.globvar.columnsWidthsOverView){var totalWidth=0;for(i=0;i<columns.length;i++){c=columns[i];totalWidth+=c.width}if(totalWidth>viewportW){resizeCanvas()}else{autosizeColumns()}}}}else{resizeCanvas()}}function updateRowCount(){var newRowCount=getDataLength()+(options.enableAddRow?1:0)+(options.leaveSpaceForNewRows?numVisibleRows-1:0);var oldH=h;var l=options.enableAddRow?getDataLength():getDataLength()-1;for(var i in rowsCache){if(i>=l){removeRowFromCache(i)}}th=Math.max(options.rowHeight*newRowCount,viewportH-scrollbarDimensions.height);if(th<maxSupportedCssHeight){h=ph=th;n=1;cj=0}else{h=maxSupportedCssHeight;ph=h/100;n=Math.floor(th/ph);cj=(th-h)/(n-1)}if(h!==oldH){if(options.headerColumnsRows&&!isNaN(options.headerColumnsRows)&&options.headerColumnsRows>1){h=h-22*(options.headerColumnsRows-1)}if(options.showToolpaging){$canvas.css("height",h)}else{$canvas.css("height",h)}scrollTop=$viewport[0].scrollTop}var oldScrollTopInRange=(scrollTop+offset<=th-viewportH);if(th==0||scrollTop==0){page=offset=0}else{if(oldScrollTopInRange){scrollTo(scrollTop+offset)}else{scrollTo(th-viewportH)}}if(h!=oldH&&options.autoHeight){resizeCanvas()}}function getVisibleRange(viewportTop){if(viewportTop==null){viewportTop=scrollTop}return{top:Math.floor((scrollTop+offset)/options.rowHeight),bottom:Math.ceil((scrollTop+offset+viewportH)/options.rowHeight)}}function getRenderedRange(viewportTop){var range=getVisibleRange(viewportTop);var buffer=Math.round(viewportH/options.rowHeight);var minBuffer=3;if(scrollDir==-1){range.top-=buffer;range.bottom+=minBuffer}else{if(scrollDir==1){range.top-=minBuffer;range.bottom+=buffer}else{range.top-=minBuffer;range.bottom+=minBuffer}}range.top=Math.max(0,range.top);range.bottom=Math.min(options.enableAddRow?getDataLength():getDataLength()-1,range.bottom);return range}function renderRows(range){var i,l,parentNode=$canvas[0],rowsBefore=renderedRows,stringArray=[],rows=[],startTimestamp=new Date(),needToReselectCell=false;for(i=range.top;i<=range.bottom;i++){if(rowsCache[i]){continue}renderedRows++;rows.push(i);var sn=i;appendRowHtml(stringArray,i,sn);if(activeCellNode&&activeRow===i){needToReselectCell=true}counter_rows_rendered++}var x=document.createElement("div");x.innerHTML=stringArray.join("");for(i=0,l=x.childNodes.length;i<l;i++){rowsCache[rows[i]]=parentNode.appendChild(x.firstChild)}if(needToReselectCell){activeCellNode=getCellNode(activeRow,activeCell)}if(renderedRows-rowsBefore>5){avgRowRenderTime=(new Date()-startTimestamp)/(renderedRows-rowsBefore)}}function startPostProcessing(){if(!options.enableAsyncPostRender){return}clearTimeout(h_postrender);h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay)}function invalidatePostProcessingResults(row){delete postProcessedRows[row];postProcessFromRow=Math.min(postProcessFromRow,row);postProcessToRow=Math.max(postProcessToRow,row);startPostProcessing()}function updateRowPositions(){for(var row in rowsCache){rowsCache[row].style.top=(row*options.rowHeight-offset)+"px"}}function render(){var visible=getVisibleRange();var rendered=getRenderedRange();var row=dataView.getItems().length;var d=getDataItem(row);if(d){if(d.__group!=true&&d.__groupTotals==true){var stringArray=[];var d=getDataItem(row);var dataLoading=row<getDataLength()&&!d;var cellCss;var rowCss="slick-row odd";var metadata=data.getItemMetadata&&data.getItemMetadata(row);if(metadata&&metadata.cssClasses){rowCss+=" "+metadata.cssClasses}stringArray.push("<div class='ui-widget-content "+rowCss+"' row='"+row+"'>");var colspan;for(var i=0,cols=columns.length;i<cols;i++){var m=columns[i];colspan=getColspan(row,i);if(d.__group!=true){cellCss="slick-cell lr l"+i+" r"+Math.min(columns.length-1,i+colspan-1)+(m.cssClass?" "+m.cssClass:"")}else{cellCss="slick-cell lr l"+i+" r"+Math.min(columns.length-1,i+colspan-1)}if(row===activeRow&&i===activeCell){cellCss+=(" active")}for(var key in cellCssClasses){if(cellCssClasses[key][row]&&cellCssClasses[key][row][m.id]){cellCss+=(" "+cellCssClasses[key][row][m.id])}}if(m.totalsAlign!=undefined&&d.__groupTotals==true){stringArray.push("<div class='"+cellCss+"' style='text-align:"+m.totalsAlign+"'>")}else{stringArray.push("<div class='"+cellCss+"'>")}if(d){var htmlData=getFormatter(row,m)(row,i,d[m.field],m,d);if(m.dataType=="date"){htmlData=htmlData.substring(0,10)}if(m.id==="__no"&&d.__group!=true&&d.__groupTotals!=true){htmlData=Number(row)+1}else{htmlData=htmlData}stringArray.push(htmlData)}stringArray.push("</div>");if(colspan){i+=(colspan-1)}}stringArray.push("</div>");if(stringArray.length>0){$topPanel.html(stringArray.join(""));$topPanelScroller.show()}}}cleanupRows(rendered);renderRows(rendered);postProcessFromRow=visible.top;postProcessToRow=Math.min(options.enableAddRow?getDataLength():getDataLength()-1,visible.bottom);startPostProcessing();lastRenderedScrollTop=scrollTop;h_render=null}function handleScroll(){scrollTop=$viewport[0].scrollTop;var scrollLeft=$viewport[0].scrollLeft;var scrollDist=Math.abs(scrollTop-prevScrollTop);if(scrollLeft!==prevScrollLeft){prevScrollLeft=scrollLeft;$headerScroller[0].scrollLeft=scrollLeft;$topPanelScroller[0].scrollLeft=scrollLeft;$headerRowScroller[0].scrollLeft=scrollLeft}if(scrollDist){scrollDir=prevScrollTop<scrollTop?1:-1;prevScrollTop=scrollTop;if(scrollDist<viewportH){scrollTo(scrollTop+offset)}else{var oldOffset=offset;page=Math.min(n-1,Math.floor(scrollTop*((th-viewportH)/(h-viewportH))*(1/ph)));offset=Math.round(page*cj);if(oldOffset!=offset){invalidateAllRows()}}if(h_render){clearTimeout(h_render)}if(Math.abs(lastRenderedScrollTop-scrollTop)<viewportH){render()}else{h_render=setTimeout(render,50)}trigger(self.onViewportChanged,{})}trigger(self.onScroll,{scrollLeft:scrollLeft,scrollTop:scrollTop})}function asyncPostProcessRows(){while(postProcessFromRow<=postProcessToRow){var row=(scrollDir>=0)?postProcessFromRow++:postProcessToRow--;var rowNode=rowsCache[row];if(!rowNode||postProcessedRows[row]||row>=getDataLength()){continue}var d=getDataItem(row),cellNodes=rowNode.childNodes;for(var i=0,j=0,l=columns.length;i<l;++i){var m=columns[i];if(m.asyncPostRender){m.asyncPostRender(cellNodes[j],postProcessFromRow,d,m)}++j}postProcessedRows[row]=true;h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay);return}}function addCellCssStyles(key,hash){if(cellCssClasses[key]){throw"addCellCssStyles: cell CSS hash with key '"+key+"' already exists."}cellCssClasses[key]=hash;var node;for(var row in rowsCache){if(hash[row]){for(var columnId in hash[row]){node=getCellNode(row,getColumnIndex(columnId));if(node){$(node).addClass(hash[row][columnId])}}}}}function removeCellCssStyles(key){if(!cellCssClasses[key]){return}var node;for(var row in rowsCache){if(cellCssClasses[key][row]){for(var columnId in cellCssClasses[key][row]){node=getCellNode(row,getColumnIndex(columnId));if(node){$(node).removeClass(cellCssClasses[key][row][columnId])}}}}delete cellCssClasses[key]}function setCellCssStyles(key,hash){removeCellCssStyles(key);addCellCssStyles(key,hash)}function flashCell(row,cell,speed){row=Number(row);cell=Number(cell);speed=Number(speed)||100;if(rowsCache[row]){var $cell=$(getCellNode(row,cell));function toggleCellClass(times){if(!times){return}setTimeout(function(){$cell.queue(function(){$cell.toggleClass(options.cellFlashingCssClass).dequeue();toggleCellClass(times-1)})},speed)}toggleCellClass(6)}}function handleDragInit(e,dd){var cell=getCellFromEvent(e);if(!cell||!cellExists(cell.row,cell.cell)){return false}retval=trigger(self.onDragInit,dd,e);if(e.isImmediatePropagationStopped()){return retval}return false}function handleDragStart(e,dd){var cell=getCellFromEvent(e);if(!cell||!cellExists(cell.row,cell.cell)){return false}var retval=trigger(self.onDragStart,dd,e);if(e.isImmediatePropagationStopped()){return retval}return false}function handleDrag(e,dd){return trigger(self.onDrag,dd,e)}function handleDragEnd(e,dd){trigger(self.onDragEnd,dd,e)}function handleKeyDown(e){trigger(self.onKeyDown,{},e);var handled=e.isImmediatePropagationStopped();if(!handled){if(!e.shiftKey&&!e.altKey&&!e.ctrlKey){if(e.which==27){if(!getEditorLock().isActive()){return}cancelEditAndSetFocus()}else{if(e.which==37){navigateLeft()}else{if(e.which==39){navigateRight()}else{if(e.which==38){navigateUp()}else{if(e.which==40){navigateDown()}else{if(e.which==9){navigateNext()}else{if(e.which==13){if(options.editable){if(currentEditor){if(activeRow===getDataLength()){navigateDown()}else{commitEditAndSetFocus()}}else{if(getEditorLock().commitCurrentEdit()){var i=activeCell;for(;i<columns.length;i++){if(makeActiveCellEditable()==false){navigateNext()}else{break}}}}}}else{return}}}}}}}}else{if(e.which==9&&e.shiftKey&&!e.ctrlKey&&!e.altKey){navigatePrev()}else{return}}}e.stopPropagation();e.preventDefault();try{e.originalEvent.keyCode=0}catch(error){}}function handleClick(e){if($outDiv){$outDiv.remove()}var cell=getCellFromEvent(e);if(!cell||(currentEditor!==null&&activeRow==cell.row&&activeCell==cell.cell)){return}var datac=$.extend({},getDataItem(cell.row),{row:cell.row,cell:cell.cell,_gridId:getGridId()});var click=columns[cell.cell].click;if(click){columns[getCellFromEvent(e).cell].click(datac,e);e.stopImmediatePropagation()}var operate=columns[cell.cell].operate;if(operate){showOperateItem(columns[cell.cell].operateMenus,datac,e);e.stopImmediatePropagation()}var returnValue=trigger(self.onClick,datac,e);if(options.onChecked){if(!options.onChecked(getDataItem(cell.row))){return}}if(e.isImmediatePropagationStopped()){return}if(canCellBeActive(cell.row,cell.cell)){if(!getEditorLock().isActive()||getEditorLock().commitCurrentEdit()){scrollRowIntoView(cell.row,false);if(options.clickActiveStyle){setActiveCellInternal(getCellNode(cell.row,cell.cell),(cell.row===getDataLength())||options.autoEdit)}}}}var $outDiv=null;function showOperateItem(menus,datac,e){var $target=$(e.target);if($target.hasClass("slick-cell")||$target.is("center")){return}var offset={};if($target.hasClass("slick-item-operate-text")){offset=$target.prev(".slick-item-operate-button").offset()}else{offset=$target.closest(".slick-item-operate-button").offset()}if(!offset||offset.top==0||offset.left==0){return}if($outDiv){$outDiv.remove()}var innerMenu=[];innerMenu.push("<div class='slick-ffb ui-multiselect-menu ui-widget'  style='width:132px ;top: 21px; position: absolute; display: block;'>");innerMenu.push("<div style='overflow-x: hidden; overflow-y: auto; height: auto;' class='content'>");innerMenu.push("</div>");$outDiv=$(innerMenu.join("")).appendTo($viewport);$outDiv.bind("mouseleave",function(event){$outDiv.remove();return false});for(var i=0;i<menus.length;i++){var item=[];item.push("<div class='slick-ffb-item' style='cursor: pointer;'>");item.push(menus[i].name);item.push("</div>");var click=menus[i].click;function outClick(datac,e){var innerClick=click;return function(){innerClick(datac,e);$outDiv.remove()}}var $item=$(item.join("")).bind("click",outClick(datac,e));$item.appendTo($outDiv)}var offsetParent=$viewport.offset();$outDiv.css("top",offset.top-offsetParent.top+5+$viewport[0].scrollTop);$outDiv.css("left",offset.left-offsetParent.left-$outDiv.width()+$viewport[0].scrollLeft);$("body").bind("click.showOperateItemBody",function(e){var srcobj;if($.browser.msie){srcobj=e.srcElement}else{srcobj=e.target}if(srcobj&&srcobj===$outDiv){return}$outDiv.remove();$("body").unbind(".showOperateItemBody");return false})}function handleContextMenu(e){var $cell=$(e.target).closest(".slick-cell",$canvas);if($cell.length===0){return}if(activeCellNode===$cell[0]&&currentEditor!==null){return}trigger(self.onContextMenu,{},e)}function handleDblClick(e){var cell=getCellFromEvent(e);if(!cell||(currentEditor!==null&&activeRow==cell.row&&activeCell==cell.cell)){return}var datac=$.extend({},getDataItem(cell.row),{row:cell.row,cell:cell.cell});trigger(self.onDblClick,datac,e);if(e.isImmediatePropagationStopped()){return}if(options.editable){gotoCell(cell.row,cell.cell,true)}if(options.clickActiveStyle){}else{if(activeCellNode){makeActiveCellNormal();$(activeCellNode).removeClass("active")}}}function handleHeaderContextMenu(e){var $header=$(e.target).closest(".slick-header-column",".slick-header-columns");var column=$header&&columns[self.getColumnIndex($header.data("fieldId"))];trigger(self.onHeaderContextMenu,{column:column},e)}function handleHeaderClick(e){var $header=$(e.target).closest(".slick-header-column",".slick-header-columns");var column=$header&&columns[self.getColumnIndex($header.data("fieldId"))];trigger(self.onHeaderClick,{column:column},e)}function handleMouseEnter(e){trigger(self.onMouseEnter,{},e)}function handleMouseLeave(e){trigger(self.onMouseLeave,{},e)}function cellExists(row,cell){return !(row<0||row>=getDataLength()||cell<0||cell>=columns.length)}function getCellFromPoint(x,y){var row=Math.floor((y+offset)/options.rowHeight);var cell=0;var w=0;for(var i=0;i<columns.length&&w<x;i++){w+=columns[i].width;cell++}if(cell<0){cell=0}return{row:row,cell:cell-1}}function getCellFromNode(node){var cls=/l\d+/.exec(node.className)||/c\d+/.exec(node.className);if(!cls){throw"getCellFromNode: cannot get cell - "+node.className}return parseInt(cls[0].substr(1,cls[0].length-1),10)}function getCellFromEvent(e){var target=e.target||e.srcElement;var $cell=$(target).closest(".slick-cell",$canvas);if(!$cell.length){return null}return{row:$cell.parent().attr("row")|0,cell:getCellFromNode($cell[0])}}function getCellNodeBox(row,cell){if(!cellExists(row,cell)){return null}var y1=row*options.rowHeight-offset;var y2=y1+options.rowHeight-1;var x1=0;for(var i=0;i<cell;i++){x1+=columns[i].width}var x2=x1+columns[cell].width;return{top:y1,left:x1,bottom:y2,right:x2}}function resetActiveCell(){setActiveCellInternal(null,false)}function setFocus(){if($.browser.msie){$canvas[0].setActive()}else{$canvas[0].focus()}}function scrollActiveCellIntoView(){if(activeCellNode){var left=$(activeCellNode).position().left,right=left+$(activeCellNode).outerWidth(true),scrollLeft=$viewport.scrollLeft(),scrollRight=scrollLeft+$viewport.width();if(left<scrollLeft){$viewport.scrollLeft(left)}else{if(right>scrollRight){$viewport.scrollLeft(Math.min(left,right-$viewport[0].clientWidth))}}}}function setActiveCellInternal(newCell,editMode){if(activeCellNode!==null){makeActiveCellNormal();$(activeCellNode).removeClass("active")}var activeCellChanged=(activeCellNode!==newCell);activeCellNode=newCell;if(activeCellNode!=null){activeRow=parseInt($(activeCellNode).parent().attr("row"));activeCell=activePosX=getCellFromNode(activeCellNode);$(activeCellNode).addClass("active");if(options.editable&&editMode&&isCellPotentiallyEditable(activeRow,activeCell)){clearTimeout(h_editorLoader);if(options.asyncEditorLoading){h_editorLoader=setTimeout(function(){makeActiveCellEditable()},options.asyncEditorLoadDelay)}else{makeActiveCellEditable()}}else{setFocus()}}else{activeRow=activeCell=null}if(activeCellChanged){scrollActiveCellIntoView();trigger(self.onActiveCellChanged,getActiveCell())}}function clearTextSelection(){if(document.selection&&document.selection.empty){document.selection.empty()}else{if(window.getSelection){var sel=window.getSelection();if(sel&&sel.removeAllRanges){sel.removeAllRanges()}}}}function isCellPotentiallyEditable(row,cell){if(row<getDataLength()&&!getDataItem(row)){return false}if(columns[cell].cannotTriggerInsert&&row>=getDataLength()){return false}if(!getEditor(row,cell)){return false}return true}function makeActiveCellNormal(){if(!currentEditor){return}trigger(self.onBeforeCellEditorDestroy,{editor:currentEditor});currentEditor.destroy();currentEditor=null;if(activeCellNode){$(activeCellNode).removeClass("editable invalid");if(getDataItem(activeRow)){var column=columns[activeCell];activeCellNode.innerHTML=getFormatter(activeRow,column)(activeRow,activeCell,getDataItem(activeRow)[column.field],column,getDataItem(activeRow));invalidatePostProcessingResults(activeRow)}}if($.browser.msie){clearTextSelection()}getEditorLock().deactivate(editController)}function makeActiveCellEditable(editor){if(!activeCellNode){return}if(!options.editable){throw"Grid : makeActiveCellEditable : should never get called when options.editable is false"}clearTimeout(h_editorLoader);var isEditor=isCellPotentiallyEditable(activeRow,activeCell);if(!isEditor){return isEditor}var columnDef=columns[activeCell];var item=getDataItem(activeRow);if(trigger(self.onBeforeEditCell,{row:activeRow,cell:activeCell,item:item,column:columnDef})===false){setFocus();return}getEditorLock().activate(editController);$(activeCellNode).addClass("editable");if(!editor){activeCellNode.innerHTML=""}currentEditor=new (editor||getEditor(activeRow,activeCell))({grid:self,gridPosition:absBox($container[0]),position:absBox(activeCellNode),container:activeCellNode,column:columnDef,item:item||{},commitChanges:commitEditAndSetFocus,cancelChanges:cancelEditAndSetFocus},columns[activeCell].editordata,columns[activeCell]);if(item){currentEditor.loadValue(item)}serializedEditorValue=currentEditor.serializeValue();if(currentEditor.position){handleActiveCellPositionChange()}}function commitEditAndSetFocus(){if(getEditorLock().commitCurrentEdit()){setFocus()}}function cancelEditAndSetFocus(){if(getEditorLock().cancelCurrentEdit()){setFocus()}}function absBox(elem){var box={top:elem.offsetTop,left:elem.offsetLeft,bottom:0,right:0,width:$(elem).outerWidth(true),height:$(elem).outerHeight(true),visible:true};box.bottom=box.top+box.height;box.right=box.left+box.width;var offsetParent=elem.offsetParent;while((elem=elem.parentNode)!=document.body){if(box.visible&&elem.scrollHeight!=elem.offsetHeight&&$(elem).css("overflowY")!="visible"){box.visible=box.bottom>elem.scrollTop&&box.top<elem.scrollTop+elem.clientHeight}if(box.visible&&elem.scrollWidth!=elem.offsetWidth&&$(elem).css("overflowX")!="visible"){box.visible=box.right>elem.scrollLeft&&box.left<elem.scrollLeft+elem.clientWidth}box.left-=elem.scrollLeft;box.top-=elem.scrollTop;if(elem===offsetParent){box.left+=elem.offsetLeft;box.top+=elem.offsetTop;offsetParent=elem.offsetParent}box.bottom=box.top+box.height;box.right=box.left+box.width}return box}function getActiveCellPosition(){return absBox(activeCellNode)}function getGridPosition(){return absBox($container[0])}function handleActiveCellPositionChange(){if(!activeCellNode){return}var cellBox;trigger(self.onActiveCellPositionChanged,{});if(currentEditor){cellBox=cellBox||getActiveCellPosition();if(currentEditor.show&&currentEditor.hide){if(!cellBox.visible){currentEditor.hide()}else{currentEditor.show()}}if(currentEditor.position){currentEditor.position(cellBox)}}}function getCellEditor(){return currentEditor}function getActiveCell(){if(!activeCellNode){return null}else{return{row:activeRow,cell:activeCell}}}function getActiveCellNode(){return activeCellNode}function scrollRowIntoView(row,doPaging){var rowInt=parseInt(row);var rowAtTop=rowInt*options.rowHeight;var rowAtBottom=(rowInt+1)*options.rowHeight-viewportH+(viewportHasHScroll?scrollbarDimensions.height:0);if((rowInt+1)*options.rowHeight>scrollTop+viewportH+offset){scrollTo(doPaging?rowAtTop:rowAtBottom);render()}else{if(rowInt*options.rowHeight<scrollTop+offset){scrollTo(doPaging?rowAtBottom:rowAtTop);render()}}}function getColspan(row,cell){var metadata=data.getItemMetadata&&data.getItemMetadata(row);if(!metadata||!metadata.columns){return 1}var columnData=metadata.columns[columns[cell].id]||metadata.columns[cell];var colspan=(columnData&&columnData.colspan);if(colspan==="*"){colspan=columns.length-cell}return(colspan||1)}function findFirstFocusableCell(row){var cell=0;while(cell<columns.length){if(canCellBeActive(row,cell)){return cell}cell+=getColspan(row,cell)}return null}function findLastFocusableCell(row){var cell=0;var lastFocusableCell=null;while(cell<columns.length){if(canCellBeActive(row,cell)){lastFocusableCell=cell}cell+=getColspan(row,cell)}return lastFocusableCell}function gotoRight(row,cell,posX){if(cell>=columns.length-1){row++;cell=-1}do{cell+=getColspan(row,cell)}while(cell<columns.length&&!canCellBeActive(row,cell));if(cell<columns.length){return{row:row,cell:cell,posX:cell}}return null}function gotoLeft(row,cell,posX){if(cell<=0){return null}var firstFocusableCell=findFirstFocusableCell(row);if(firstFocusableCell===null||firstFocusableCell>=cell){return null}var prev={row:row,cell:firstFocusableCell,posX:firstFocusableCell};var pos;while(true){pos=gotoRight(prev.row,prev.cell,prev.posX);if(!pos){return null}if(pos.cell>=cell){return prev}prev=pos}}function gotoDown(row,cell,posX){var prevCell;while(true){if(++row>=getDataLength()+(options.enableAddRow?1:0)){return null}prevCell=cell=0;while(cell<=posX){prevCell=cell;cell+=getColspan(row,cell)}if(canCellBeActive(row,prevCell)){return{row:row,cell:prevCell,posX:posX}}}}function gotoUp(row,cell,posX){var prevCell;while(true){if(--row<0){return null}prevCell=cell=0;while(cell<=posX){prevCell=cell;cell+=getColspan(row,cell)}if(canCellBeActive(row,prevCell)){return{row:row,cell:prevCell,posX:posX}}}}function gotoNext(row,cell,posX){var pos=gotoRight(row,cell,posX);if(pos){return pos}var firstFocusableCell=null;while(++row<getDataLength()+(options.enableAddRow?1:0)){firstFocusableCell=findFirstFocusableCell(row);if(firstFocusableCell!==null){return{row:row,cell:firstFocusableCell,posX:firstFocusableCell}}}return null}function gotoPrev(row,cell,posX){var pos;var lastSelectableCell;while(!pos){pos=gotoLeft(row,cell,posX);if(pos){break}if(--row<0){return null}cell=0;lastSelectableCell=findLastFocusableCell(row);if(lastSelectableCell!==null){pos={row:row,cell:lastSelectableCell,posX:lastSelectableCell}}}return pos}function navigateRight(){navigate("right")}function navigateLeft(){navigate("left")}function navigateDown(commitEditor){navigate("down",commitEditor)}function navigateUp(commitEditor){navigate("up",commitEditor)}function navigateNext(){navigate("next")}function navigatePrev(){navigate("prev")}function navigate(dir,commitEditor){if(!activeCellNode||!options.enableCellNavigation){return}if(commitEditor!=true){if(!getEditorLock().commitCurrentEdit()){return}}var stepFunctions={up:gotoUp,down:gotoDown,left:gotoLeft,right:gotoRight,prev:gotoPrev,next:gotoNext};var stepFn=stepFunctions[dir];var pos=stepFn(activeRow,activeCell,activePosX);if(pos){var isAddNewRow=(pos.row==getDataLength());scrollRowIntoView(pos.row,!isAddNewRow);setActiveCellInternal(getCellNode(pos.row,pos.cell),isAddNewRow||options.autoEdit);activePosX=pos.posX}}function getCellNode(row,cell){if(rowsCache[row]){var cells=$(rowsCache[row]).children();var nodeCell;for(var i=0;i<cells.length;i++){nodeCell=getCellFromNode(cells[i]);if(nodeCell===cell){return cells[i]}else{if(nodeCell>cell){return null}}}}return null}function setActiveCell(row,cell){if(row>getDataLength()||row<0||cell>=columns.length||cell<0){return}if(!options.enableCellNavigation){return}scrollRowIntoView(row,false);setActiveCellInternal(getCellNode(row,cell),false)}function canCellBeActive(row,cell){if(!options.enableCellNavigation||row>=getDataLength()+(options.enableAddRow?1:0)||row<0||cell>=columns.length||cell<0){return false}var rowMetadata=data.getItemMetadata&&data.getItemMetadata(row);if(rowMetadata&&typeof rowMetadata.focusable==="boolean"){return rowMetadata.focusable}var columnMetadata=rowMetadata&&rowMetadata.columns;if(columnMetadata&&columnMetadata[columns[cell].id]&&typeof columnMetadata[columns[cell].id].focusable==="boolean"){return columnMetadata[columns[cell].id].focusable}if(columnMetadata&&columnMetadata[cell]&&typeof columnMetadata[cell].focusable==="boolean"){return columnMetadata[cell].focusable}if(typeof columns[cell].focusable==="boolean"){return columns[cell].focusable}return true}function canCellBeSelected(row,cell){if(row>=getDataLength()||row<0||cell>=columns.length||cell<0){return false}var rowMetadata=data.getItemMetadata&&data.getItemMetadata(row);if(rowMetadata&&typeof rowMetadata.selectable==="boolean"){return rowMetadata.selectable}var columnMetadata=rowMetadata&&rowMetadata.columns&&(rowMetadata.columns[columns[cell].id]||rowMetadata.columns[cell]);if(columnMetadata&&typeof columnMetadata.selectable==="boolean"){return columnMetadata.selectable}if(typeof columns[cell].selectable==="boolean"){return columns[cell].selectable}return true}function gotoCell(row,cell,forceEdit){if(!canCellBeActive(row,cell)){return}if(!getEditorLock().commitCurrentEdit()){return}scrollRowIntoView(row,false);var newCell=getCellNode(row,cell);setActiveCellInternal(newCell,forceEdit||(row===getDataLength())||options.autoEdit);if(!currentEditor){setFocus()}}function commitCurrentEdit(){var item=getDataItem(activeRow);var column=columns[activeCell];var cellNode=getActiveCellNode();if(currentEditor){var defaultValue=currentEditor.defaultValue;if(currentEditor.isValueChanged()){var validationResults=currentEditor.validate();if(validationResults.valid){if(activeRow<getDataLength()){var editCommand={row:activeRow,cell:activeCell,editor:currentEditor,serializedValue:currentEditor.serializeValue(),prevSerializedValue:serializedEditorValue,execute:function(){this.editor.applyValue(item,this.serializedValue);updateRow(this.row)},undo:function(){this.editor.applyValue(item,this.prevSerializedValue);updateRow(this.row)}};if(options.editCommandHandler){makeActiveCellNormal();options.editCommandHandler(item,column,editCommand)}else{editCommand.execute();makeActiveCellNormal()}var isDurty=false;for(var ie=0;ie<editorItems.length;ie++){if(editorItems[ie][pId]==item[pId]){editorItems.splice(ie,1,item);isDurty=true;break}}if(!isDurty&&editorItems.length!=0){editorItems.push(item)}if(editorItems.length==0){editorItems.push(item)}if(editCommand.serializedValue!=serializedEditorValue){$(cellNode).addClass("slick-icon-edit-column")}var column=getColumns()[activeCell];if(column!=undefined&&typeof column.onChange=="function"){column.onChange({row:activeRow,cell:activeCell,item:item},item[column.id],defaultValue)}trigger(self.onCellChange,{row:activeRow,cell:activeCell,item:item})}else{var newItem={};currentEditor.applyValue(newItem,currentEditor.serializeValue());makeActiveCellNormal();trigger(self.onAddNewRow,{item:newItem,column:column})}return !getEditorLock().isActive()}else{$(activeCellNode).addClass("invalid");trigger(self.onValidationError,{editor:currentEditor,cellNode:activeCellNode,validationResults:validationResults,row:activeRow,cell:activeCell,column:column});currentEditor.focus();return validateFaild()}}makeActiveCellNormal()}return true}function validateFaild(){var item=getDataItem(activeRow);var column=columns[activeCell];var cellNode=getActiveCellNode();$(activeCellNode).addClass("invalid");$(activeCellNode).stop(true,true);var validationResults=currentEditor.validate();trigger(self.onValidationError,{editor:currentEditor,validationResults:validationResults,row:activeRow,cell:activeCell,column:column});currentEditor.focus();return false}function cancelCurrentEdit(){makeActiveCellNormal();return true}function rowsToRanges(rows){var ranges=[];var lastCell=columns.length-1;for(var i=0;i<rows.length;i++){ranges.push(new Slick.Range(rows[i],0,rows[i],lastCell))}return ranges}function getSelectedRows(){if(!selectionModel){throw"Selection model is not set"}return selectedRows}function getSelectedRowsById(){if(!selectionModel){throw""}return selectedRowIds}function setSelectedRows(rows){if(!selectionModel){throw"Selection model is not set"}selectionModel.setSelectedRanges(rowsToRanges(rows))}function filter(item){for(var columnId in columnFilters){if(columnId!==undefined&&columnFilters[columnId]!==""){var c=getColumns()[getColumnIndex(columnId)];if(item[c.field]||item[c.field]===0){if(options.collectionsDataArrayObject){var collection=options.collectionsDataArrayObject[c.field];if(collection){for(var i=0;i<collection.length;i++){if(collection[i].id==item[c.field].toString()){var field=collection[i].name;if(field.indexOf(columnFilters[columnId])==-1){return false}}}}else{var field=item[c.field].toString();if(field.indexOf(columnFilters[columnId])==-1){return false}}}}else{return false}}}return true}function getCollectionsDataArrayObject(){return options.collectionsDataArrayObject}function getColumnById(columnId){for(var i=0;i<columns.length;i++){if(columns[i].field==columnId){return columns[i]}}return null}function getEditorItems(){bl:for(var i=0;i<editorItems.length;i++){for(var j=0;j<addrows.length;j++){if(editorItems[i][pId]==addrows[j][pId]){addrows.splice(j,1,editorItems[i]);editorItems.splice(i,1);if(editorItems.length==0){break bl}}}}return editorItems}function updateHeaderRow(){for(var i=0;i<columns.length;i++){var column=columns[i];if(column.id!=="_checkbox_selector"&&column.id!=="_radio_selector"&&column.id!=="__no"&&!column.icon&&column.operate!=true){var header=getHeaderRowColumn(column.id);$(header).empty();$("<input type='text' title='过滤框' class='slick-grid-filter-input'>").data("columnId",columns[i].id).width($(header).width()-14).val(columnFilters[columns[i].id]).css("margin-top","3px").css("border","1px solid #7F9DB9").appendTo(header)}}}function updataData(data,row,name){var currentData=this.getData();var currentName;if(row<0||row>this.getDataLength()){return}else{var d=currentData[row];for(currentName in d){if(currentName==name.toLowerCase()){d[currentName]=data}}updateRow(row)}}function getSelectRowsDataToJSON(columns){var c=[],str="";c=getSelectedRows();if(c.length===0){c=data}str=columnToJSON(c,columns);return str}function getSelectRowsDataToObj(propertyKey){var select=[],objs=[];select=getSelectedRows();for(var i=0;i<select.length;i++){var objNew=getDataItem(select[i]);if(objNew){if(columnPropertyKey.length!=0){var rowObj={};for(var j in objNew){for(var jj=0;jj<columnPropertyKey.length;jj++){if(j==columnPropertyKey[jj]){rowObj[j]=objNew[j]}}}rowObj._row_=select[i];objs.push(rowObj)}else{objNew._row_=select[i];objs.push(objNew)}}}return objs}function columnToJSON(select,columns){var str="[";for(var i=0;i<select.length;i++){str+="{ ";var obj=getDataItem(select[i]);for(j in obj){if(columns&&columns.length>0){for(var k=0;k<columns.length;k++){if(columns[k]==j){str+=j+':"'+obj[j]+'",'}}}else{str+=j+':"'+obj[j]+'",'}}str=str.slice(0,-1);str+="}";if(i!=select.length-1){str+=","}}str+="]";return str}function itemToJSON(item,columns){var str="[";for(var i=0;i<item.length;i++){str+="{ ";var obj=item[i];for(j in obj){if(columns&&columns.length>0){for(var k=0;k<columns.length;k++){if(columns[k]==j){str+=j+':"'+obj[j]+'",'}}}else{str+=j+':"'+obj[j]+'",'}}str=str.slice(0,-1);str+="}";if(i!=item.length-1){str+=","}}str+="]";return str}function getDataView(){return dataView}function getDataByDataView(){if(dataView){var reData=dataView.getItems();return reData}else{return{}}}function getDataByDataViewWithoutId(){if(dataView){var reData=dataView.getItems();for(var i=0;i<reData.length;i++){delete reData[i][pId]}return reData}else{return{}}}function deleteDataRows(){var c=[],str,d=[];c=getSelectedRows();d=getSelectedRowsById();var dataView=getDataView();for(var i=0,l=c.length;i<l;i++){var data=dataView.getItemById(d[i]);delrows.push(data);dataView.deleteItem(data[pId]);removeRowFromCache(c[i]);if(options.selectType=="checkbox"){if(selectorTpye){selectorTpye.delete_selectedRowsLookup(c[i])}}}setSelectedRows(0);getDataView().refresh();refreshGrid();return str}function deleteRow(row){if(row=="undefined"){return false}var data=dataView.getItem(row);if(data._addflag==null){delrows.push(data);for(var i=0;i<editorItems.length;i++){if(editorItems[i][pId]==data.pId){editorItems.splice(i,1)}}}else{for(var i=0;i<addrows.length;i++){if(addrows[i]["_addflag"]==data._addflag){addrows.splice(i,1)}}}dataView.deleteItem(data[pId]);removeRowFromCache(row);if(options.selectType=="checkbox"){if(selectorTpye){selectorTpye.delete_selectedRowsLookup(row)}}setSelectedRows(0);getDataView().refresh();refreshGrid()}function refreshGrid(param){getDataView().refresh();updateRowCount();invalidateAllRows();render()}function addNewRow(columnValue){var data=getDataByDataView();var object={};if(data.length===0){object[pId]=0}else{var last=data[data.length-1];var addLast=addrows[addrows.length-1];if(addrows.length>0&&addLast[pId]>last[pId]){object[pId]=addLast[pId]+1}else{object[pId]=last[pId]+1}}for(var j in columnValue){object[j]=columnValue[j]}data.splice(0,0,object);object._addflag=new Date().getTime();addrows.push(object);idxById={};getDataView().updateIdxById();getDataView().ensureIdUniqueness();getDataView().refresh();refreshGrid();scrollRowIntoView(data.length)}function addNewRowTo(columnValue,rownum){var data=getDataByDataView();var object={};if(data.length===0){object[pId]=0}else{var last=data[data.length-1];var addLast=addrows[addrows.length-1];if(addrows.length>0&&addLast[pId]>last[pId]){object[pId]=addLast[pId]+1}else{object[pId]=last[pId]+1}}for(var j in columnValue){object[j]=columnValue[j]}data.splice(rownum,0,object);addrows.push(object);idxById={};getDataView().updateIdxById();getDataView().ensureIdUniqueness();getDataView().refresh();refreshGrid();scrollRowIntoView(data.length)}function addNewRowDown(columnValue){var data=getDataByDataView();var object={};if(data.length===0){object[pId]=0}else{var last=data[data.length-1];var addLast=addrows[addrows.length-1];if(addrows.length>0&&addLast[pId]>last[pId]){object[pId]=addLast[pId]+1}else{object[pId]=last[pId]+1}}for(var j in columnValue){object[j]=columnValue[j]}data.push(object);object._addflag=new Date().getTime();addrows.push(object);idxById={};getDataView().updateIdxById();getDataView().ensureIdUniqueness();getDataView().refresh();refreshGrid();scrollRowIntoView(data.length)}function getPager(){return pager}function getAddRow(){bl:for(var j=0;j<addrows.length;j++){for(var i=0;i<editorItems.length;i++){if(editorItems[i][pId]==addrows[j][pId]){addrows.splice(j,1,editorItems[i]);editorItems.splice(i,1);if(addrows.length==0){break bl}}}}return addrows}function getRemovedRows(){return delrows}function getGridId(){if(typeof container=="string"){return container.replace("#","")}else{return container}}function clearDirty(){setSelectedRows([]);editorItems=[];addrows=[];delrows=[];columnFilters={};if(pager&&pager!=undefined){pager.clearDirty()}$headerRow.find("input").each(function(i){$(this).val("")});trigger(self.onSelectedRowsChanged,{rows:getSelectedRows(),data:getSelectRowsDataToObj()},null)}function clearDirtyWidthOutPager(){setSelectedRows([]);editorItems=[];addrows=[];delrows=[];columnFilters={};$headerRow.find("input").each(function(i){$(this).val("")});trigger(self.onSelectedRowsChanged,{rows:getSelectedRows(),data:getSelectRowsDataToObj()},null)}function getContainer(){return $container}function getDefaultBox(){return{width:defaultWidth,height:defaultHeight}}function setColumnHidden(id){if(id==null||id.length==0){return}var columnNew=[];if(id!=null&&id instanceof Array){loop:for(var j=0;j<columns.length;j++){for(var i=0;i<id.length;i++){if(columns[j].field==id[i]){hiddenColumns.push(columns[j]);continue loop}}columnNew.push(columns[j])}}else{for(var i=0;i<columns.length;i++){if(columns[i].field==id){hiddenColumns.push(columns[i]);continue}columnNew.push(columns[i])}}setColumns(columnNew)}function setColumnShow(id){var columnNew=getColumns();for(var i=0;i<hiddenColumns.length;i++){if(hiddenColumns[i].field==id){columnNew.push(hiddenColumns[i]);hiddenColumns.splice(i,1);break}}setColumns(columnNew)}function showGridItemOperate(e,options){e.preventDefault();var columns=self.getColumns();var cellInfo=self.getCellFromEvent(e);$("#operation"+cellInfo.row).show()}function hideGridItemOperate(e,options){e.preventDefault();var columns=self.getColumns();var cellInfo=self.getCellFromEvent(e)}$.extend(this,{cmptype:"datagrid",slickGridVersion:"2.0a1",onScroll:new Slick.Event(),onSort:new Slick.Event(),onHeaderContextMenu:new Slick.Event(),onHeaderClick:new Slick.Event(),onMouseEnter:new Slick.Event(),onMouseLeave:new Slick.Event(),onClick:new Slick.Event(),onDblClick:new Slick.Event(),onContextMenu:new Slick.Event(),onKeyDown:new Slick.Event(),onAddNewRow:new Slick.Event(),onValidationError:new Slick.Event(),onViewportChanged:new Slick.Event(),onColumnsReordered:new Slick.Event(),onColumnsResized:new Slick.Event(),onCellChange:new Slick.Event(),onBeforeEditCell:new Slick.Event(),onBeforeCellEditorDestroy:new Slick.Event(),onBeforeDestroy:new Slick.Event(),onActiveCellChanged:new Slick.Event(),onActiveCellPositionChanged:new Slick.Event(),onDragInit:new Slick.Event(),onDragStart:new Slick.Event(),onDrag:new Slick.Event(),onDragEnd:new Slick.Event(),onSelectedRowsChanged:new Slick.Event(),onCellClick:new Slick.Event(),registerPlugin:registerPlugin,unregisterPlugin:unregisterPlugin,getColumns:getColumns,getHiddenColumns:getHiddenColumns,setColumns:setColumns,getColumnIndex:getColumnIndex,updateColumnHeader:updateColumnHeader,setSortColumn:setSortColumn,autosizeColumns:autosizeColumns,getOptions:getOptions,setOptions:setOptions,getData:getData,getDataLength:getDataLength,getDataItem:getDataItem,setData:setData,getSelectionModel:getSelectionModel,setSelectionModel:setSelectionModel,getSelectedRows:getSelectedRows,setSelectedRows:setSelectedRows,render:render,invalidate:invalidate,invalidateRow:invalidateRow,invalidateRows:invalidateRows,invalidateAllRows:invalidateAllRows,updateCell:updateCell,updateRow:updateRow,getViewport:getVisibleRange,resizeCanvas:resizeCanvas,updateRowCount:updateRowCount,scrollRowIntoView:scrollRowIntoView,getCanvasNode:getCanvasNode,getCellFromPoint:getCellFromPoint,getCellFromEvent:getCellFromEvent,getActiveCell:getActiveCell,setActiveCell:setActiveCell,getActiveCellNode:getActiveCellNode,getActiveCellPosition:getActiveCellPosition,resetActiveCell:resetActiveCell,editActiveCell:makeActiveCellEditable,getCellEditor:getCellEditor,getCellNode:getCellNode,getCellNodeBox:getCellNodeBox,canCellBeSelected:canCellBeSelected,canCellBeActive:canCellBeActive,navigatePrev:navigatePrev,navigateNext:navigateNext,navigateUp:navigateUp,navigateDown:navigateDown,navigateLeft:navigateLeft,navigateRight:navigateRight,gotoCell:gotoCell,getTopPanel:getTopPanel,showTopPanel:showTopPanel,hideTopPanel:hideTopPanel,showHeaderRowColumns:showHeaderRowColumns,hideHeaderRowColumns:hideHeaderRowColumns,getHeaderRow:getHeaderRow,getHeaderRowColumn:getHeaderRowColumn,getGridPosition:getGridPosition,flashCell:flashCell,addCellCssStyles:addCellCssStyles,setCellCssStyles:setCellCssStyles,removeCellCssStyles:removeCellCssStyles,updataData:updataData,destroy:destroy,getEditorLock:getEditorLock,getEditController:getEditController,getDataView:getDataView,getDataByDataView:getDataByDataView,getSelectRowsDataToJSON:getSelectRowsDataToJSON,deleteDataRows:deleteDataRows,addNewRow:addNewRow,addNewRowTo:addNewRowTo,addNewRowDown:addNewRowDown,getGridId:getGridId,refreshGrid:refreshGrid,getEditorItems:getEditorItems,clearDirty:clearDirty,getSelectRowsDataToObj:getSelectRowsDataToObj,getAddRow:getAddRow,getRemovedRows:getRemovedRows,deleteRow:deleteRow,getSelectedRowsById:getSelectedRowsById,setColumnHidden:setColumnHidden,setColumnShow:setColumnShow,getPager:getPager,getColumnById:getColumnById,getCollectionsDataArrayObject:getCollectionsDataArrayObject,clearDirtyWidthOutPager:clearDirtyWidthOutPager,setCheckedRows:setCheckedRows,getContainer:getContainer,getDefaultBox:getDefaultBox,addSelectRowsByData:addSelectRowsByData,cancelCheckedRowByData:cancelCheckedRowByData,cancelCheckedRowsByArray:cancelCheckedRowsByArray,checkedAllData:checkedAllData,cancelSelectedAllData:cancelSelectedAllData,showGridItemOperate:showGridItemOperate,hideGridItemOperate:hideGridItemOperate});init()}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery","TaJsUtil"],a)}else{a(jQuery)}}(function(f){f.extend(true,window,{Slick:{Data:{DataView:l,Aggregators:{Avg:e,Min:b,Max:a,Sum:g}}}});function l(Q,ak){var v=this;var J=new Slick.Data.GroupItemMetadataProvider();var ab={groupItemMetadataProvider:J,url:null};var ai="__id___";var K=[];var at=[];var y={};var I=null;var ac=null;var q=null;var T=false;var aw=true;var w;var r;var an;var z;var m;var u;var x=[];var aq={};var al;var P=false;var ah=0;var U=0;var ag=0;var X=0;var p=new Slick.Event();var s=new Slick.Event();var o=new Slick.Event();Q=f.extend(true,{},ab,Q);ak.registerPlugin(J);function A(){T=true}function aD(aE){T=false;az(aE)}function af(aG){aG=aG||0;var aH;for(var aF=aG,aE=K.length;aF<aE;aF++){aH=K[aF][ai];if(aH===undefined){throw"Each data element must implement a unique 'id' property"}y[aH]=aF}}function N(){var aG;for(var aF=0,aE=K.length;aF<aE;aF++){aG=K[aF][ai];if(aG===undefined||y[aG]!==aF){throw"Each data element must implement a unique 'id' property"}}}function G(){return K}function C(aI,aH){if(aH!==undefined){ai=aH}var aG=null;if(!jQuery.isArray(aI)){aG=aI.list||[];X=aI.total||0;var aE=ak.getPager();if(aE){aE.setStatus(X)}}else{aG=aI}for(var aF=0;aF<aG.length;aF++){if(!aG[aF].__group){aG[aF][ai]=aF}}K=aG;y={};af();N();az();if(typeof ak.getOptions().defaultRows=="function"){var aJ=ak.getOptions().defaultRows();ak.setCheckedRows(aJ)}else{if(ak.getOptions().defaultRows!=undefined&&ak.getOptions().defaultRows.length>0){ak.setCheckedRows(ak.getOptions().defaultRows)}}}function F(aE){if(aE.pageSize!=undefined){ah=aE.pageSize}if(aE.pageNum!=undefined){U=Math.min(aE.pageNum,Math.ceil(ag/ah))}o.notify(ar(),null,v);az()}function ar(){return{pageSize:ah,pageNum:U,totalRows:ag}}function ax(aG,aF){aw=aF;r=aG;w=null;if(aF===false){K.reverse()}K.sort(aG);if(aF===false){K.reverse()}for(var aE=0;aE<K.length;aE++){K[aE][ai]=aE}y={};af();az()}function Z(aG,aF){aw=aF;w=aG;r=null;var aE=Object.prototype.toString;Object.prototype.toString=(typeof aG=="function")?aG:function(){return this[aG]};if(aF===false){K.reverse()}K.sort();Object.prototype.toString=aE;if(aF===false){K.reverse()}y={};af();az()}function aC(){if(r){ax(r,aw)}else{if(w){Z(w,aw)}}}function E(aE){ac=aE;az()}function aB(aE,aF,aG){if(!Q.groupItemMetadataProvider){Q.groupItemMetadataProvider=new Slick.Data.GroupItemMetadataProvider()}an=aE;z=typeof an==="function";m=aF;u=aG;aq={};x=[];az()}function aA(aF,aE){al=aF;P=aE!==undefined?aE:P;az()}function Y(aE){return K[aE]}function ae(aE){return y[aE]}function aa(aG){if(!I){I={};for(var aF=0,aE=at.length;aF<aE;++aF){I[at[aF][ai]]=aF}}return I[aG]}function ap(aE){return K[y[aE]]}function aj(aF,aE){if(y[aF]===undefined||aF!==aE[ai]){throw"Invalid or non-matching id"}K[y[aF]]=aE;if(!q){q={}}q[aF]=true;az()}function M(aE,aF){K.splice(aE,0,aF);af(aE);az()}function av(aE){K.push(aE);af(K.length-1);az()}function t(aF){var aE=y[aF];if(aE===undefined){throw"Invalid id"}delete y[aF];K.splice(aE,1);af(aE);az()}function ay(){return at.length}function n(aE){var aF=at[aE];return aF}function au(aE){var aF=at[aE];if(aF===undefined){return null}if(aF.__group){return Q.groupItemMetadataProvider.getGroupRowMetadata(aF)}if(aF.__groupTotals){return Q.groupItemMetadataProvider.getTotalsRowMetadata(aF)}return null}function O(aE){aq[aE]=true;az()}function H(aE){delete aq[aE];az()}function am(){return x}function ao(aJ){var aK;var aL;var aE=[];var aI={};var aH;for(var aG=0,aF=aJ.length;aG<aF;aG++){aH=aJ[aG];aL=(z)?an(aH):aH[an];aK=aI[aL];if(!aK){aK=new Slick.Group();aK.count=0;aK.value=aL;aK.rows=[];aE[aE.length]=aK;aI[aL]=aK}aK.rows[aK.count++]=aH}return aE}function W(aJ){var aI,aE;if(aJ.collapsed&&!P){return}aE=al.length;while(aE--){al[aE].init()}for(var aF=0,aH=aJ.rows.length;aF<aH;aF++){aI=aJ.rows[aF];aE=al.length;while(aE--){al[aE].accumulate(aI)}}var aG=new Slick.GroupTotals();aE=al.length;while(aE--){al[aE].storeResult(aG)}aG.group=aJ;aJ.totals=aG}function L(aF){var aE=aF.length;while(aE--){W(aF[aE])}}function B(aF){var aE=aF.length,aG;while(aE--){aG=aF[aE];aG.collapsed=(aG.value in aq);aG.title=m?m(aG):aG.value}}function V(aF){var aG=[],aK=0,aN,aO,aM,aE;for(var aJ=0,aH=aF.length;aJ<aH;aJ++){aM=aF[aJ];if(ak.getOptions().groupingBy!=="_onlyTotals"){aG[aK++]=aM}if(!aM.collapsed){for(var aI=0,aL=aM.rows.length;aI<aL;aI++){aG[aK++]=aM.rows[aI]}}if(aM.totals&&(!aM.collapsed||P)){aG[aK++]=aM.totals}}return aG}function R(aK,aG){var aH=ah*U;var aM=aH+ah;var aE=0,aF=0,aN;var aJ=[];if(aG){for(var aI=0,aL=aK.length;aI<aL;++aI){aN=aK[aI];if(!aG||aG(aN)){if(!ah||(aE>=aH&&aE<aM)){aJ[aF]=aN;aF++}aE++}}}else{aJ=ah?aK.slice(aH,aM):aK.concat();aE=aK.length}return{totalRows:aE,rows:aJ}}function ad(aM,aI){var aL,aE,aF,aK=[];for(var aG=0,aJ=aM.length,aH=aI.length;aG<aH;aG++){if(aG>=aJ){aK[aK.length]=aG}else{aL=aI[aG];aE=aM[aG];if((an&&(aF=(aL.__nonDataRow)||(aE.__nonDataRow))&&aL.__group!==aE.__group||aL.__updated||aL.__group&&!aL.equals(aE))||(al&&aF&&(aL.__groupTotals||aE.__groupTotals))||aL[ai]!=aE[ai]||(q&&q[aL[ai]])){aK[aK.length]=aG}}}return aK}function D(aI,aF,aJ){I=null;var aE=[];var aG=R(aI,aJ);ag=aG.totalRows;aE=aG.rows;x=[];if(an!=null){x=ao(aE);if(x.length){B(x);if(al){L(x)}x.sort(u);aE=V(x)}}var aH=ad(aF,aE);at=aE;return aH}function az(aE){if(T){return}var aF=at.length;var aG=ag;var aH=D(K,at,ac);if(ah&&ag<U*ah){U=Math.floor(ag/ah);aH=D(K,at,ac)}q=null;if(aG!=ag){o.notify(ar(),null,v)}if(aF!=at.length){p.notify({previous:aF,current:at.length},null,v)}if(aH.length>0){s.notify({rows:aH},null,v)}if(!aE){ak.scrollRowIntoView(0)}}function S(){return X}return{beginUpdate:A,endUpdate:aD,setPagingOptions:F,getPagingInfo:ar,getItems:G,setItems:C,setFilter:E,sort:ax,fastSort:Z,reSort:aC,groupBy:aB,setAggregators:aA,collapseGroup:O,expandGroup:H,getGroups:am,getIdxById:ae,getRowById:aa,getItemById:ap,getItemByIdx:Y,refresh:az,updateItem:aj,insertItem:M,addItem:av,deleteItem:t,updateIdxById:af,ensureIdUniqueness:N,getLength:ay,getItem:n,getItemMetadata:au,onRowCountChanged:p,onRowsChanged:s,onPagingInfoChanged:o,getTotal:S}}function e(q,m){var p;var n;var o;this.init=function(){p=0;n=0;o=0};this.accumulate=function(r){var s=r[q];p++;if(s!=null&&s!=NaN){n++;o+=1*s}};this.storeResult=function(r){if(!r.avg){r.avg={}}if(n!=0){if(m){r.avg[q]=m(Number(o/n).toFixed(5))}else{r.avg[q]=d(Number(o/n).toFixed(5))}}}}function b(o,m){var n;this.init=function(){n=null};this.accumulate=function(p){var q=p[o];if(q!=null&&q!=NaN){if(n==null||q<n){n=q}}};this.storeResult=function(p){if(!p.min){p.min={}}if(m){p.min[o]=m(n)}else{p.min[o]=d(n)}}}function g(o,m){var n;this.init=function(){n=0};this.accumulate=function(p){var q=p[o];if(q!=null&&q!=NaN){n=Ta.util.floatAdd(n,Number(q))}};this.storeResult=function(p){if(!p.sum){p.sum={}}if(m){p.sum[o]=m(n)}else{p.sum[o]=d(n)}}}function a(o,n){var m;this.init=function(){m=null};this.accumulate=function(p){var q=p[o];if(q!=null&&q!=NaN){if(m==null||q>m){m=q}}};this.storeResult=function(p){if(!p.max){p.max={}}if(n){p.max[o]=n(m)}else{p.max[o]=d(m)}}}function d(n){var o=String(n);if(n!==""&&n!=undefined){var p;if(o.indexOf(".")>0){p=o.substring(0,o.indexOf("."));t_p=o.substring(o.indexOf("."));var m=/(-?\d+)(\d{3})/;while(m.test(p)){p=p.replace(m,"$1,$2")}o=p+t_p}else{var m=/(-?\d+)(\d{3})/;while(m.test(o)){o=o.replace(m,"$1,$2")}}}return o}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery","TaJsUtil","numberBox","datetimeMask","selectInput"],a)}else{a(jQuery)}}(function(a){var b={notNull:function(d){if(d==null||d==undefined||!d.length){return{valid:false,msg:"不能为空"}}else{return{valid:true,msg:null}}},SelectorCellFormatter:function(l,e,g,f,d){return(!d?"":l)},SelectInputFormatter:function(o,e,n,f,d){var g=n;if(!f.editordata){throw"下拉框数据不正确"}var m=f.editordata;for(var l=0;l<m.length;l++){if(m[l].id==n){g=m[l].name}}return g?g:""},MoneyFormatter:function(n,e,l,f,d){if(l===""||l==undefined){return""}else{var m=String(l);var o;if(m.indexOf(".")>0){o=m.substring(0,m.indexOf("."));t_p=m.substring(m.indexOf("."));var g=/(-?\d+)(\d{3})/;while(g.test(o)){o=o.replace(g,"$1,$2")}m=o+t_p}else{var g=/(-?\d+)(\d{3})/;while(g.test(m)){m=m.replace(g,"$1,$2")}}return"<div style='text-align:right;line-height:24px;'>￥"+m+"</div>"}},MoneyFormatterNo$:function(n,e,l,f,d){if(l===""||l==undefined){return""}else{var m=String(l);var o;if(m.indexOf(".")>0){o=m.substring(0,m.indexOf("."));t_p=m.substring(m.indexOf("."));var g=/(-?\d+)(\d{3})/;while(g.test(o)){o=o.replace(g,"$1,$2")}m=o+t_p}else{var g=/(-?\d+)(\d{3})/;while(g.test(m)){m=m.replace(g,"$1,$2")}}if(m.indexOf(".")<0){m+=".00"}else{if(m.substring(m.indexOf(".")).length<3){m+="0"}}return"<div style='text-align:right;line-height:24px;'>"+m+"</div>"}},PercentCompleteCellFormatter:function(l,e,g,f,d){if(g==null||g===""){return"-"}else{if(g<50){return"<span style='color:red;font-weight:bold;'>"+g+"%</span>"}else{return"<span style='color:green'>"+g+"%</span>"}}},GraphicalPercentCompleteCellFormatter:function(m,e,l,g,d){if(l==null||l===""){return""}var f;if(l<30){f="red"}else{if(l<70){f="silver"}else{f="green"}}return"<span class='percent-complete-bar' style='display:block;height:100%;line-height:24px;background:"+f+";width:"+l+"%'>"+l+"</span>"},YesNoCellFormatter:function(l,e,g,f,d){return g?"Yes":"No"},BoolCellFormatter:function(l,e,g,f,d){return g?"<img src='"+Base.globvar.basePath+"/ta/resource/themes/base/slickgrid/images/tick.png'>":""},TaskNameFormatter:function(m,e,l,f,d){var g="<span style='display:inline-block;height:1px;width:"+(2+15*d.indent)+"px'></span>";return g+" <img src='"+Base.globvar.basePath+"/ta/resource/themes/base/slickgrid/images/expand.gif'>&nbsp;"+l},ResourcesFormatter:function(m,e,g,f,d){var l=d.resources;if(!l||l.length==0){return""}if(f.width<50){return(l.length>1?"<center><img src='"+Base.globvar.basePath+"/ta/resource/themes/base/slickgrid/images/info.gif' ":"<center><img src='"+Base.globvar.basePath+"/ta/resource/themes/base/slickgrid/images/drag-handle.png' ")+" title='"+l.join(", ")+"'></center>"}else{return l.join(", ")}},selectInput:function(g,m,f){var n;var e;var d;var l=this;this.init=function(){n=a("<div />").appendTo(g.container);if(f.flexboxOption!=undefined){f.flexboxOption.onSelect=function(p,q){g.grid.getEditorLock().commitCurrentEdit()};e=n.flexbox(m,f.flexboxOption)}else{var o={};o.onSelect=function(p,q){g.grid.getEditorLock().commitCurrentEdit()};e=n.flexbox(m,o)}e[0].getInput().css("height",25).bind("keydown.nav",function(p){if(typeof f.onKeydown=="function"){f.onKeydown(p)}if(p.keyCode===37||p.keyCode===39){p.stopImmediatePropagation()}else{if(p.keyCode===13){g.grid.navigateRight()}}});a(e[0].getInput().next()[0]).css("top",5);e[0].setFocus()};this.destroy=function(){n.remove()};this.focus=function(){e[0].setFocus()};this.getValue=function(){return e[0].getValue(0)};this.setValue=function(o){e[0].setValue(o)};this.loadValue=function(o){d=o[g.column.field]||"";e[0].setValue(d);this.defaultValue=d};this.serializeValue=function(){return e[0].getValue(1)};this.applyValue=function(o,p){o[g.column.field]=p};this.isValueChanged=function(){return(!(e[0].getValue(1)==""&&d==null))&&(e[0].getValue(1)!=d)};this.validate=function(){if(g.column.validator){var o=g.column.validator(n.val());if(!o.valid){return o}}return{valid:true,msg:null}};this.init()},treeEditor:function(f,e,p){var m,n,g;var d;var l;var o=this;this.init=function(){m=a("<input style='height:20px' class='editor-text' type='text'/>").appendTo(f.container);m.bind("focus",function(){if(d==null){g=a("<div>").appendTo(f.container);n=a("<ul id='"+f.column.id+"'class='ztree' style='border:1px solid #aaa;-moz-box-shadow:2px 2px 5px #333333; -webkit-box-shadow:2px 2px 5px #333333; box-shadow:2px 2px 5px #333333;background-color:white;width:150px'>").appendTo(g);var q={view:{selectedMulti:false},data:{simpleData:{enable:true,idKey:"id",pIdKey:"pId",rootPId:null},keep:{parent:false,leaf:false}},callback:{onClick:function(r,t,s){m.val(s.id);f.grid.getEditorLock().commitCurrentEdit()}}};d=a.fn.zTree.init(n,q,e)}});m.bind("keydown.nav",function(q){if(typeof p.onKeydown=="function"){p.onKeydown(q)}if(q.keyCode===37||q.keyCode===39){q.stopImmediatePropagation()}else{if(q.keyCode===13){f.grid.navigateRight()}}});m.focus()};this.destroy=function(){m.remove();a.fn.zTree.destroy(f.column.id);g.remove()};this.focus=function(){m.focus()};this.getValue=function(){return m.val()};this.setValue=function(q){m.val(q)};this.loadValue=function(q){l=q[f.column.field]||"";m.val(l);this.defaultValue=l};this.serializeValue=function(){return m.val()};this.applyValue=function(q,r){q[f.column.field]=r};this.isValueChanged=function(){return(!(m.val()==""&&l==null))&&(m.val()!=l)};this.validate=function(){if(f.column.validator){var q=f.column.validator(m.val());if(!q.valid){return q}}return{valid:true,msg:null}};this.init()},selectGrid:function(l,o,g){var m;var e;var f;var d;var n=this;this.init=function(){$container=a("<span />").appendTo(l.container);var r=g.gridDatafn();var p=g.gridItemfn();var q=g.gridOptionfn();if(q.onEnter&&typeof q.onEnter=="function"){var s=q.onEnter;q.onEnter=function(t){return function(u){s(u);if(!u.getIsHidden()){l.grid.navigateRight()}}(t)}}m=new SelectGridEditor($container,p,r,q);m.getInput().focus()};this.destroy=function(){$container.remove()};this.focus=function(){m.getInput().focus()};this.getValue=function(){return m.getDescData()};this.setValue=function(p){m.setDescData(p)};this.loadValue=function(p){d=p[l.column.field]||"";m.setDescData(d);this.defaultValue=d};this.serializeValue=function(){return m.getDescData()};this.applyValue=function(p,q){p[l.column.field]=q};this.isValueChanged=function(){return true};this.validate=function(){if(l.column.validator){var p=l.column.validator($input.val());if(!p.valid){return p}}return{valid:true,msg:null}};this.init()},selectInputDesc:function(g,m,f){var n;var e;var d;var l=this;this.init=function(){n=a("<div />").appendTo(g.container);if(f.flexboxOption!=undefined){f.flexboxOption.allowInputOtherText=true;e=n.flexbox(m,f.flexboxOption)}else{e=n.flexbox(m,{allowInputOtherText:true})}e[0].getInput().css("height",25).blur(function(){g.grid.getEditorLock().commitCurrentEdit()}).bind("keydown.nav",function(o){if(typeof f.onKeydown=="function"){f.onKeydown(o)}if(o.keyCode===37||o.keyCode===39){o.stopImmediatePropagation()}else{if(o.keyCode===13){g.grid.navigateRight()}}});e[0].setFocus()};this.destroy=function(){n.remove()};this.focus=function(){e[0].setFocus()};this.getValue=function(){return e[0].getValue(0)};this.setValue=function(o){e[0].setValue(o)};this.loadValue=function(o){d=o[g.column.field]||"";e[0].setValue(d);this.defaultValue=d};this.serializeValue=function(){return e[0].getValue(0)};this.applyValue=function(o,p){o[g.column.field]=p};this.isValueChanged=function(){return(!(e[0].getValue(0)==""&&d==null))&&(e[0].getValue(0)!=d)};this.validate=function(){if(g.column.validator){var o=g.column.validator(n.val());if(!o.valid){return o}}return{valid:true,msg:null}};this.init()},text:function(f,m,e){var n;var d;var l=this;var g=(e.validType==undefined?"":e.validType);this.init=function(){var o="<INPUT type='text'";if(e.required=="true"){o+=" required='true'  class='editor-text"}else{o+=" class='editor-text"}if(g!=""){if(e.validFunction){o+=" validatebox-text' validType='"+g+"'  validFunction='"+e.validFunction+"'/>"}else{o+=" validatebox-text' validType='"+g+"'/>"}}else{o+="'/>"}n=a(o).appendTo(f.container).bind("keydown.nav",function(p){if(typeof e.onKeydown=="function"){e.onKeydown(p)}if(p.keyCode===37||p.keyCode===39){p.stopImmediatePropagation()}else{if(p.keyCode===13){f.grid.navigateRight()}}}).bind("keyup.nav",function(p){if(typeof e.onKeyup=="function"){e.onKeyup(p)}if(p.keyCode===37||p.keyCode===39){p.stopImmediatePropagation()}else{if(p.keyCode===13){}}}).bind("focus.nav",function(p){if(typeof e.onFocus=="function"){e.onFocus(p)}if(p.keyCode===37||p.keyCode===39){p.stopImmediatePropagation()}else{if(p.keyCode===13){}}}).blur(function(){f.grid.getEditorLock().commitCurrentEdit()}).focus().select();if(e.validType!=""){n.validatebox()}};this.destroy=function(){a(".validatebox-tip").remove();n.remove()};this.focus=function(){n.focus()};this.getValue=function(){return n.val()};this.setValue=function(o){n.val(o)};this.loadValue=function(o){d=o[f.column.field]||"";n.val(d);n[0].defaultValue=d;n.select();this.defaultValue=d};this.serializeValue=function(){return n.val()};this.applyValue=function(o,p){o[f.column.field]=p};this.isValueChanged=function(){return(!(n.val()==""&&d==null))&&(n.val()!=d)};this.validate=function(){var o=true;if(n.hasClass("validatebox-invalid")){o=false}return{valid:o,msg:null}};this.init()},date:function(g,m,f){var n;var d;var l=this;var e;this.init=function(){var o="<input type='text' class='editor-text datefield Wdate' validType='date' maxlength='10'";if(f.required=="true"){o+=" required='true'"}o+="/>";n=a(o);n.appendTo(g.container);n.bind("keydown.nav",function(p){if(typeof f.onKeydown=="function"){f.onKeydown(p)}if(p.keyCode===37||p.keyCode===39){p.stopImmediatePropagation()}else{if(p.keyCode===13){if(f.showSelectPanel!=undefined&&f.showSelectPanel==true){}else{g.grid.navigateRight()}}}}).focus(function(){if(f.showSelectPanel!=undefined&&f.showSelectPanel==true){WdatePicker({isShowWeek:false,el:n[0],errDealMode:1})}}).select().validatebox();n.datetimemask(1)};this.destroy=function(){a(".validatebox-tip").remove();n.remove()};this.focus=function(){n.focus()};this.getValue=function(){return n.val()};this.setValue=function(o){n.val(o)};this.loadValue=function(o){d=o[g.column.field]||"";n.val(d);n[0].defaultValue=d;n.select();this.defaultValue=d};this.serializeValue=function(){return n.val()};this.applyValue=function(o,p){o[g.column.field]=p};this.isValueChanged=function(){return(!(n.val()==""&&d==null))&&(n.val()!=d)};this.validate=function(){var o=true;if(n.hasClass("validatebox-invalid")){o=false}return{valid:o,msg:null}};this.init()},dateTime:function(f,l,e){var m;var d;var g=this;this.init=function(){var n="<input type='text' class='editor-text datetimefield Wdate' validType='datetime' maxlength='19'";if(e.required=="true"){n+=" required='true'"}n+="/>";m=a(n);m.appendTo(f.container);m.bind("keydown.nav",function(o){if(typeof e.onKeydown=="function"){e.onKeydown(o)}if(o.keyCode===37||o.keyCode===39){o.stopImmediatePropagation()}else{if(o.keyCode===13){if(e.showSelectPanel!=undefined&&e.showSelectPanel==true){}else{f.grid.navigateRight()}}}}).focus(function(){if(e.showSelectPanel!=undefined&&e.showSelectPanel==true){WdatePicker({isShowWeek:false,el:m[0],dateFmt:"yyyy-MM-dd HH:mm:ss",errDealMode:1})}}).select().validatebox();m.datetimemask(2)};this.destroy=function(){a(".validatebox-tip").remove();m.remove()};this.focus=function(){m.focus()};this.getValue=function(){return m.val()};this.setValue=function(n){m.val(n)};this.loadValue=function(n){d=n[f.column.field]||"";m.val(d);m[0].defaultValue=d;m.select();this.defaultValue=d};this.serializeValue=function(){return m.val()};this.applyValue=function(n,o){n[f.column.field]=o};this.isValueChanged=function(){return(!(m.val()==""&&d==null))&&(m.val()!=d)};this.validate=function(){var n=true;if(m.hasClass("validatebox-invalid")){n=false}return{valid:n,msg:null}};this.init()},issue:function(f,l,e){var m;var d;var g=this;this.init=function(){var n="<input type='text' class='editor-text issuefield Wdate' validType='issue' maxlength='6'";if(e.required=="true"){n+=" required='true'"}n+="/>";m=a(n);m.appendTo(f.container);m.bind("keydown.nav",function(o){if(typeof e.onKeydown=="function"){e.onKeydown(o)}if(o.keyCode===37||o.keyCode===39){o.stopImmediatePropagation()}else{if(o.keyCode===13){if(e.showSelectPanel!=undefined&&e.showSelectPanel==true){}else{f.grid.navigateRight()}}}}).focus(function(){if(e.showSelectPanel!=undefined&&e.showSelectPanel==true){WdatePicker({isShowWeek:false,el:m[0],dateFmt:"yyyyMM",errDealMode:1})}}).select().validatebox();m.datetimemask(3)};this.destroy=function(){a(".validatebox-tip").remove();m.remove()};this.focus=function(){m.focus()};this.getValue=function(){return m.val()};this.setValue=function(n){m.val(n)};this.loadValue=function(n){d=n[f.column.field]||"";m.val(d);m[0].defaultValue=d;m.select();this.defaultValue=d};this.serializeValue=function(){return m.val()};this.applyValue=function(n,o){n[f.column.field]=o};this.isValueChanged=function(){return(!(m.val()==""&&d==null))&&(m.val()!=d)};this.validate=function(){var n=true;if(m.hasClass("validatebox-invalid")){n=false}return{valid:n,msg:null}};this.init()},number:function(f,l,e){var m;var d;var g=this;this.init=function(){m=a("<INPUT type=text class='numberfield  editor-text'/>");if(e.max!=undefined){m.attr("max",e.max)}if(e.min!=undefined){m.attr("min",e.min)}if(e.precition!=undefined){m.attr("precision",e.precition)}m.bind("keydown.nav",function(n){if(typeof e.onKeydown=="function"){e.onKeydown(n)}if(n.keyCode===37||n.keyCode===39){n.stopImmediatePropagation()}});m.bind("keyup.nav",function(n){if(typeof e.onKeyup=="function"){e.onKeyup(n)}if(n.keyCode===37||n.keyCode===39){n.stopImmediatePropagation()}});m.bind("focus.nav",function(n){if(typeof e.onFocus=="function"){e.onFocus(n)}if(n.keyCode===37||n.keyCode===39){n.stopImmediatePropagation()}else{if(n.keyCode===13){}}});m.appendTo(f.container);m.numberbox(e);m.bind("keydown.nav",function(n){if(n.keyCode===13){f.grid.navigateRight()}});m.blur(function(){f.grid.getEditorLock().commitCurrentEdit()}).focus().select()};this.destroy=function(){a(".validatebox-tip").remove();m.remove()};this.focus=function(){m.focus()};this.loadValue=function(n){d=n[f.column.field];m.val(d);m[0].defaultValue=d;m.select();this.defaultValue=d};this.serializeValue=function(){return m.val()||0};this.applyValue=function(n,o){n[f.column.field]=o};this.isValueChanged=function(){var p=""+m.val();var n=""+d==null?"":d;var o=(!(p==""&&n==null))&&(p!=n);return o};this.validate=function(){if(isNaN(m.val())){return{valid:false,msg:"Please enter a valid integer"}}return{valid:true,msg:null}};this.init()},bool:function(g,m,f){var e;var d;var l=this;this.init=function(){e=a("<input type='checkbox' class='editor-checkbox'>");e.appendTo(g.container);e.blur(function(){g.grid.getEditorLock().commitCurrentEdit()}).focus()};this.destroy=function(){e.remove()};this.focus=function(){e.focus()};this.loadValue=function(n){d=n[g.column.field];if(d){e.attr("checked","checked")}else{e.removeAttr("checked")}this.defaultValue=d};this.serializeValue=function(){return e.attr("checked")};this.getValue=function(n){return a(n).val()};this.setValue=function(o,n){a(o).val(n)};this.applyValue=function(n,o){n[g.column.field]=o};this.isValueChanged=function(){return(e.attr("checked")!=d)};this.validate=function(){return{valid:true,msg:null}};this.init()},StarCellEditor:function(f){var l;var e;var g=this;function d(m){if(m.type=="keydown"&&m.which!=32){return}if(l.css("opacity")=="1"){l.css("opacity",0.5)}else{l.css("opacity",1)}m.preventDefault();m.stopPropagation();return false}this.init=function(){l=a("<IMG src='../resource/themes/base/slickgrid/images/bullet_star.png' align=absmiddle tabIndex=0 title='Click or press Space to toggle' />").bind("click keydown",d).appendTo(f.container).focus()};this.destroy=function(){l.unbind("click keydown",d);l.remove()};this.focus=function(){l.focus()};this.loadValue=function(m){e=m[f.column.field];l.css("opacity",e?1:0.2)};this.serializeValue=function(){return(l.css("opacity")=="1")};this.applyValue=function(m,n){m[f.column.field]=n};this.isValueChanged=function(){return e!=(l.css("opacity")=="1")};this.validate=function(){return{valid:true,msg:null}};this.init()},textArea:function(f,m,e){var n,l;var d;var g=this;this.init=function(){var o=a("body");l=a("<DIV style='z-index:10000;position:absolute;background:white;padding:5px;border:3px solid gray; -moz-border-radius:10px; border-radius:10px;'/>").appendTo(o);n=a("<TEXTAREA hidefocus rows=5 style='backround:white;width:250px;height:80px;border:0;outline:0'>").appendTo(l);a("<DIV style='text-align:right'><BUTTON>保存</BUTTON><BUTTON>取消</BUTTON></DIV>").appendTo(l);l.find("button:first").bind("click",this.save);l.find("button:last").bind("click",this.cancel);n.bind("keydown",this.handleKeyDown);g.position(f.position);n.focus().select()};this.handleKeyDown=function(o){if(o.which==13&&o.ctrlKey){g.save()}else{if(o.which==27){o.preventDefault();g.cancel()}else{if(o.which==9&&o.shiftKey){o.preventDefault();grid.navigatePrev()}else{if(o.which==9){o.preventDefault();grid.navigateNext()}}}}};this.save=function(){f.commitChanges()};this.cancel=function(){n.val(d);f.cancelChanges()};this.hide=function(){l.hide()};this.show=function(){l.show()};this.position=function(o){l.css("top",o.top-5).css("left",o.left-5)};this.destroy=function(){l.remove()};this.focus=function(){n.focus()};this.loadValue=function(o){n.val(d=o[f.column.field]);n.select();this.defaultValue=d};this.serializeValue=function(){return n.val()};this.applyValue=function(o,p){o[f.column.field]=p};this.isValueChanged=function(){return(!(n.val()==""&&d==null))&&(n.val()!=d)};this.validate=function(){return{valid:true,msg:null}};this.init()}};a.extend(window,b)}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery","TaJsUtil"],a)}else{a(jQuery)}}(function(b){b.extend(true,window,{Slick:{Data:{GroupItemMetadataProvider:a}}});function a(r){var n;var g={groupCssClass:"slick-group",totalsCssClass:"slick-group-totals",groupFocusable:true,totalsFocusable:false,toggleCssClass:"slick-group-toggle",toggleExpandedCssClass:"expanded",toggleCollapsedCssClass:"collapsed",enableExpandCollapse:true};r=b.extend(true,{},g,r);function m(w,s,v,t,u){if(!r.enableExpandCollapse){return u.title}return"<span class='"+r.toggleCssClass+" "+(u.collapsed?r.toggleCollapsedCssClass:r.toggleExpandedCssClass)+"'></span>"+u.title}function e(w,s,v,t,u){return(t.groupTotalsFormatter&&t.groupTotalsFormatter(u,t))||""}function q(s){n=s;n.onClick.subscribe(f);n.onKeyDown.subscribe(o)}function p(){if(n){n.onClick.unsubscribe(f);n.onKeyDown.unsubscribe(o)}}function f(u,s){var t=this.getDataItem(s.row);if(t&&t instanceof Slick.Group&&b(u.target).hasClass(r.toggleCssClass)){if(t.collapsed){this.getData().expandGroup(t.value)}else{this.getData().collapseGroup(t.value)}u.stopImmediatePropagation();u.preventDefault()}}function o(v,t){if(r.enableExpandCollapse&&(v.which==32)){var s=this.getActiveCell();if(s){var u=this.getDataItem(s.row);if(u&&u instanceof Slick.Group){if(u.collapsed){this.getData().expandGroup(u.value)}else{this.getData().collapseGroup(u.value)}v.stopImmediatePropagation();v.preventDefault()}}}}function d(s){return{selectable:false,focusable:false,cssClasses:r.groupCssClass,columns:{0:{colspan:"*",formatter:m,editor:null}}}}function l(s){return{selectable:false,focusable:r.totalsFocusable,cssClasses:r.totalsCssClass,formatter:e,editor:null}}return{init:q,destroy:p,getGroupRowMetadata:d,getTotalsRowMetadata:l}}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery","numberBox"],a)}else{a(jQuery)}}(function(b){function a(v,M,n,D,H){var I,d,f;var Q={};var L={};var U={};var e={};var p={};var F={};var w={};var y;var J;var m;var o=this;var S=-1,B=400,E=0;var z={pageSize:400,showCount:true,showButton:true,showExcel:true,showDetails:true,expKeyOrName:true};function T(){if(isNaN(D.pageSize)){var V=Base.globvar.pageSize;if(!isNaN(V)){D.pageSize=parseInt(V)}}D=b.extend(true,{},z,D);if(Number(D.pageSize)>99999){D.pageSize=99999}G()}function t(V){if(V>0||S>0){S=V==0?S:V;E=Number(f.val());B=Number(d.val());P();if(e.length==undefined||U.length==undefined){return}e.html("/"+Math.ceil(S/B));U.val((Math.ceil(E/B)+1));if(D.showCount==true){y.html("共 "+Math.ceil(S)+"条")}}else{if(S==-1){E=Number(f.val());B=Number(d.val());P();if(e.length==undefined){return}e.html("/"+Math.ceil(S/B));if(D.showCount==true){y.html("共 "+Math.ceil(0)+"条")}}else{E=Number(f.val());B=Number(d.val());P()}}}function P(){var V=x();if(Q.length){Q.attr("disabled",false).removeClass("slick-icon-page-first-dis").addClass("slick-icon-page-first");if(!V.canGotoFirst){Q.attr("disabled",true);Q.addClass("slick-icon-page-first-dis").removeClass("slick-icon-page-first")}}if(F.length){F.attr("disabled",false).removeClass("slick-icon-page-last-dis").addClass("slick-icon-page-last");if(!V.canGotoLast){F.attr("disabled",true);F.addClass("slick-icon-page-last-dis").removeClass("slick-icon-page-last")}}if(p.length){p.attr("disabled",false).removeClass("slick-icon-page-next-dis").addClass("slick-icon-page-next");if(!V.canGotoNext){p.attr("disabled",true);p.addClass("slick-icon-page-next-dis").removeClass("slick-icon-page-next")}}if(L.length){L.attr("disabled",false).removeClass("slick-icon-page-prev-dis").addClass("slick-icon-page-prev");if(!V.canGotoPrev){L.attr("disabled",true);L.addClass("slick-icon-page-prev-dis").removeClass("slick-icon-page-prev")}}}function r(V){D.url=V}function N(X,Y){if(typeof D.validateForm=="function"){if(!D.validateForm()){return}}var V=X?X:D.url;var W=D.submitIds!=undefined?D.submitIds+","+M.getGridId():M.getGridId();if(D.successCallBack==undefined){Base.submit(W,V,Y)}else{Base.submit(W,V,Y,null,null,D.successCallBack)}}function x(){var V=!Slick.GlobalEditorLock.commitCurrentEdit();return{canGotoFirst:!V&&Number(d.val())!=0&&Number(f.val())/Number(d.val())>0,canGotoLast:!V&&Number(d.val())!=0&&Math.ceil(S/B)>(Math.ceil(E/B)+1),canGotoPrev:!V&&Number(d.val())!=0&&Number(f.val())/Number(d.val())>0,canGotoNext:!V&&Number(d.val())!=0&&Math.ceil(S/B)>(Math.ceil(E/B)+1)}}function l(){P();f.val(0);N(D.url,D.param);M.clearDirtyWidthOutPager()}function g(){P();var V=(Math.ceil(S/B)-1)*B;f.val(V);N(D.url,D.param);M.clearDirtyWidthOutPager()}function u(){P();var V=Number(f.val())-Number(d.val());if(V<0){return}f.val(V);N(D.url,D.param);M.clearDirtyWidthOutPager()}function O(){if((Math.ceil(E/B)+1)==Math.ceil(S/B)){return}P();f.val(Number(f.val())+Number(d.val()));N(D.url,D.param);M.clearDirtyWidthOutPager()}function q(){var ae,ad;if(arguments[0]=="dangqian"){ae=M.getColumns();ad=M.getDataView().getItems()}else{if(arguments[0]=="xuanze"){ae=M.getColumns();ad=M.getSelectRowsDataToObj();ad=b.extend(true,[],ad);if(ad.length<1){Base.alert("请至少选择一条数据");return}}}var Z=M.getOptions().collectionsDataArrayObject;var ak=[];var ag=[];var ac=[];for(var Y=0;Y<ae.length;Y++){if(ae[Y].id!="_checkbox_selector"&&ae[Y].id!="__no"&&!ae[Y].icon){ag.push('"'+ae[Y].id+'"');ac.push('"'+ae[Y].name+'"')}}ak.push(ac);for(var Y=0;Y<ad.length;Y++){var ai=[];for(var X=0;X<ag.length;X++){var V=ad[Y][ag[X].replaceAll('"',"")];if(V==undefined||V===""){V=""}else{V=JSON.stringify(V.toString());V=V.substring(1,V.length-1)}if(D.expKeyOrName==true&&Z!=undefined){var af=Z[ag[X].replaceAll('"',"")];var W=false;if(af&&af.length>0){for(var aa=0;aa<af.length;aa++){if(af[aa].id==V){var ah=af[aa].name;ah=JSON.stringify(ah.toString());ai.push(ah);W=false;break}else{W=true}}if(W){ai.push('"'+V+'"')}}else{if(!W){ai.push('"'+V+'"')}}}else{ai.push('"'+V+'"')}}ak.push(ai)}var ab=b("<textarea/>").attr("display","none").val(Ta.util.obj2string(ak)).attr("name","_grid_item_export_excel");var aj=b("<form/>").append(ab).attr("method","post").attr("display","none").appendTo("body").attr("action",Base.globvar.contextPath+"/exportGridDefaultExcel.do").submit().remove()}function R(){if(M.getDataView().getItems().length==0){Base.alert("数据不能为空");return}var aa=M.getColumns();var X=[];var V=M.getCollectionsDataArrayObject();if(D.expKeyOrName==true){for(var ab in V){X.push('"'+ab+'"')}}var af=[];var ac=[];var Z=[];for(var W=0;W<aa.length;W++){if(aa[W].id!="_checkbox_selector"&&aa[W].id!="__no"&&!aa[W].icon){ac.push('"'+aa[W].id+'"');Z.push('"'+encodeURI(aa[W].name)+'"')}}af.push(Z);af.push(ac);if(D.sqlStatementName&&D.resultType){var ae=[],ad=[];ae.push('"'+D.sqlStatementName+'"');ad.push('"'+D.resultType+'"');af.push(ae);af.push(ad)}else{Base.alert("导出全部数据必须设置sqlStatementName和resultType属性");return}af.push(X);var Y=b("<textarea id='_gridHead_'/>").css("display","none").val(Ta.util.obj2string(af)).attr("name","_gridHead_");Y.appendTo("body");s("_gridHead_,"+M.getOptions().pagingOptions.submitIds,Base.globvar.contextPath+"/exportGridDataAllExcel.do");Y.remove()}function s(Y,X){Y=Y?Y:"";var ae=Y.split(",");var ab="";var W=[];if(ae){for(var ad=0;ad<ae.length;ad++){if(ae[ad]==null||ae[ad]==""){continue}var ac=Base.getObj(ae[ad]);var V=b(ac);if(ac&&ac.cmptype!="datagrid"&&(V.hasClass("panel")||V.hasClass("grid")||ac.cmptype=="flexbox"||(ac.tagName&&(ac.tagName=="FORM"||ac.tagName=="FIELDSET"||ac.tagName=="DIV"||ac.tagName=="INPUT"||ac.tagName=="TEXTAREA"||ac.tagName=="SELECT")))){if(ac.cmptype=="flexbox"){ac=b("#"+ae[ad])}for(var aa=0;aa<ae.length;aa++){if(ae[aa]==null||ae[aa]==""){continue}var Z=Base.getObj(ae[aa]);if(Z.cmptype=="flexbox"){Z=b("#"+ae[aa])}if(ad!=aa&&Z.cmptype!="datagrid"){if(b(ac).has(b(Z)).length>0){alert(ae[aa]+"对象在"+ae[ad]+"对象里面，指定提交的元素id不能有包含与被包含关系");return false}if(b(Z).has(b(ac)).length>0){alert(ae[ad]+"对象在"+ae[aa]+"对象里面，指定提交的元素id不能有包含与被包含关系");return false}}}if(ab==""){ab+=b("#"+ae[ad]).taserialize()}else{ab+="&"+b("#"+ae[ad]).taserialize()}}else{if(ac.cmptype=="datagrid"){W.push(new String(ae[ad]));if(ab==""){ab+=b("#"+ae[ad]).taserialize()}else{ab+="&"+b("#"+ae[ad]).taserialize()}ae[ad]=null}else{alert("提交的submit ids只能是panel,fieldset,box,form elements,form,div,datagrid这些元素的id");return false}}}}location.href=X+"?"+ab}function A(){J.show();m.hide();var V=b("body").find("div.l-layout-left,div.l-layout-right,div.l-layout-center,div.l-layout-top,div.l-layout-bottom");$handler=b("body").find("div.l-layout-drophandle-left,div.l-layout-drophandle-right,div.l-layout-drophandle-top,div.l-layout-drophandle-bottom,div.l-layout-collapse-left,div.l-layout-collapse-right").not(":hidden");if(V.length>0||$handler.length>0){M.getContainer().width(b(window).width()-2);M.getContainer().height(b(window).height()-2);M.getContainer().addClass("slick-full-canvas-fixed");M.resizeCanvas(true);$handler.hide();V.css({position:"static"})}else{M.getContainer().width(b(window).width()-2);M.getContainer().height(b(window).height()-2);M.getContainer().addClass("slick-full-canvas");M.resizeCanvas(true)}}function C(){J.hide();m.show();var V=M.getDefaultBox();var W=b("body").find("div.l-layout-left,div.l-layout-right,div.l-layout-center,div.l-layout-top,div.l-layout-bottom");if(W.length>0||$handler.length>0){M.getContainer().width("100%").height(V.height).removeClass("slick-full-canvas-fixed");M.resizeCanvas(true);W.css({position:"absolute"});$handler.show()}else{M.getContainer().width("100%").height(V.height).removeClass("slick-full-canvas");M.resizeCanvas(true)}}function G(){n.empty();var ae=b("<div class='slick-pager-nav-dis'/>").appendTo(n);if(D.showDetails){var af='<select class="slick-pagination-page-list"><option>10</option><option>50</option><option>200</option><option>300</option><option>400</option><option>500</option><option>1000</option></select>';w=b(af);w.appendTo(ae);w.change(function(ai){B=Number(b(this).val());d.val(B);P();N(D.url,D.param);M.clearDirtyWidthOutPager()});b("<span class='tool-separator'/>").appendTo(ae)}if(D.showButton){Q=b('<button type="button"/>').addClass("slick-icon-page-button slick-icon-page-first-dis").appendTo(ae).mouseover(function(){b(this).addClass("x-btn-over")}).mouseout(function(){b(this).removeClass("x-btn-over")}).click(l).attr("disabled",true);L=b('<button type="button"/>').addClass("slick-icon-page-button slick-icon-page-prev-dis").appendTo(ae).click(u).attr("disabled",true);b("<span class='tool-separator'/>").appendTo(ae)}if(D.showDetails){U=b("<input>").numberbox().addClass("slick-pagination-page").appendTo(ae).val("1").change(function(){E=Number(this.value)-1;if(Number(E)=="NaN"||Number(E)<0){b(this).val(1);Base.alert("请输入正整数");return}if(E>=e.html().substring(1,e.html().length)){Base.alert("超出总页数,将返回最后一页","error");b(this).val(e.html().substring(1,e.html().length));E=Number(this.value)-1}f.val(E*B);P();N(D.url,D.param);M.clearDirtyWidthOutPager()}).keyup(function(ai){if(ai.keyCode==13){b(this).blur();if(b.browser.msie){E=Number(this.value)-1;if(Number(E)=="NaN"||Number(E)<=0){b(this).val(1);Base.alert("请输入正整数");return}if(E>=e.html().substring(1,e.html().length)){Base.alert("超出总页数,将返回最后一页","error");b(this).val(e.html().substring(1,e.html().length));E=Number(this.value)-1}f.val(E*B);P();N(D.url,D.param);M.clearDirtyWidthOutPager()}}});e=b("<span>").addClass("slick-pager-font").html("/1").appendTo(ae);b("<span class='tool-separator'/>").appendTo(ae)}if(D.showButton){p=b('<button type="button"/>').addClass("slick-icon-page-button slick-icon-page-next-dis").appendTo(ae).click(O).attr("disabled",true);F=b('<button class="slick-icon-page-button slick-icon-page-last-dis" type="button"/>').appendTo(ae).click(g).attr("disabled",true);b("<span class='tool-separator'/>").appendTo(ae)}d=b('<input id="'+M.getGridId()+'_limit" type="hidden" name="gridInfo[\''+M.getGridId()+'_limit\']" value="'+D.pageSize+'"/>').appendTo(n);f=b('<input id="'+M.getGridId()+'_start" type="hidden" name="gridInfo[\''+M.getGridId()+'_start\']" value="-1"/>').appendTo(n).val(0);var ah=b("<span class='slick-pager-settings'/>").appendTo(n);if(D.showCount){y=b("<span>").html("共"+0+"条&nbsp").appendTo(ae)}if(D.buttons){for(var ac=0;ac<D.buttons.length;ac++){D.buttons[ac].appendTo(ah)}}if(D.showExcel){var Y=b('<button class="sexybutton toolbarbt" type="button"/>').html('<span class="icon-excel icon16" title="导出"/>').appendTo(ah);var ag=M.getGridId()+"mm";var W=b('<div id="'+ag+'" class="slick-pageToolExcelContent"></div>');var ab=M.getGridId()+"_dangqian_";var V=M.getGridId()+"_xuanze_";var aa=M.getGridId()+"_quanbu_";var X=[],ad="";if(D.selectExpButtons){X=D.selectExpButtons.split(",");for(var Z=0;Z<X.length;Z++){if(X[Z]==1){ad+='<div id="'+ab+'" class="slick-datagrid-exp" title="导出当前页">导出当前页</div>'}else{if(X[Z]==2){ad+='<div id="'+V+'" class="slick-datagrid-exp" title="导出选择数据">导出选择数据</div>'}else{if(X[Z]==3){ad+='<div id="'+aa+'" class="slick-datagrid-exp" title="导出全部数据">导出全部数据</div>'}}}}}else{ad+='<div id="'+ab+'" class="slick-datagrid-exp" title="导出当前页">导出当前页</div><div id="'+V+'" class="slick-datagrid-exp" title="导出选择数据">导出选择数据</div><div id="'+aa+'" class="slick-datagrid-exp" title="导出全部数据">导出全部数据</div>'}W.append(ad);Y.after(W).click(function(ak){var aj=Y.position();var ai=aj.top-W.outerHeight(true);W.css({top:ai,left:aj.left-55-8});W.show()});b("#"+ab).click(function(){q("dangqian");W.hide()});b("#"+V).click(function(){q("xuanze");W.hide()});b("#"+aa).click(function(){R();W.hide()})}if(D.showToFull||true){J=b('<button class="sexybutton toolbarbt" type="button"/>').html('<span class="icon-arrow-in icon16" title="最小化"/>').appendTo(ah).css("display","none").click(C)}if(D.showToFull||true){m=b('<button class="sexybutton toolbarbt" type="button"/>').html('<span class="icon-arrow-out icon16" title="最大化"/>').appendTo(ah).click(A)}n.children().wrapAll("<div class='slick-pager' />")}function K(){f.val(0);S=-1;E=0;P();t(S)}b(function(){b("body").bind("mousedown",function(V){if(!(V.target.id==(M.getGridId()+"mm")||b(V.target).parents("#"+M.getGridId()+"mm").length>0)){b("#"+M.getGridId()+"mm").hide()}})});b.extend(this,{setStatus:t,setPagerUrl:r,clearDirty:K});T();return o}b.extend(true,window,{Slick:{Controls:{Pager:a}}})}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery","TaJsUtil"],a)}else{a(jQuery)}}(function(a){a.extend(true,window,{Slick:{RadioSelectColumn:b}});function b(s){var m;var l=this;var r={};var f={columnId:"_radio_selector",cssClass:null,toolTip:"Select/Deselect Only One",width:30};var p=a.extend(true,{},f,s);function q(t){m=t;m.onSelectedRowsChanged.subscribe(n);m.onClick.subscribe(g)}function o(){m.onSelectedRowsChanged.unsubscribe(n);m.onClick.unsubscribe(g)}function n(x,t){var w=m.getSelectedRows();var v={},y,u;for(u=0;u<w.length;u++){y=w[u];v[y]=true;if(v[y]!==r[y]){m.invalidateRow(y);delete r[y]}}for(u in r){m.invalidateRow(u)}r=v;m.render()}function g(v,t){if(m.getColumns()[t.cell].id===p.columnId&&a(v.target).is(":radio")){if(m.getEditorLock().isActive()&&!m.getEditorLock().commitCurrentEdit()){v.preventDefault();v.stopImmediatePropagation();return}if(r[t.row]){m.setSelectedRows(a.grep(m.getSelectedRows(),function(w){return w!=t.row}))}else{var u=[];u[0]=t.row;m.setSelectedRows(u)}v.stopPropagation();v.stopImmediatePropagation()}}function e(){return{id:p.columnId,toolTip:p.toolTip,field:"sel",width:p.width,resizable:false,sortable:false,cssClass:p.cssClass,formatter:d}}function d(x,u,w,v,t){if(t){return r[x]?"<input type='radio' checked='checked'>":"<input type='radio'>"}return null}a.extend(this,{init:q,destroy:o,getColumnDefinition:e})}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery","TaJsUtil"],a)}else{a(jQuery)}}(function(b){b.extend(true,window,{Slick:{RowSelectionModel:a}});function a(f){var t;var q=[];var m=this;var s;var u={selectActiveRow:true};function v(z){s=b.extend(true,{},u,f);t=z;t.onActiveCellChanged.subscribe(x);t.onKeyDown.subscribe(p);t.onClick.subscribe(o)}function y(){t.onActiveCellChanged.unsubscribe(x);t.onKeyDown.unsubscribe(p);t.onClick.unsubscribe(o)}function g(z){var C=[];for(var B=0;B<z.length;B++){for(var A=z[B].fromRow;A<=z[B].toRow;A++){C.push(A)}}return C}function l(C){var A=[];var z=t.getColumns().length-1;for(var B=0;B<C.length;B++){A.push(new Slick.Range(C[B],0,C[B],z))}return A}function w(C,B){var z,A=[];for(z=C;z<=B;z++){A.push(z)}for(z=B;z<C;z++){A.push(z)}return A}function e(){return g(q)}function n(z){d(l(z))}function d(z){q=z;m.onSelectedRangesChanged.notify(q)}function r(){return q}function x(A,z){if(s.selectActiveRow&&(z.grid.getOptions().selectType==="checkbox")==false){d([new Slick.Range(z.row,0,z.row,t.getColumns().length-1)])}}function p(E){var A=t.getActiveCell();if(A&&E.shiftKey&&!E.ctrlKey&&!E.altKey&&!E.metaKey&&(E.which==38||E.which==40)){var D=e();D.sort(function(F,G){return F-G});if(!D.length){D=[A.row]}var C=D[0];var z=D[D.length-1];var B;if(E.which==40){B=A.row<z||C==z?++z:++C}else{B=A.row<z?--z:--C}if(B>=0&&B<t.getDataLength()){t.scrollRowIntoView(B);q=l(w(C,z));d(q)}E.preventDefault();E.stopPropagation()}}function o(E){var A=t.getCellFromEvent(E);if(!A||!t.canCellBeActive(A.row,A.cell)){return false}var C=g(q);var z=b.inArray(A.row,C);if(!E.ctrlKey&&!E.shiftKey&&!E.metaKey){return true}else{if((t.getOptions().selectType==="radio")==true){return true}else{if(t.getOptions().multiSelect){if(z===-1&&(E.ctrlKey||E.metaKey)){C.push(A.row);t.setActiveCell(A.row,A.cell)}else{if(z!==-1&&(E.ctrlKey||E.metaKey)){C=b.grep(C,function(I,H){return(I!==A.row)});t.setActiveCell(A.row,A.cell)}else{if(C.length&&E.shiftKey){var D=C.pop();var G=Math.min(A.row,D);var F=Math.max(A.row,D);C=[];for(var B=G;B<=F;B++){if(B!==D){C.push(B)}}C.push(D);t.setActiveCell(A.row,A.cell)}}}}}}q=l(C);d(q);E.stopImmediatePropagation();return true}b.extend(this,{getSelectedRows:e,setSelectedRows:n,getSelectedRanges:r,setSelectedRanges:d,init:v,destroy:y,onSelectedRangesChanged:new Slick.Event()})}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(e){function l(q){e(q).appendTo("body");e(q).addClass("menu-top");var o=[];p(e(q));for(var n=0;n<o.length;n++){var r=o[n];m(r);r.find(">div.menu-item").each(function(){s(e(this))});r.find("div.menu-item").click(function(){if(!this.submenu){d(q)}return false})}function p(t){o.push(t);t.find(">div").each(function(){var v=e(this);var u=v.find(">div");if(u.length){u.insertAfter(q);v[0].submenu=u;p(u)}})}function s(t){t.hover(function(){t.siblings().each(function(){if(this.submenu){a(this.submenu)}e(this).removeClass("menu-active")});t.addClass("menu-active");var u=t[0].submenu;if(u){var v=t.offset().left+t.outerWidth()-2;if(v+u.outerWidth()>e(window).width()){v=t.offset().left-u.outerWidth()+2}b(u,{left:v,top:t.offset().top-3})}},function(v){t.removeClass("menu-active");var u=t[0].submenu;if(u){if(v.pageX>=parseInt(u.css("left"))){t.addClass("menu-active")}else{a(u)}}else{t.removeClass("menu-active")}})}function m(t){t.addClass("menu").find(">div").each(function(){var w=e(this);if(w.hasClass("menu-sep")){w.html("&nbsp;")}else{var x=w.addClass("menu-item").html();w.empty().append(e('<div class="menu-text"></div>').html(x));var v=w.attr("icon");if(v){e('<div class="menu-icon"></div>').addClass(v).appendTo(w)}if(w[0].submenu){e('<div class="menu-rightarrow"></div>').appendTo(w)}if(e.boxModel==true){var u=w.height();w.height(u-(w.outerHeight()-w.height()))}}});t.hide()}}function g(n){var m=n.data;d(m);return false}function d(n){var m=e.data(n,"menu").options;a(e(n));e(document).unbind(".menu");m.onHide.call(n);return false}function f(n,o){var m=e.data(n,"menu").options;if(o){m.left=o.left;m.top=o.top}b(e(n),{left:m.left,top:m.top},function(){e(document).bind("click.menu",n,g);m.onShow.call(n)})}function b(m,o,n){if(!m){return}if(o){m.css(o)}m.show(1,function(){if(!m[0].shadow){m[0].shadow=e('<div class="menu-shadow"></div>').insertAfter(m)}m[0].shadow.css({display:"block",zIndex:e.fn.menu.defaults.zIndex++,left:m.css("left"),top:m.css("top"),width:m.outerWidth(),height:m.outerHeight()});m.css("z-index",e.fn.menu.defaults.zIndex++);if(n){n()}})}function a(n){if(!n){return}m(n);n.find("div.menu-item").each(function(){if(this.submenu){a(this.submenu)}e(this).removeClass("menu-active")});function m(o){if(o[0].shadow){o[0].shadow.hide()}o.hide()}}e.fn.menu=function(m,n){if(typeof m=="string"){switch(m){case"show":return this.each(function(){f(this,n)});case"hide":return this.each(function(){d(this)})}}m=m||{};return this.each(function(){var o=e.data(this,"menu");if(o){e.extend(o.options,m)}else{o=e.data(this,"menu",{options:e.extend({},e.fn.menu.defaults,m)});l(this)}e(this).css({left:o.options.left,top:o.options.top})})};e.fn.menu.defaults={zIndex:110000,left:0,top:0,onShow:function(){},onHide:function(){}}}));(function(b){b.extend(true,window,{YHUI:{Menu:a}});function a(f,n,e,x,w){var m={width:"140px",dataType:"children"};var q={id:"id",pid:"pid",name:"name",href:"name",icon:"icon",text:"text",onClick:"onClick",menuType:"menuType",cssStyle:"cssStyle",cssClass:"cssClass",children:"children",px:"px"};var g;var d;var l=[];function u(){g=b("#"+f);x=b.extend({},m,x);q=b.extend({},q,w);s(n)}function p(B){var A=999999999999;var y=0;for(var z=0;z<B.length;z++){if(A>B[z]){A=B[z][q.id];y=z}}return B[y]}function o(z){for(var y=0;y<n.length;y++){if(z[q.id]==n[y][q.pid]){if(z[q.children]==undefined){z[q.children]=[]}z[q.children].push(n[y]);o(n[y])}}}function v(D,y){l.push(y);for(var C=0;C<D.length;C++){var B=D[C];if(B[q.menuType]=="menu-sep"){b('<div class="menu-sep">').appendTo(y)}else{var E="<div ";if(B[q.id]){E+=' id="'+B[q.id]+'"'}if(B[q.onClick]){E+=' onclick="'+B[q.onClick]+'"'}if(B[q.icon]){E+=' icon="'+B[q.icon]+'"'}E+=' style="width:140px"/>';var A=b(E).appendTo(y);if(B[q.children]&&B[q.children].length>0){B[q.children].sort(function(I,H){return I[q.px]-H[q.px]});if(B[q.text]){A.html("<span>"+B[q.text]+"</span>")}var F="<div ";if(B[q.cssStyle]){F+=' cssStyle="'+B[q.cssStyle]+'"'}if(B[q.cssClass]){F+=' cssClass="'+B[q.cssClass]+'"'}F+="/>";var z=b(F).appendTo(A);v(B[q.children],z)}else{if(B[q.menuType]=="checkbox"||B[q.menuType]=="radio"){var G="<span><input onClick='event.stopPropagation();' type='"+B[q.menuType]+"' name='"+B[q.name]+"'/>"+(B[q.text]?B[q.text]:"")+"</span>";A.append(G)}else{if(B[q.href]&&B[q.text]!=undefined){A.html('<a href="'+B[q.href]+'">'+B[q.text]+"</a>")}else{if(B[q.text]!=undefined){A.html(B[q.text])}}}if(B[q.cssStyle]){A.css(B[q.cssStyle])}if(B[q.cssClass]){A.addClass(B[q.cssClass])}}}}}function t(z,y,B){if(z==undefined){return}else{var A=Base.getJson(y,z,B);s(A)}}function s(B){for(var z=0;z<l.length;z++){l[z].remove()}var A=[];if(x.dataType=="tree"){var y=p(B);o(y);A.push(y)}else{A=B}d=b('<div id="'+f+'_menu">').css("width",x.width).appendTo("body");v(A,d);d.menu();g.click(function(C){b(d).menu("show",{left:C.pageX,top:C.pageY})})}function r(z,y){this[z]=y}b.extend(this,{extendFn:r,cmptype:"menu",UIVersion:"1.0",setMenuData:s,loadDataFromUrl:t});u()}}(jQuery));(function(a){if(typeof define==="function"&&define.amd){define(["jquery","TaJsUtil"],a)}else{a(jQuery)}}(function(a){var b="123456|password|12345678|1234|pussy|12345|dragon|qwerty|696969|mustang|letmein|baseball|master|michael|football|shadow|monkey|abc123|pass|fuckme|6969|jordan|harley|ranger|iwantu|jennifer|hunter|fuck|2000|test|batman|trustno1|thomas|tigger|robert|access|love|buster|1234567|soccer|hockey|killer|george|sexy|andrew|charlie|superman|asshole|fuckyou|dallas|jessica|panties|pepper|1111|austin|william|daniel|golfer|summer|heather|hammer|yankees|joshua|maggie|biteme|enter|ashley|thunder|cowboy|silver|richard|fucker|orange|merlin|michelle|corvette|bigdog|cheese|matthew|121212|patrick|martin|freedom|ginger|blowjob|nicole|sparky|yellow|camaro|secret|dick|falcon|taylor|111111|131313|123123|bitch|hello|scooter|please|porsche|guitar|chelsea|black|diamond|nascar|jackson|cameron|654321|computer|amanda|wizard|xxxxxxxx|money|phoenix|mickey|bailey|knight|iceman|tigers|purple|andrea|horny|dakota|aaaaaa|player|sunshine|morgan|starwars|boomer|cowboys|edward|charles|girls|booboo|coffee|xxxxxx|bulldog|ncc1701|rabbit|peanut|john|johnny|gandalf|spanky|winter|brandy|compaq|carlos|tennis|james|mike|brandon|fender|anthony|blowme|ferrari|cookie|chicken|maverick|chicago|joseph|diablo|sexsex|hardcore|666666|willie|welcome|chris|panther|yamaha|justin|banana|driver|marine|angels|fishing|david|maddog|hooters|wilson|butthead|dennis|fucking|captain|bigdick|chester|smokey|xavier|steven|viking|snoopy|blue|eagles|winner|samantha|house|miller|flower|jack|firebird|butter|united|turtle|steelers|tiffany|zxcvbn|tomcat|golf|bond007|bear|tiger|doctor|gateway|gators|angel|junior|thx1138|porno|badboy|debbie|spider|melissa|booger|1212|flyers|fish|porn|matrix|teens|scooby|jason|walter|cumshot|boston|braves|yankee|lover|barney|victor|tucker|princess|mercedes|5150|doggie|zzzzzz|gunner|horney|bubba|2112|fred|johnson|xxxxx|tits|member|boobs|donald|bigdaddy|bronco|penis|voyager|rangers|birdie|trouble|white|topgun|bigtits|bitches|green|super|qazwsx|magic|lakers|rachel|slayer|scott|2222|asdf|video|london|7777|marlboro|srinivas|internet|action|carter|jasper|monster|teresa|jeremy|11111111|bill|crystal|peter|pussies|cock|beer|rocket|theman|oliver|prince|beach|amateur|7777777|muffin|redsox|star|testing|shannon|murphy|frank|hannah|dave|eagle1|11111|mother|nathan|raiders|steve|forever|angela|viper|ou812|jake|lovers|suckit|gregory|buddy|whatever|young|nicholas|lucky|helpme|jackie|monica|midnight|college|baby|cunt|brian|mark|startrek|sierra|leather|232323|4444|beavis|bigcock|happy|sophie|ladies|naughty|giants|booty|blonde|fucked|golden|0|fire|sandra|pookie|packers|einstein|dolphins|chevy|winston|warrior|sammy|slut|8675309|zxcvbnm|nipples|power|victoria|asdfgh|vagina|toyota|travis|hotdog|paris|rock|xxxx|extreme|redskins|erotic|dirty|ford|freddy|arsenal|access14|wolf|nipple|iloveyou|alex|florida|eric|legend|movie|success|rosebud|jaguar|great|cool|cooper|1313|scorpio|mountain|madison|987654|brazil|lauren|japan|naked|squirt|stars|apple|alexis|aaaa|bonnie|peaches|jasmine|kevin|matt|qwertyui|danielle|beaver|4321|4128|runner|swimming|dolphin|gordon|casper|stupid|shit|saturn|gemini|apples|august|3333|canada|blazer|cumming|hunting|kitty|rainbow|112233|arthur|cream|calvin|shaved|surfer|samson|kelly|paul|mine|king|racing|5555|eagle|hentai|newyork|little|redwings|smith|sticky|cocacola|animal|broncos|private|skippy|marvin|blondes|enjoy|girl|apollo|parker|qwert|time|sydney|women|voodoo|magnum|juice|abgrtyu|777777|dreams|maxwell|music|rush2112|russia|scorpion|rebecca|tester|mistress|phantom|billy|6666|albert|111111|11111111|112233|121212|123123|123456|1234567|12345678|131313|232323|654321|666666|696969|777777|7777777|8675309|987654|abcdef|password1|password12|password123|twitter".split("|");a.fn.extend({complexify:function(p,o){var g=49;var l=100;var f=[[48,57],[65,90],[97,122],[33,47],[58,64],[91,96],[123,126],[128,255],[256,383],[384,591],[592,687],[688,767],[768,879],[880,1023],[1024,1279],[1328,1423],[1424,1535],[1536,1791],[1792,1871],[1920,1983],[2304,2431],[2432,2559],[2560,2687],[2688,2815],[2816,2943],[2944,3071],[3072,3199],[3200,3327],[3328,3455],[3456,3583],[3584,3711],[3712,3839],[3840,4095],[4096,4255],[4256,4351],[4352,4607],[4608,4991],[5024,5119],[5120,5759],[5760,5791],[5792,5887],[6016,6143],[6144,6319],[7680,7935],[7936,8191],[8192,8303],[8304,8351],[8352,8399],[8400,8447],[8448,8527],[8528,8591],[8592,8703],[8704,8959],[8960,9215],[9216,9279],[9280,9311],[9312,9471],[9472,9599],[9600,9631],[9632,9727],[9728,9983],[9984,10175],[10240,10495],[11904,12031],[12032,12255],[12272,12287],[12288,12351],[12352,12447],[12448,12543],[12544,12591],[12592,12687],[12688,12703],[12704,12735],[12800,13055],[13056,13311],[13312,19893],[19968,40959],[40960,42127],[42128,42191],[44032,55203],[55296,56191],[56192,56319],[56320,57343],[57344,63743],[63744,64255],[64256,64335],[64336,65023],[65056,65071],[65072,65103],[65104,65135],[65136,65278],[65279,65279],[65280,65519],[65520,65533]];var e={minimumChars:8,strengthScaleFactor:1,bannedPasswords:b||[],banmode:"strict",evaluateOnInit:true};if(a.isFunction(p)&&!o){o=p;p={}}p=a.extend(e,p);function m(r,s){for(var q=r.length-1;q>=0;q--){if(s[0]<=r.charCodeAt(q)&&r.charCodeAt(q)<=s[1]){return s[1]-s[0]+1}}return 0}function d(r){if(p.banmode==="strict"){for(var q=0;q<p.bannedPasswords.length;q++){if(p.bannedPasswords[q].indexOf(r)!==-1){return true}}return false}else{return a.inArray(r,p.bannedPasswords)>-1?true:false}}function n(){var r=a(this).val();var q=0,t=false;if(!d(r)){for(var s=f.length-1;s>=0;s--){q+=m(r,f[s])}}else{q=1}q=Math.log(Math.pow(q,r.length))*(1/p.strengthScaleFactor);t=(q>g&&r.length>=p.minimumChars);q=(q/l)*100;q=(q>100)?100:q;q=(r.length>p.minimumChars)?q:0;o.call(this,t,q)}if(p.evaluateOnInit){this.each(function(){n.apply(this)})}return this.each(function(){a(this).bind("keyup focus",n)})}})}));(function(a){if(typeof define==="function"&&define.amd){define(a)}else{a(jQuery)}}(function(d){d.extend(true,window,{UrlEncode:g,getSpell:f,getSpellSzm:e});var b="啊阿埃挨哎唉哀皑癌蔼矮艾碍爱隘鞍氨安俺按暗岸胺案肮昂盎凹敖熬翱袄傲奥懊澳芭捌扒叭吧笆八疤巴拔跋靶把耙坝霸罢爸白柏百摆佰败拜稗斑班搬扳般颁板版扮拌伴瓣半办绊邦帮梆榜膀绑棒磅蚌镑傍谤苞胞包褒剥薄雹保堡饱宝抱报暴豹鲍爆杯碑悲卑北辈背贝钡倍狈备惫焙被奔苯本笨崩绷甭泵蹦迸逼鼻比鄙笔彼碧蓖蔽毕毙毖币庇痹闭敝弊必辟壁臂避陛鞭边编贬扁便变卞辨辩辫遍标彪膘表鳖憋别瘪彬斌濒滨宾摈兵冰柄丙秉饼炳病并玻菠播拨钵波博勃搏铂箔伯帛舶脖膊渤泊驳捕卜哺补埠不布步簿部怖擦猜裁材才财睬踩采彩菜蔡餐参蚕残惭惨灿苍舱仓沧藏操糙槽曹草厕策侧册测层蹭插叉茬茶查碴搽察岔差诧拆柴豺搀掺蝉馋谗缠铲产阐颤昌猖场尝常长偿肠厂敞畅唱倡超抄钞朝嘲潮巢吵炒车扯撤掣彻澈郴臣辰尘晨忱沉陈趁衬撑称城橙成呈乘程惩澄诚承逞骋秤吃痴持匙池迟弛驰耻齿侈尺赤翅斥炽充冲虫崇宠抽酬畴踌稠愁筹仇绸瞅丑臭初出橱厨躇锄雏滁除楚础储矗搐触处揣川穿椽传船喘串疮窗幢床闯创吹炊捶锤垂春椿醇唇淳纯蠢戳绰疵茨磁雌辞慈瓷词此刺赐次聪葱囱匆从丛凑粗醋簇促蹿篡窜摧崔催脆瘁粹淬翠村存寸磋撮搓措挫错搭达答瘩打大呆歹傣戴带殆代贷袋待逮怠耽担丹单郸掸胆旦氮但惮淡诞弹蛋当挡党荡档刀捣蹈倒岛祷导到稻悼道盗德得的蹬灯登等瞪凳邓堤低滴迪敌笛狄涤翟嫡抵底地蒂第帝弟递缔颠掂滇碘点典靛垫电佃甸店惦奠淀殿碉叼雕凋刁掉吊钓调跌爹碟蝶迭谍叠丁盯叮钉顶鼎锭定订丢东冬董懂动栋侗恫冻洞兜抖斗陡豆逗痘都督毒犊独读堵睹赌杜镀肚度渡妒端短锻段断缎堆兑队对墩吨蹲敦顿囤钝盾遁掇哆多夺垛躲朵跺舵剁惰堕蛾峨鹅俄额讹娥恶厄扼遏鄂饿恩而儿耳尔饵洱二贰发罚筏伐乏阀法珐藩帆番翻樊矾钒繁凡烦反返范贩犯饭泛坊芳方肪房防妨仿访纺放菲非啡飞肥匪诽吠肺废沸费芬酚吩氛分纷坟焚汾粉奋份忿愤粪丰封枫蜂峰锋风疯烽逢冯缝讽奉凤佛否夫敷肤孵扶拂辐幅氟符伏俘服浮涪福袱弗甫抚辅俯釜斧脯腑府腐赴副覆赋复傅付阜父腹负富讣附妇缚咐噶嘎该改概钙盖溉干甘杆柑竿肝赶感秆敢赣冈刚钢缸肛纲岗港杠篙皋高膏羔糕搞镐稿告哥歌搁戈鸽胳疙割革葛格蛤阁隔铬个各给根跟耕更庚羹埂耿梗工攻功恭龚供躬公宫弓巩汞拱贡共钩勾沟苟狗垢构购够辜菇咕箍估沽孤姑鼓古蛊骨谷股故顾固雇刮瓜剐寡挂褂乖拐怪棺关官冠观管馆罐惯灌贯光广逛瑰规圭硅归龟闺轨鬼诡癸桂柜跪贵刽辊滚棍锅郭国果裹过哈骸孩海氦亥害骇酣憨邯韩含涵寒函喊罕翰撼捍旱憾悍焊汗汉夯杭航壕嚎豪毫郝好耗号浩呵喝荷菏核禾和何合盒貉阂河涸赫褐鹤贺嘿黑痕很狠恨哼亨横衡恒轰哄烘虹鸿洪宏弘红喉侯猴吼厚候后呼乎忽瑚壶葫胡蝴狐糊湖弧虎唬护互沪户花哗华猾滑画划化话槐徊怀淮坏欢环桓还缓换患唤痪豢焕涣宦幻荒慌黄磺蝗簧皇凰惶煌晃幌恍谎灰挥辉徽恢蛔回毁悔慧卉惠晦贿秽会烩汇讳诲绘荤昏婚魂浑混豁活伙火获或惑霍货祸击圾基机畸稽积箕肌饥迹激讥鸡姬绩缉吉极棘辑籍集及急疾汲即嫉级挤几脊己蓟技冀季伎祭剂悸济寄寂计记既忌际妓继纪嘉枷夹佳家加荚颊贾甲钾假稼价架驾嫁歼监坚尖笺间煎兼肩艰奸缄茧检柬碱硷拣捡简俭剪减荐槛鉴践贱见键箭件健舰剑饯渐溅涧建僵姜将浆江疆蒋桨奖讲匠酱降蕉椒礁焦胶交郊浇骄娇嚼搅铰矫侥脚狡角饺缴绞剿教酵轿较叫窖揭接皆秸街阶截劫节桔杰捷睫竭洁结解姐戒藉芥界借介疥诫届巾筋斤金今津襟紧锦仅谨进靳晋禁近烬浸尽劲荆兢茎睛晶鲸京惊精粳经井警景颈静境敬镜径痉靖竟竞净炯窘揪究纠玖韭久灸九酒厩救旧臼舅咎就疚鞠拘狙疽居驹菊局咀矩举沮聚拒据巨具距踞锯俱句惧炬剧捐鹃娟倦眷卷绢撅攫抉掘倔爵觉决诀绝均菌钧军君峻俊竣浚郡骏喀咖卡咯开揩楷凯慨刊堪勘坎砍看康慷糠扛抗亢炕考拷烤靠坷苛柯棵磕颗科壳咳可渴克刻客课肯啃垦恳坑吭空恐孔控抠口扣寇枯哭窟苦酷库裤夸垮挎跨胯块筷侩快宽款匡筐狂框矿眶旷况亏盔岿窥葵奎魁傀馈愧溃坤昆捆困括扩廓阔垃拉喇蜡腊辣啦莱来赖蓝婪栏拦篮阑兰澜谰揽览懒缆烂滥琅榔狼廊郎朗浪捞劳牢老佬姥酪烙涝勒乐雷镭蕾磊累儡垒擂肋类泪棱楞冷厘梨犁黎篱狸离漓理李里鲤礼莉荔吏栗丽厉励砾历利傈例俐痢立粒沥隶力璃哩俩联莲连镰廉怜涟帘敛脸链恋炼练粮凉梁粱良两辆量晾亮谅撩聊僚疗燎寥辽潦了撂镣廖料列裂烈劣猎琳林磷霖临邻鳞淋凛赁吝拎玲菱零龄铃伶羚凌灵陵岭领另令溜琉榴硫馏留刘瘤流柳六龙聋咙笼窿隆垄拢陇楼娄搂篓漏陋芦卢颅庐炉掳卤虏鲁麓碌露路赂鹿潞禄录陆戮驴吕铝侣旅履屡缕虑氯律率滤绿峦挛孪滦卵乱掠略抡轮伦仑沦纶论萝螺罗逻锣箩骡裸落洛骆络妈麻玛码蚂马骂嘛吗埋买麦卖迈脉瞒馒蛮满蔓曼慢漫谩芒茫盲氓忙莽猫茅锚毛矛铆卯茂冒帽貌贸么玫枚梅酶霉煤没眉媒镁每美昧寐妹媚门闷们萌蒙檬盟锰猛梦孟眯醚靡糜迷谜弥米秘觅泌蜜密幂棉眠绵冕免勉娩缅面苗描瞄藐秒渺庙妙蔑灭民抿皿敏悯闽明螟鸣铭名命谬摸摹蘑模膜磨摩魔抹末莫墨默沫漠寞陌谋牟某拇牡亩姆母墓暮幕募慕木目睦牧穆拿哪呐钠那娜纳氖乃奶耐奈南男难囊挠脑恼闹淖呢馁内嫩能妮霓倪泥尼拟你匿腻逆溺蔫拈年碾撵捻念娘酿鸟尿捏聂孽啮镊镍涅您柠狞凝宁拧泞牛扭钮纽脓浓农弄奴努怒女暖虐疟挪懦糯诺哦欧鸥殴藕呕偶沤啪趴爬帕怕琶拍排牌徘湃派攀潘盘磐盼畔判叛乓庞旁耪胖抛咆刨炮袍跑泡呸胚培裴赔陪配佩沛喷盆砰抨烹澎彭蓬棚硼篷膨朋鹏捧碰坯砒霹批披劈琵毗啤脾疲皮匹痞僻屁譬篇偏片骗飘漂瓢票撇瞥拼频贫品聘乒坪苹萍平凭瓶评屏坡泼颇婆破魄迫粕剖扑铺仆莆葡菩蒲埔朴圃普浦谱曝瀑期欺栖戚妻七凄漆柒沏其棋奇歧畦崎脐齐旗祈祁骑起岂乞企启契砌器气迄弃汽泣讫掐恰洽牵扦钎铅千迁签仟谦乾黔钱钳前潜遣浅谴堑嵌欠歉枪呛腔羌墙蔷强抢橇锹敲悄桥瞧乔侨巧鞘撬翘峭俏窍切茄且怯窃钦侵亲秦琴勤芹擒禽寝沁青轻氢倾卿清擎晴氰情顷请庆琼穷秋丘邱球求囚酋泅趋区蛆曲躯屈驱渠取娶龋趣去圈颧权醛泉全痊拳犬券劝缺炔瘸却鹊榷确雀裙群然燃冉染瓤壤攘嚷让饶扰绕惹热壬仁人忍韧任认刃妊纫扔仍日戎茸蓉荣融熔溶容绒冗揉柔肉茹蠕儒孺如辱乳汝入褥软阮蕊瑞锐闰润若弱撒洒萨腮鳃塞赛三叁伞散桑嗓丧搔骚扫嫂瑟色涩森僧莎砂杀刹沙纱傻啥煞筛晒珊苫杉山删煽衫闪陕擅赡膳善汕扇缮墒伤商赏晌上尚裳梢捎稍烧芍勺韶少哨邵绍奢赊蛇舌舍赦摄射慑涉社设砷申呻伸身深娠绅神沈审婶甚肾慎渗声生甥牲升绳省盛剩胜圣师失狮施湿诗尸虱十石拾时什食蚀实识史矢使屎驶始式示士世柿事拭誓逝势是嗜噬适仕侍释饰氏市恃室视试收手首守寿授售受瘦兽蔬枢梳殊抒输叔舒淑疏书赎孰熟薯暑曙署蜀黍鼠属术述树束戍竖墅庶数漱恕刷耍摔衰甩帅栓拴霜双爽谁水睡税吮瞬顺舜说硕朔烁斯撕嘶思私司丝死肆寺嗣四伺似饲巳松耸怂颂送宋讼诵搜艘擞嗽苏酥俗素速粟僳塑溯宿诉肃酸蒜算虽隋随绥髓碎岁穗遂隧祟孙损笋蓑梭唆缩琐索锁所塌他它她塔獭挞蹋踏胎苔抬台泰酞太态汰坍摊贪瘫滩坛檀痰潭谭谈坦毯袒碳探叹炭汤塘搪堂棠膛唐糖倘躺淌趟烫掏涛滔绦萄桃逃淘陶讨套特藤腾疼誊梯剔踢锑提题蹄啼体替嚏惕涕剃屉天添填田甜恬舔腆挑条迢眺跳贴铁帖厅听烃汀廷停亭庭挺艇通桐酮瞳同铜彤童桶捅筒统痛偷投头透凸秃突图徒途涂屠土吐兔湍团推颓腿蜕褪退吞屯臀拖托脱鸵陀驮驼椭妥拓唾挖哇蛙洼娃瓦袜歪外豌弯湾玩顽丸烷完碗挽晚皖惋宛婉万腕汪王亡枉网往旺望忘妄威巍微危韦违桅围唯惟为潍维苇萎委伟伪尾纬未蔚味畏胃喂魏位渭谓尉慰卫瘟温蚊文闻纹吻稳紊问嗡翁瓮挝蜗涡窝我斡卧握沃巫呜钨乌污诬屋无芜梧吾吴毋武五捂午舞伍侮坞戊雾晤物勿务悟误昔熙析西硒矽晰嘻吸锡牺稀息希悉膝夕惜熄烯溪汐犀檄袭席习媳喜铣洗系隙戏细瞎虾匣霞辖暇峡侠狭下厦夏吓掀锨先仙鲜纤咸贤衔舷闲涎弦嫌显险现献县腺馅羡宪陷限线相厢镶香箱襄湘乡翔祥详想响享项巷橡像向象萧硝霄削哮嚣销消宵淆晓小孝校肖啸笑效楔些歇蝎鞋协挟携邪斜胁谐写械卸蟹懈泄泻谢屑薪芯锌欣辛新忻心信衅星腥猩惺兴刑型形邢行醒幸杏性姓兄凶胸匈汹雄熊休修羞朽嗅锈秀袖绣墟戌需虚嘘须徐许蓄酗叙旭序畜恤絮婿绪续轩喧宣悬旋玄选癣眩绚靴薛学穴雪血勋熏循旬询寻驯巡殉汛训讯逊迅压押鸦鸭呀丫芽牙蚜崖衙涯雅哑亚讶焉咽阉烟淹盐严研蜒岩延言颜阎炎沿奄掩眼衍演艳堰燕厌砚雁唁彦焰宴谚验殃央鸯秧杨扬佯疡羊洋阳氧仰痒养样漾邀腰妖瑶摇尧遥窑谣姚咬舀药要耀椰噎耶爷野冶也页掖业叶曳腋夜液一壹医揖铱依伊衣颐夷遗移仪胰疑沂宜姨彝椅蚁倚已乙矣以艺抑易邑屹亿役臆逸肄疫亦裔意毅忆义益溢诣议谊译异翼翌绎茵荫因殷音阴姻吟银淫寅饮尹引隐印英樱婴鹰应缨莹萤营荧蝇迎赢盈影颖硬映哟拥佣臃痈庸雍踊蛹咏泳涌永恿勇用幽优悠忧尤由邮铀犹油游酉有友右佑釉诱又幼迂淤于盂榆虞愚舆余俞逾鱼愉渝渔隅予娱雨与屿禹宇语羽玉域芋郁吁遇喻峪御愈欲狱育誉浴寓裕预豫驭鸳渊冤元垣袁原援辕园员圆猿源缘远苑愿怨院曰约越跃钥岳粤月悦阅耘云郧匀陨允运蕴酝晕韵孕匝砸杂栽哉灾宰载再在咱攒暂赞赃脏葬遭糟凿藻枣早澡蚤躁噪造皂灶燥责择则泽贼怎增憎曾赠扎喳渣札轧铡闸眨栅榨咋乍炸诈摘斋宅窄债寨瞻毡詹粘沾盏斩辗崭展蘸栈占战站湛绽樟章彰漳张掌涨杖丈帐账仗胀瘴障招昭找沼赵照罩兆肇召遮折哲蛰辙者锗蔗这浙珍斟真甄砧臻贞针侦枕疹诊震振镇阵蒸挣睁征狰争怔整拯正政帧症郑证芝枝支吱蜘知肢脂汁之织职直植殖执值侄址指止趾只旨纸志挚掷至致置帜峙制智秩稚质炙痔滞治窒中盅忠钟衷终种肿重仲众舟周州洲诌粥轴肘帚咒皱宙昼骤珠株蛛朱猪诸诛逐竹烛煮拄瞩嘱主著柱助蛀贮铸筑住注祝驻抓爪拽专砖转撰赚篆桩庄装妆撞壮状椎锥追赘坠缀谆准捉拙卓桌琢茁酌啄着灼浊兹咨资姿滋淄孜紫仔籽滓子自渍字鬃棕踪宗综总纵邹走奏揍租足卒族祖诅阻组钻纂嘴醉最罪尊遵昨左佐柞做作坐座亍丌兀丐廿卅丕亘丞鬲孬噩丨禺丿匕乇夭爻卮氐囟胤馗毓睾鼗丶亟鼐乜乩亓芈孛啬嘏仄厍厝厣厥厮靥赝匚叵匦匮匾赜卦卣刂刈刎刭刳刿剀剌剞剡剜蒯剽劂劁劐劓冂罔亻仃仉仂仨仡仫仞伛仳伢佤仵伥伧伉伫佞佧攸佚佝佟佗伲伽佶佴侑侉侃侏佾佻侪佼侬侔俦俨俪俅俚俣俜俑俟俸倩偌俳倬倏倮倭俾倜倌倥倨偾偃偕偈偎偬偻傥傧傩傺僖儆僭僬僦僮儇儋仝氽佘佥俎龠汆籴兮巽黉馘冁夔勹匍訇匐凫夙兕亠兖亳衮袤亵脔裒禀嬴蠃羸冫冱冽冼凇冖冢冥讠讦讧讪讴讵讷诂诃诋诏诎诒诓诔诖诘诙诜诟诠诤诨诩诮诰诳诶诹诼诿谀谂谄谇谌谏谑谒谔谕谖谙谛谘谝谟谠谡谥谧谪谫谮谯谲谳谵谶卩卺阝阢阡阱阪阽阼陂陉陔陟陧陬陲陴隈隍隗隰邗邛邝邙邬邡邴邳邶邺邸邰郏郅邾郐郄郇郓郦郢郜郗郛郫郯郾鄄鄢鄞鄣鄱鄯鄹酃酆刍奂劢劬劭劾哿勐勖勰叟燮矍廴凵凼鬯厶弁畚巯坌垩垡塾墼壅壑圩圬圪圳圹圮圯坜圻坂坩垅坫垆坼坻坨坭坶坳垭垤垌垲埏垧垴垓垠埕埘埚埙埒垸埴埯埸埤埝堋堍埽埭堀堞堙塄堠塥塬墁墉墚墀馨鼙懿艹艽艿芏芊芨芄芎芑芗芙芫芸芾芰苈苊苣芘芷芮苋苌苁芩芴芡芪芟苄苎芤苡茉苷苤茏茇苜苴苒苘茌苻苓茑茚茆茔茕苠苕茜荑荛荜茈莒茼茴茱莛荞茯荏荇荃荟荀茗荠茭茺茳荦荥荨茛荩荬荪荭荮莰荸莳莴莠莪莓莜莅荼莶莩荽莸荻莘莞莨莺莼菁萁菥菘堇萘萋菝菽菖萜萸萑萆菔菟萏萃菸菹菪菅菀萦菰菡葜葑葚葙葳蒇蒈葺蒉葸萼葆葩葶蒌蒎萱葭蓁蓍蓐蓦蒽蓓蓊蒿蒺蓠蒡蒹蒴蒗蓥蓣蔌甍蔸蓰蔹蔟蔺蕖蔻蓿蓼蕙蕈蕨蕤蕞蕺瞢蕃蕲蕻薤薨薇薏蕹薮薜薅薹薷薰藓藁藜藿蘧蘅蘩蘖蘼廾弈夼奁耷奕奚奘匏尢尥尬尴扌扪抟抻拊拚拗拮挢拶挹捋捃掭揶捱捺掎掴捭掬掊捩掮掼揲揸揠揿揄揞揎摒揆掾摅摁搋搛搠搌搦搡摞撄摭撖摺撷撸撙撺擀擐擗擤擢攉攥攮弋忒甙弑卟叱叽叩叨叻吒吖吆呋呒呓呔呖呃吡呗呙吣吲咂咔呷呱呤咚咛咄呶呦咝哐咭哂咴哒咧咦哓哔呲咣哕咻咿哌哙哚哜咩咪咤哝哏哞唛哧唠哽唔哳唢唣唏唑唧唪啧喏喵啉啭啁啕唿啐唼唷啖啵啶啷唳唰啜喋嗒喃喱喹喈喁喟啾嗖喑啻嗟喽喾喔喙嗪嗷嗉嘟嗑嗫嗬嗔嗦嗝嗄嗯嗥嗲嗳嗌嗍嗨嗵嗤辔嘞嘈嘌嘁嘤嘣嗾嘀嘧嘭噘嘹噗嘬噍噢噙噜噌噔嚆噤噱噫噻噼嚅嚓嚯囔囗囝囡囵囫囹囿圄圊圉圜帏帙帔帑帱帻帼帷幄幔幛幞幡岌屺岍岐岖岈岘岙岑岚岜岵岢岽岬岫岱岣峁岷峄峒峤峋峥崂崃崧崦崮崤崞崆崛嵘崾崴崽嵬嵛嵯嵝嵫嵋嵊嵩嵴嶂嶙嶝豳嶷巅彳彷徂徇徉後徕徙徜徨徭徵徼衢彡犭犰犴犷犸狃狁狎狍狒狨狯狩狲狴狷猁狳猃狺狻猗猓猡猊猞猝猕猢猹猥猬猸猱獐獍獗獠獬獯獾舛夥飧夤夂饣饧饨饩饪饫饬饴饷饽馀馄馇馊馍馐馑馓馔馕庀庑庋庖庥庠庹庵庾庳赓廒廑廛廨廪膺忄忉忖忏怃忮怄忡忤忾怅怆忪忭忸怙怵怦怛怏怍怩怫怊怿怡恸恹恻恺恂恪恽悖悚悭悝悃悒悌悛惬悻悱惝惘惆惚悴愠愦愕愣惴愀愎愫慊慵憬憔憧憷懔懵忝隳闩闫闱闳闵闶闼闾阃阄阆阈阊阋阌阍阏阒阕阖阗阙阚丬爿戕氵汔汜汊沣沅沐沔沌汨汩汴汶沆沩泐泔沭泷泸泱泗沲泠泖泺泫泮沱泓泯泾洹洧洌浃浈洇洄洙洎洫浍洮洵洚浏浒浔洳涑浯涞涠浞涓涔浜浠浼浣渚淇淅淞渎涿淠渑淦淝淙渖涫渌涮渫湮湎湫溲湟溆湓湔渲渥湄滟溱溘滠漭滢溥溧溽溻溷滗溴滏溏滂溟潢潆潇漤漕滹漯漶潋潴漪漉漩澉澍澌潸潲潼潺濑濉澧澹澶濂濡濮濞濠濯瀚瀣瀛瀹瀵灏灞宀宄宕宓宥宸甯骞搴寤寮褰寰蹇謇辶迓迕迥迮迤迩迦迳迨逅逄逋逦逑逍逖逡逵逶逭逯遄遑遒遐遨遘遢遛暹遴遽邂邈邃邋彐彗彖彘尻咫屐屙孱屣屦羼弪弩弭艴弼鬻屮妁妃妍妩妪妣妗姊妫妞妤姒妲妯姗妾娅娆姝娈姣姘姹娌娉娲娴娑娣娓婀婧婊婕娼婢婵胬媪媛婷婺媾嫫媲嫒嫔媸嫠嫣嫱嫖嫦嫘嫜嬉嬗嬖嬲嬷孀尕尜孚孥孳孑孓孢驵驷驸驺驿驽骀骁骅骈骊骐骒骓骖骘骛骜骝骟骠骢骣骥骧纟纡纣纥纨纩纭纰纾绀绁绂绉绋绌绐绔绗绛绠绡绨绫绮绯绱绲缍绶绺绻绾缁缂缃缇缈缋缌缏缑缒缗缙缜缛缟缡缢缣缤缥缦缧缪缫缬缭缯缰缱缲缳缵幺畿巛甾邕玎玑玮玢玟珏珂珑玷玳珀珉珈珥珙顼琊珩珧珞玺珲琏琪瑛琦琥琨琰琮琬琛琚瑁瑜瑗瑕瑙瑷瑭瑾璜璎璀璁璇璋璞璨璩璐璧瓒璺韪韫韬杌杓杞杈杩枥枇杪杳枘枧杵枨枞枭枋杷杼柰栉柘栊柩枰栌柙枵柚枳柝栀柃枸柢栎柁柽栲栳桠桡桎桢桄桤梃栝桕桦桁桧桀栾桊桉栩梵梏桴桷梓桫棂楮棼椟椠棹椤棰椋椁楗棣椐楱椹楠楂楝榄楫榀榘楸椴槌榇榈槎榉楦楣楹榛榧榻榫榭槔榱槁槊槟榕槠榍槿樯槭樗樘橥槲橄樾檠橐橛樵檎橹樽樨橘橼檑檐檩檗檫猷獒殁殂殇殄殒殓殍殚殛殡殪轫轭轱轲轳轵轶轸轷轹轺轼轾辁辂辄辇辋辍辎辏辘辚軎戋戗戛戟戢戡戥戤戬臧瓯瓴瓿甏甑甓攴旮旯旰昊昙杲昃昕昀炅曷昝昴昱昶昵耆晟晔晁晏晖晡晗晷暄暌暧暝暾曛曜曦曩贲贳贶贻贽赀赅赆赈赉赇赍赕赙觇觊觋觌觎觏觐觑牮犟牝牦牯牾牿犄犋犍犏犒挈挲掰搿擘耄毪毳毽毵毹氅氇氆氍氕氘氙氚氡氩氤氪氲攵敕敫牍牒牖爰虢刖肟肜肓肼朊肽肱肫肭肴肷胧胨胩胪胛胂胄胙胍胗朐胝胫胱胴胭脍脎胲胼朕脒豚脶脞脬脘脲腈腌腓腴腙腚腱腠腩腼腽腭腧塍媵膈膂膑滕膣膪臌朦臊膻臁膦欤欷欹歃歆歙飑飒飓飕飙飚殳彀毂觳斐齑斓於旆旄旃旌旎旒旖炀炜炖炝炻烀炷炫炱烨烊焐焓焖焯焱煳煜煨煅煲煊煸煺熘熳熵熨熠燠燔燧燹爝爨灬焘煦熹戾戽扃扈扉礻祀祆祉祛祜祓祚祢祗祠祯祧祺禅禊禚禧禳忑忐怼恝恚恧恁恙恣悫愆愍慝憩憝懋懑戆肀聿沓泶淼矶矸砀砉砗砘砑斫砭砜砝砹砺砻砟砼砥砬砣砩硎硭硖硗砦硐硇硌硪碛碓碚碇碜碡碣碲碹碥磔磙磉磬磲礅磴礓礤礞礴龛黹黻黼盱眄眍盹眇眈眚眢眙眭眦眵眸睐睑睇睃睚睨睢睥睿瞍睽瞀瞌瞑瞟瞠瞰瞵瞽町畀畎畋畈畛畲畹疃罘罡罟詈罨罴罱罹羁罾盍盥蠲钅钆钇钋钊钌钍钏钐钔钗钕钚钛钜钣钤钫钪钭钬钯钰钲钴钶钷钸钹钺钼钽钿铄铈铉铊铋铌铍铎铐铑铒铕铖铗铙铘铛铞铟铠铢铤铥铧铨铪铩铫铮铯铳铴铵铷铹铼铽铿锃锂锆锇锉锊锍锎锏锒锓锔锕锖锘锛锝锞锟锢锪锫锩锬锱锲锴锶锷锸锼锾锿镂锵镄镅镆镉镌镎镏镒镓镔镖镗镘镙镛镞镟镝镡镢镤镥镦镧镨镩镪镫镬镯镱镲镳锺矧矬雉秕秭秣秫稆嵇稃稂稞稔稹稷穑黏馥穰皈皎皓皙皤瓞瓠甬鸠鸢鸨鸩鸪鸫鸬鸲鸱鸶鸸鸷鸹鸺鸾鹁鹂鹄鹆鹇鹈鹉鹋鹌鹎鹑鹕鹗鹚鹛鹜鹞鹣鹦鹧鹨鹩鹪鹫鹬鹱鹭鹳疒疔疖疠疝疬疣疳疴疸痄疱疰痃痂痖痍痣痨痦痤痫痧瘃痱痼痿瘐瘀瘅瘌瘗瘊瘥瘘瘕瘙瘛瘼瘢瘠癀瘭瘰瘿瘵癃瘾瘳癍癞癔癜癖癫癯翊竦穸穹窀窆窈窕窦窠窬窨窭窳衤衩衲衽衿袂袢裆袷袼裉裢裎裣裥裱褚裼裨裾裰褡褙褓褛褊褴褫褶襁襦襻疋胥皲皴矜耒耔耖耜耠耢耥耦耧耩耨耱耋耵聃聆聍聒聩聱覃顸颀颃颉颌颍颏颔颚颛颞颟颡颢颥颦虍虔虬虮虿虺虼虻蚨蚍蚋蚬蚝蚧蚣蚪蚓蚩蚶蛄蚵蛎蚰蚺蚱蚯蛉蛏蚴蛩蛱蛲蛭蛳蛐蜓蛞蛴蛟蛘蛑蜃蜇蛸蜈蜊蜍蜉蜣蜻蜞蜥蜮蜚蜾蝈蜴蜱蜩蜷蜿螂蜢蝽蝾蝻蝠蝰蝌蝮螋蝓蝣蝼蝤蝙蝥螓螯螨蟒蟆螈螅螭螗螃螫蟥螬螵螳蟋蟓螽蟑蟀蟊蟛蟪蟠蟮蠖蠓蟾蠊蠛蠡蠹蠼缶罂罄罅舐竺竽笈笃笄笕笊笫笏筇笸笪笙笮笱笠笥笤笳笾笞筘筚筅筵筌筝筠筮筻筢筲筱箐箦箧箸箬箝箨箅箪箜箢箫箴篑篁篌篝篚篥篦篪簌篾篼簏簖簋簟簪簦簸籁籀臾舁舂舄臬衄舡舢舣舭舯舨舫舸舻舳舴舾艄艉艋艏艚艟艨衾袅袈裘裟襞羝羟羧羯羰羲籼敉粑粝粜粞粢粲粼粽糁糇糌糍糈糅糗糨艮暨羿翎翕翥翡翦翩翮翳糸絷綦綮繇纛麸麴赳趄趔趑趱赧赭豇豉酊酐酎酏酤酢酡酰酩酯酽酾酲酴酹醌醅醐醍醑醢醣醪醭醮醯醵醴醺豕鹾趸跫踅蹙蹩趵趿趼趺跄跖跗跚跞跎跏跛跆跬跷跸跣跹跻跤踉跽踔踝踟踬踮踣踯踺蹀踹踵踽踱蹉蹁蹂蹑蹒蹊蹰蹶蹼蹯蹴躅躏躔躐躜躞豸貂貊貅貘貔斛觖觞觚觜觥觫觯訾謦靓雩雳雯霆霁霈霏霎霪霭霰霾龀龃龅龆龇龈龉龊龌黾鼋鼍隹隼隽雎雒瞿雠銎銮鋈錾鍪鏊鎏鐾鑫鱿鲂鲅鲆鲇鲈稣鲋鲎鲐鲑鲒鲔鲕鲚鲛鲞鲟鲠鲡鲢鲣鲥鲦鲧鲨鲩鲫鲭鲮鲰鲱鲲鲳鲴鲵鲶鲷鲺鲻鲼鲽鳄鳅鳆鳇鳊鳋鳌鳍鳎鳏鳐鳓鳔鳕鳗鳘鳙鳜鳝鳟鳢靼鞅鞑鞒鞔鞯鞫鞣鞲鞴骱骰骷鹘骶骺骼髁髀髅髂髋髌髑魅魃魇魉魈魍魑飨餍餮饕饔髟髡髦髯髫髻髭髹鬈鬏鬓鬟鬣麽麾縻麂麇麈麋麒鏖麝麟黛黜黝黠黟黢黩黧黥黪黯鼢鼬鼯鼹鼷鼽鼾齄";var a=["a",0,"ai",2,"an",15,"ang",24,"ao",27,"ba",36,"bai",54,"ban",62,"bang",77,"bao",89,"bei",106,"ben",121,"beng",125,"bi",131,"bian",155,"biao",167,"bie",171,"bin",175,"bing",181,"bo",190,"bu",211,"ca",220,"cai",221,"can",232,"cang",239,"cao",244,"ce",249,"ceng",254,"cha",256,"chai",267,"chan",270,"chang",280,"chao",293,"che",302,"chen",308,"cheng",318,"chi",333,"chong",349,"chou",354,"chu",366,"chuai",382,"chuan",383,"chuang",390,"chui",396,"chun",401,"chuo",408,"ci",410,"cong",422,"cou",428,"cu",429,"cuan",433,"cui",436,"cun",444,"cuo",447,"da",453,"dai",459,"dan",471,"dang",486,"dao",491,"de",503,"deng",506,"di",513,"dian",532,"diao",548,"die",557,"ding",564,"diu",573,"dong",574,"dou",584,"du",591,"duan",606,"dui",612,"dun",616,"duo",625,"e",637,"en",650,"er",651,"fa",659,"fan",667,"fang",684,"fei",695,"fen",707,"feng",722,"fo",737,"fou",738,"fu",739,"ga",784,"gai",786,"gan",792,"gang",803,"gao",812,"ge",822,"gei",839,"gen",840,"geng",842,"gong",849,"gou",864,"gu",873,"gua",891,"guai",897,"guan",900,"guang",911,"gui",914,"gun",930,"guo",933,"ha",939,"hai",940,"han",947,"hang",966,"hao",969,"he",978,"hei",996,"hen",998,"heng",1002,"hong",1007,"hou",1016,"hu",1023,"hua",1041,"huai",1050,"huan",1055,"huang",1069,"hui",1083,"hun",1104,"huo",1110,"ji",1120,"jia",1173,"jian",1190,"jiang",1230,"jiao",1243,"jie",1271,"jin",1298,"jing",1318,"jiong",1343,"jiu",1345,"ju",1362,"juan",1387,"jue",1394,"jun",1404,"ka",1415,"kai",1419,"kan",1424,"kang",1430,"kao",1437,"ke",1441,"ken",1456,"keng",1460,"kong",1462,"kou",1466,"ku",1470,"kua",1477,"kuai",1482,"kuan",1486,"kuang",1488,"kui",1496,"kun",1507,"kuo",1511,"la",1515,"lai",1522,"lan",1525,"lang",1540,"lao",1547,"le",1556,"lei",1558,"leng",1569,"li",1572,"lia",1606,"lian",1607,"liang",1621,"liao",1632,"lie",1645,"lin",1650,"ling",1662,"liu",1676,"long",1687,"lou",1696,"lu",1702,"lv",1722,"luan",1736,"lue",1742,"lun",1744,"luo",1751,"ma",1763,"mai",1772,"man",1778,"mang",1787,"mao",1793,"me",1805,"mei",1806,"men",1822,"meng",1825,"mi",1833,"mian",1847,"miao",1856,"mie",1864,"min",1866,"ming",1872,"miu",1878,"mo",1879,"mou",1896,"mu",1899,"na",1914,"nai",1921,"nan",1926,"nang",1929,"nao",1930,"ne",1935,"nei",1936,"nen",1938,"neng",1939,"ni",1940,"nian",1951,"niang",1958,"niao",1960,"nie",1962,"nin",1969,"ning",1970,"niu",1976,"nong",1980,"nu",1984,"nv",1987,"nuan",1988,"nue",1989,"nuo",1991,"o",1995,"ou",1996,"pa",2003,"pai",2009,"pan",2015,"pang",2023,"pao",2028,"pei",2035,"pen",2044,"peng",2046,"pi",2060,"pian",2077,"piao",2081,"pie",2085,"pin",2087,"ping",2092,"po",2101,"pu",2110,"qi",2125,"qia",2161,"qian",2164,"qiang",2186,"qiao",2194,"qie",2209,"qin",2214,"qing",2225,"qiong",2238,"qiu",2240,"qu",2248,"quan",2261,"que",2272,"qun",2280,"ran",2282,"rang",2286,"rao",2291,"re",2294,"ren",2296,"reng",2306,"ri",2308,"rong",2309,"rou",2319,"ru",2322,"ruan",2332,"rui",2334,"run",2337,"ruo",2339,"sa",2341,"sai",2344,"san",2348,"sang",2352,"sao",2355,"se",2359,"sen",2362,"seng",2363,"sha",2364,"shai",2373,"shan",2375,"shang",2391,"shao",2399,"she",2410,"shen",2422,"sheng",2438,"shi",2449,"shou",2496,"shu",2506,"shua",2539,"shuai",2541,"shuan",2545,"shuang",2547,"shui",2550,"shun",2554,"shuo",2558,"si",2562,"song",2578,"sou",2586,"su",2589,"suan",2602,"sui",2605,"sun",2616,"suo",2619,"ta",2627,"tai",2636,"tan",2645,"tang",2663,"tao",2676,"te",2687,"teng",2688,"ti",2692,"tian",2707,"tiao",2715,"tie",2720,"ting",2723,"tong",2733,"tou",2746,"tu",2750,"tuan",2761,"tui",2763,"tun",2769,"tuo",2772,"wa",2783,"wai",2790,"wan",2792,"wang",2809,"wei",2819,"wen",2852,"weng",2862,"wo",2865,"wu",2874,"xi",2903,"xia",2938,"xian",2951,"xiang",2977,"xiao",2997,"xie",3015,"xin",3036,"xing",3046,"xiong",3061,"xiu",3068,"xu",3077,"xuan",3096,"xue",3106,"xun",3112,"ya",3126,"yan",3142,"yang",3175,"yao",3192,"ye",3207,"yi",3222,"yin",3275,"ying",3291,"yo",3309,"yong",3310,"you",3325,"yu",3346,"yuan",3390,"yue",3410,"yun",3420,"za",3432,"zai",3435,"zan",3442,"zang",3446,"zao",3449,"ze",3463,"zei",3467,"zen",3468,"zeng",3469,"zha",3473,"zhai",3487,"zhan",3493,"zhang",3510,"zhao",3525,"zhe",3535,"zhen",3545,"zheng",3561,"zhi",3576,"zhong",3619,"zhou",3630,"zhu",3644,"zhua",3670,"zhuai",3672,"zhuan",3673,"zhuang",3679,"zhui",3686,"zhun",3692,"zhuo",3694,"zi",3705,"zong",3720,"zou",3727,"zu",3731,"zuan",3739,"zui",3741,"zun",3745,"zuo",3747];function g(s){var m,t,r,o,l="",n="!\"#$%&'()*+,/:;<=>?@[]^`{|}~%";for(m=0;m<s.length;m++){if(s.charCodeAt(m)>=19968){var r=b.indexOf(s.charAt(m));if(r>=0){o=r%94;r=(r-o)/94;l+=("%"+(176+r).toString(16)+"%"+(161+o).toString(16)).toUpperCase()}}else{t=s.charAt(m);if(t==" "){l+="+"}else{if(n.indexOf(t)!=-1){l+="%"+s.charCodeAt(m).toString(16)}else{l+=t}}}}return l}function f(r,o){var n,s,m,q,l="";if(o==null){o=""}for(n=0;n<r.length;n++){if(r.charCodeAt(n)>=19968){q=b.indexOf(r.charAt(n));if(q>-1&&q<3755){for(m=a.length-1;m>0;m=m-2){if(a[m]<=q){break}}if(m>0){l+=a[m-1]+o}}}else{l+=r.charAt(n)}}return l.substr(0,l.length-o.length)}function e(q){var n,r,m,o,l="";for(n=0;n<q.length;n++){if(q.charCodeAt(n)>=19968){o=b.indexOf(q.charAt(n));if(o>-1&&o<3755){for(m=a.length-1;m>0;m=m-2){if(a[m]<=o){break}}if(m>0){l+=a[m-1].substring(0,1)}}}else{l+=q.charAt(n)}}return l}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery","cookie"],a)}else{a(jQuery)}}(function(a){a.fn.hintTip=function(d){var q={replay:false,delayTime:3000,show:true,cookname:null,func:null,reID:"xxx",data:[]};var r=a.extend(q,d);var e=r.replay;var b=r.delayTime;var D=r.show;var o=r.cookname;var n=r.func;var G=r.data;var m=r.reID;var C=a(window).height();var w=a(document).height();var E=a("body").width();var F=a("body"),g=window.location.href;var A;var z;var p=encodeURI("hint_"+o);var s=encodeURI("hint_"+o);y();function y(){if(D){if(!l()){F.append("<div class='hint-mask'style='width:"+E+"px;height:"+w+"px;'></div>");v()}}a(".hint-tips .hint-contents .hc-message .hm-opts .ho-next").bind("click",function(){var H=a(this).parent().parent().parent().parent();var J=parseInt(H.attr("step"));if(J==G.length-1){return}H.hide();var I=a(".hint-tips[step='"+(J+1)+"']");I.show();var K=I.offset().top;a("body,html").animate({scrollTop:K-200})});a(".hint-tips .hint-contents .hc-message .hm-opts .ho-pre").bind("click",function(){var H=a(this).parent().parent().parent().parent();var J=parseInt(H.attr("step"));H.hide();var I=a(".hint-tips[step='"+(J-1)+"']");I.show();var K=I.offset().top;a("body,html").animate({scrollTop:K-200})});a(".hint-tips .hint-contents .hc-close").bind("click",function(){a(".hint-tips").remove();a(".hint-mask").remove();if(!l()){u(p,s)}clearTimeout(A);clearTimeout(z)});a(".hint-tips .hint-contents .hc-message .hm-opts .ho-last").bind("click",function(){a(".hint-tips").remove();a(".hint-mask").remove();if(!l()){u(p,s)}clearTimeout(A);clearTimeout(z)});if(e){A=setTimeout(x,b)}a("#"+m).bind("click",function(){var K=new Array();var J={};K=f("hint_");for(var I=0;I<K.length;I++){var H=K[I];a.cookie(H,null,{path:"/"})}})}a.clearCookieHintArray=function(M){var L={};var H=document.cookie.split(";");var N=new Array();for(var K=0;K<H.length;K++){var J=H[K].split("=");var I=a.trim(J[0]);var O=I.indexOf("hint_");if(O!=-1){if(!M){a.cookie(I,null,{path:"/"})}if(("hint_"+M)==I){a.cookie(I,null,{path:"/"})}}}};function v(){var H=G.length;var M=false;var I,J,L;if(H==0){return false}for(I=0;I<H;I++){ditem=G[I];L=ditem.id;message=ditem.message;var K=ditem.child;if(typeof L=="string"){J=a("#"+L)}if(typeof L=="object"){J=L}if(!J[0]){continue}else{M=true}B(J,message,I,H,K)}if(!M){a(".hint-tips").remove();a(".hint-mask").remove()}}function B(R,O,W,X,L){var O,ab,I,T,K,J,Q,ac,ad,Y;ab=R.outerHeight();I=R.outerWidth();K=R.offset().left;J=R.offset().top;if(L==true){K=K+140;J=J+101}ad=45;var aa="width:"+(350)+"px;left:"+K+"px;top:"+J+"px;min-width:250px;";var N="margin-top:"+(ad+ab)+"px;";var P="width:"+I+"px;height:"+ab+"px;top:"+-(ad+ab)+"px;left:-1px;";var S=a('<div class="hint-tips" style='+aa+"  step="+W+'><div class="hint-contents" style='+N+'><div class="hc-border" style='+P+'></div><div class="hc-arrow"></div><div class="hc-close"></div><div class="hc-message"><div class="hm-content">'+O+'</div><div class="hm-opts"><span class="ho-next">下一步</span><span class="ho-last">向导结束，进入网站</span><span class="ho-pre">上一步</span></div></div></div></div>');F.append(S);var U=S.outerWidth();var Z=S.outerHeight();var H=Z-parseInt(S.children(".hint-contents").css("margin-top"));var M=U+K;var V=Z+J;if(M>=E&&V<w){S.css("left",(K+I-U)+"px");S.find(".hc-border").css("left",(U-I)+"px");S.find(".hc-arrow").css({"background-position":"0px 0px",left:(U-70)+"px"})}if(M>=E&&V>=w){S.css({left:(K+I-U)+"px",top:(J-Z-ad)+"px"});S.find(".hc-border").css({left:(U-I)+"px",top:(H+ad)});S.find(".hc-arrow").css({"background-position":"0px -232px",left:(U-70)+"px",top:H+"px"})}if(M<E&&V>=w){S.css({top:(J-Z-ad+200)+"px"});S.find(".hc-border").css({top:(H+ad-200)});S.find(".hc-arrow").css({"background-position":"0px -65px",top:H+"px"})}if(W==0){S.show();a("body,html").animate({scrollTop:J-200})}else{S.find(".hm-opts").children(".ho-pre").show()}if(W==(X-1)){S.find(".hm-opts").children(".ho-next").hide();S.find(".hm-opts").children(".ho-last").show()}}function x(){var H=a(".hint-tips:visible");var I=parseInt(H.attr("step"));a(".hint-tips[step='"+(I)+"'] .hint-contents .hc-message .hm-opts .ho-next").click();if(I==G.length-1){clearTimeout(A);return}z=setTimeout(x,b)}function u(J,H){var I={};I["dto['hintName']"]=J;I["dto['hintValue']"]=H;a.cookie(J,H,{expires:365,path:"/"})}function l(){var H=t(p);if(H==s){return true}return false}function f(J){var H=document.cookie.split(";");var M=new Array();for(var L=0;L<H.length;L++){var K=H[L].split("=");var I=a.trim(K[0]);var N=I.indexOf(J);if(N!=-1){M.push(I)}}return M}function t(J){var I=document.cookie.split(";");var L=new Object();for(var K=0;K<I.length;K++){var H=I[K].split("=");if(a.trim(H[0])==a.trim(J)){return unescape(H[1])}}return""}}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(a){a.fn.printForTablePage=function(p){var f={isVertical:true,paper:"A4",marginLeft:"0.5",marginRight:"0.5",marginTop:"0.5",marginBottom:"0.3",printButton:"printButton",headerClass:"header",itemClass:"item",isIframePrint:false,isAutoPageBreak:false,isContainHeader:false};var g=m();var l=a(this);var p=a.extend(f,p);window.onload=function(){o(p);n(p)};if("ie"==g){var d=e("isIePrint");if(d==1){document.all.WebBrowser.ExecWB(7,1)}a("#"+p.printButton).click(function(){if(p.isIframePrint){window.open(window.location.href+"?isIePrint=1","","height=600,width=1024,top=0,left=0,toolbar=no,menubar=no,scrollbars=yes, resizable=no,location=no, status=no")}else{document.all.WebBrowser.ExecWB(7,1)}})}else{if("chrome"==g){a("#"+p.printButton).click(function(){var q=document.body.innerHTML;window.print();document.body.innerHTML=q})}}function e(q){var s=new RegExp("(^|&)"+q+"=([^&]*)(&|$)","i");var t=window.location.search.substr(1).match(s);if(t!=null){return decodeURIComponent(t[2])}return""}function m(){var q={};var r=navigator.userAgent.toLowerCase();var t;(t=r.match(/msie ([\d.]+)/))?q.ie=t[1]:(t=r.match(/firefox\/([\d.]+)/))?q.firefox=t[1]:(t=r.match(/chrome\/([\d.]+)/))?q.chrome=t[1]:(t=r.match(/opera.([\d.]+)/))?q.opera=t[1]:(t=r.match(/version\/([\d.]+).*safari/))?q.safari=t[1]:0;if(q.ie){return"ie"}else{if(q.firefox){return"firefox"}else{if(q.chrome){return"chrome"}else{if(q.opera){return"opera"}else{if(q.safari){return"safari"}else{return""}}}}}}function b(){var s,q,r;q=navigator.appVersion;r=navigator.appName;if(r=="Microsoft Internet Explorer"){s=parseFloat(q.substring(q.indexOf("MSIE")+5,q.lastIndexOf("Windows")))}else{s=parseFloat(q)}return s}function n(q){if(q.isAutoPageBreak){var t=0;if("ie"==g){if(q.isVertical){t=1020}else{t=810}}else{if("chrome"==g){if(q.isVertical){t=1070}else{t=750}}}var r=0;var s="<table width='100%' cellpadding='0' cellspacing='0' border='0'>";a("tr").each(function(u){r+=a(this).height();if(r<t){s+=a(this).prop("outerHTML")}else{if(r==t){s+=a(this).prop("outerHTML");s+="</table><table width='100%' cellpadding='0' cellspacing='0' border='0'>";if(q.isContainHeader){if(a(this).next("tr").hasClass(q.itemClass)){s+=a("tr."+q.headerClass).prop("outerHTML");r+=a("tr."+q.headerClass).height()}}r=0}else{s+="</table><table width='100%' cellpadding='0' cellspacing='0' border='0'>";r=0;if(q.isContainHeader){if(a(this).hasClass(q.itemClass)){s+=a("tr."+q.headerClass).prop("outerHTML");r+=a("tr."+q.headerClass).height()}}s+=a(this).prop("outerHTML")}}});s+="</table>";l.empty().html(s)}}function o(s){if("ie"==g){var t,q,r;t="HKEY_CURRENT_USER";q="\\Software\\Microsoft\\Internet Explorer\\PageSetup\\";try{var v=new ActiveXObject("WScript.Shell");r="header";v.RegWrite(t+q+r,"");r="footer";v.RegWrite(t+q+r,"");if(b()<8){r="margin_left";v.RegWrite(t+q+r,"0.25");r="margin_right";v.RegWrite(t+q+r,"0.25");r="margin_top";v.RegWrite(t+q+r,"0.10");r="margin_bottom";v.RegWrite(t+q+r,"0.10")}else{r="margin_left";v.RegWrite(t+q+r,s.marginLeft);r="margin_right";v.RegWrite(t+q+r,s.marginRight);r="margin_top";v.RegWrite(t+q+r,s.marginTop);r="margin_bottom";v.RegWrite(t+q+r,s.marginBottom)}}catch(u){alert("ActiveX控件被禁用,请按下面步骤操作：\n1、请打开浏览器‘工具’菜单/‘选项’/‘安全’下的‘自定义级别’，\n把‘对没有标记为安全的activex控件进行初始化和脚本运行’设置为‘启用’。\n2、刷新本页 ")}}}}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery","TaJsUtil"],a)}else{a(jQuery)}}(function($){function init(target){$(target).addClass("validatebox-text")}function clearValidate(target){$(target).removeClass("validatebox-invalid");$(target).parents("div.fielddiv2").css("borderColor","");hideTip(target)}function bindEvents(target){var box=$(target);var tip=$.data(target,"validatebox").tip;if(box.hasClass("checkboxgroup")||box.hasClass("radiogroup")){box.find(".ta_pw_chkbox").unbind(".validatebox").bind("click.validatebox",function(){if(!validate(target)){showTip(target)}});box.find(".ta_pw_radio").unbind(".validatebox").bind("click.validatebox",function(){if(!validate(target)){showTip(target)}});box.find(">label.fieldLabel").unbind(".validatebox").bind("click.validatebox",function(){if(!validate(target)){showTip(target)}})}else{box.unbind(".validatebox").bind("focus.validatebox",function(){var valid=validate(target);if(!valid){showTip(target)}}).bind("blur.validatebox",function(){validate(target);hideTip(target)}).bind("mouseover.validatebox",function(){if(box.hasClass("validatebox-invalid")){showTip(target)}}).bind("mouseout.validatebox",function(){if(document.activeElement!=target){hideTip(target)}}).bind("keyup.validatebox",function(){if(!validate(target)){showTip(target)}})}}function showTip(target){var $input=$(target);if($input.hasClass("ffb-input")){return}var box;if($input.hasClass("checkboxgroup")){box=$input}else{box=$input.parent("div.fielddiv2")}if(box&&box.length<1){box=$input.parent("div.slick-cell")}var msg=$.data(target,"validatebox").message;if(msg==$.fn.validatebox.defaults.missingMessage){return}var tip=$.data(target,"validatebox").tip;if(!tip){tip=$('<div class="validatebox-tip"><div class="validatebox-tip-content  ui-corner-all ffb_163"></div><div class="validatebox-tip-pointer"></div></div>').appendTo("body");$.data(target,"validatebox").tip=tip}var $c=tip.find(".validatebox-tip-content");$c.html(msg);var cheight=tip.outerHeight(true);if(cheight==0){cheight=17}var _left=box.offset().left+10;var _top=box.offset().top;var isright=($(window).width()-_left)<150?true:false;if(_top>cheight-2){if(isright){var tmp=tip.find("div.validatebox-tip-pointer-right");if(tmp.length==0){$('<div class="validatebox-tip-pointer-right">').insertAfter($c)}tip.find("div.validatebox-tip-pointer").remove()}else{var tmp=tip.find("div.validatebox-tip-pointer");if(tmp.length==0){$('<div class="validatebox-tip-pointer">').insertAfter($c)}}_top=_top-cheight}else{if(isright){var tmp=tip.find("div.validatebox-tip-pointer-topright");if(tmp.length==0){$('<div class="validatebox-tip-pointer-topright">').insertBefore($c)}tip.find("div.validatebox-tip-pointer").remove()}else{var tmp=tip.find("div.validatebox-tip-pointer-topleft");if(tmp.length==0){$('<div class="validatebox-tip-pointer-topleft">').insertBefore($c)}tip.find("div.validatebox-tip-pointer").remove()}_top=_top+box.outerHeight(true)}tip.css({display:"block",left:_left,top:_top});$.data(target,"validatebox").tip=tip;setTimeout(function(){hideTip(target)},1000)}function hideTip(target){var data=$.data(target,"validatebox");if(data&&data.tip){data.tip.fadeOut(1000);setTimeout(function(){if(data.tip){data.tip.remove()}data.tip=null},1000)}}function makeInvalid(target,tipMessage){$(target).addClass("validatebox-invalid");$(target).parents("div.fielddiv2").css("borderColor","#c30");setTipMessage(target,tipMessage)}function setTipMessage(target,msg){var cachedata=$.data(target,"validatebox");if(!cachedata){$.data(target,"validatebox",{message:msg})}else{$.data(target,"validatebox").message=msg}}function validate(target){var data=$.data(target,"validatebox");if(!data){return true}var opts=data.options;var tip=data.tip;var value,pSize;var box=$(target);if(target.id!=""){pSize=$("#"+target.id).hasClass("amountfield")}else{pSize=$(target).hasClass("amountfield")}if(pSize){value=$("#"+target.id+"_hidden").val()}else{value=box.val()}if(box.hasClass("checkboxgroup")||box.hasClass("radiogroup")){value=Base.getValue(target.id)}var disabled=box.attr("disabled"),readonly=box.attr("readOnly");if(disabled==true||disabled=="true"){return true}if(opts.required){if(value==""||(value&&value.length&&value.length==0)||!value){makeInvalid(target,opts.missingMessage);return false}}if(opts.validType){if(opts.validType=="self"){if(typeof eval(opts.validFunction)=="function"){var selfResults=eval(opts.validFunction)();makeInvalid(target,opts.invalidMessage||selfResults.message);return selfResults.result}}var result=/([a-zA-Z_]+)(.*)/.exec(opts.validType);var rule=opts.rules[result[1]];if(value&&rule){var param=eval(result[2]);if(!rule.validator(value,param)){var message=rule.message;if(param){for(var i=0;i<param.length;i++){message=message.replace(new RegExp("\\{"+i+"\\}","g"),param[i])}}makeInvalid(target,opts.invalidMessage||message);return false}}}box.removeClass("validatebox-invalid");box.parents("div.fielddiv2").css("borderColor","");hideTip(target);return true}function setRequired(target,required){var $obj=$(target);if(required){$obj.attr("required","true");var d=$.data(target,"validatebox");if(d){d.options.required=required}else{$obj.validatebox();$obj.validatebox("clear")}}else{$obj.removeAttr("required");var d=$.data(target,"validatebox");if(d){d.options.required=false}$obj.validatebox("clear")}}$.fn.validatebox=function(options,param){if(typeof options=="string"){switch(options){case"clear":return this.each(function(){clearValidate(this)});case"validate":return this.each(function(){validate(this)});case"isValid":return validate(this[0]);case"makeInvalid":return makeInvalid(this[0],param);case"setRequired":return setRequired(this[0],param)}}options=options||{};return this.each(function(){var state=$.data(this,"validatebox");if(state){$.extend(state.options,options)}else{init(this);var t=$(this);state=$.data(this,"validatebox",{options:$.extend({},$.fn.validatebox.defaults,{required:(t.attr("required")?(t.attr("required")=="true"||t.attr("required")=="required"||t.attr("required")==true):undefined),validType:(t.attr("validType")||undefined),missingMessage:(t.attr("toolTip")||t.attr("missingMessage")||undefined),invalidMessage:(t.attr("invalidMessage")||undefined),validFunction:(t.attr("validFunction")||undefined)},options)})}bindEvents(this)})};$.fn.validatebox.defaults={required:false,validType:null,missingMessage:"此项为必输项!",invalidMessage:null,rules:{email:{validator:function(value){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(value)},message:"您输入的不符合email格式要求"},url:{validator:function(value){return/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(value)},message:"您输入的不合URL格式要求"},length:{validator:function(value,param){var len=(value+"").replace(/[^\x00-\xff]/gmi,"pp").length;return len>=param[0]&&len<=param[1]},message:"输入的字符长度必须在 {0} 和 {1}之间"},chinese:{validator:function(value){return/^[\u4e00-\u9fa5]+$/.test(value)},message:"只能输入中文"},date:{validator:function(value,param){this.message="按n键自动输入当前时间";if(!Ta.util.isDate(value)){return false}if(!jQuery.isArray(param)){return true}if(param[0]==""&&param[1]!=""){this.message="输入的日期必须小于或等于{1}";return value<=param[1]}else{if(param[0]!=""&&param[1]==""){this.message="输入的日期必须大于或等于{0}";return value>=param[0]}else{this.message="输入的日期必须在 {0} 到 {1}之间";return(value>=param[0])&&(value<=param[1])}}},message:"您输入的日期格式不正确,按n键自动输入当天日期"},datetime:{validator:function(value,param){this.message="您输入的日期时间格式不正确,按n键自动输入当前时间";if(!Ta.util.isDateTime(value)){return false}this.message="输入的日期时间必须在{0}到{1}之间";if(!jQuery.isArray(param)){return true}if(param[0]==""&&param[1]!=""){this.message="输入的日期时间必须小于或等于{1}";return value<=param[1]}else{if(param[0]!=""&&param[1]==""){this.message="输入的日期时间必须大于或等于{0}";return value>=param[0]}else{this.message="输入的日期时间必须在{0}到{1}之间";return(value>=param[0])&&(value<=param[1])}}},message:"您输入的日期时间格式不正确,按n键自动输入当前时间"},issue:{validator:function(value,param){var bformat=/^\d{4}((0[1-9])|(1[0-2]))$/.test(value);this.message="您输入的期号不正确";if(!bformat){return false}if(!jQuery.isArray(param)){return true}this.message="输入的期号必须在 {0} 到 {1}之间";if(param[0]==""&&param[1]!=""){this.message="输入的期号必须小于或等于{1}";return value<=param[1]}else{if(param[0]!=""&&param[1]==""){this.message="输入的期号必须大于或等于{0}";return value>=param[0]}else{this.message="输入的期号必须在{0}到{1}之间";return(value>=param[0])&&(value<=param[1])}}},message:"您输入的期号不正确"},dateMonth:{validator:function(value,param){var bformat=/^\d{4}-((0[1-9])|(1[0-2]))$/.test(value);this.message="您输入的年月不正确";if(!bformat){return false}if(!jQuery.isArray(param)){return true}this.message="输入的年月必须在 {0} 到 {1}之间";if(param[0]==""&&param[1]!=""){this.message="输入的年月必须小于或等于{1}";return value<=param[1]}else{if(param[0]!=""&&param[1]==""){this.message="输入的年月必须大于或等于{0}";return value>=param[0]}else{this.message="输入的年月必须在{0}到{1}之间";return(value>=param[0])&&(value<=param[1])}}},message:"您输入的年月不正确"},dateYear:{validator:function(value,param){var bformat=/^\d{4}/.test(value);this.message="您输入的年份不正确";if(!bformat){return false}if(!jQuery.isArray(param)){return true}if(param[0]==""&&param[1]!=""){this.message="输入的日期必须小于或等于{1}";return value<=param[1]}else{if(param[0]!=""&&param[1]==""){this.message="输入的日期必须大于或等于{0}";return value>=param[0]}else{this.message="输入的日期必须在 {0} 到 {1}之间";return(value>=param[0])&&(value<=param[1])}}},message:"您输入的年份不正确"},zipcode:{validator:function(value){return/[0-9]\d{5}(?!\d)/.test(value)},message:"您输入的邮编不正确"},mobile:{validator:function(value){return/^1[3|4|5|8][0-9]\d{8}$/.test(value)},message:"您输入的手机号码格式不正确"},ip:{validator:function(value){return/^((?:(?:25[0-5]|2[0-4]\d|((1\d{2})|([1-9]?\d)))\.){3}(?:25[0-5]|2[0-4]\d|((1\d{2})|([1-9]?\d))))$/.test(value)},message:"您输入的IP地址格式不正确"},integer:{validator:function(value){return/^-?[1-9]\d*$/.test(value)},message:"只能输入整数"},number:{validator:function(value,param){if(isNaN(value)){return false}if(!jQuery.isArray(param)){return true}if(param[0]===""&&param[1]!==""){this.message="输入的数值必须小于或等于{1}";return Number(value)<=Number(param[1])}else{if(param[0]!==""&&param[1]===""){this.message="输入的数值必须大于或等于{0}";return Number(value)>=Number(param[0])}else{this.message="输入的数值必须在{0}到{1}之间";return(Number(value)>=Number(param[0]))&&(value<=Number(param[1]))}}return true},message:"只能输入数字"},checkboxgroup:{validator:function(value,param){var length=value.length;return length<=param[1]&&length>=param[0]},message:"选的个数必须在{0} 到 {1}之间"},compare:{validator:function(value,param){var targetValue=Base.getValue(param[1]);var targetLabel=Base.getFieldLabel(param[1]);if(!isNaN(value)&&!isNaN(targetValue)){value=Number(value);targetValue=Number(targetValue)}switch(param[0]){case"=":this.message="您输入的值必须与["+targetLabel+"]相同";return value==targetValue;case">":this.message="您输入的值必须大于["+targetLabel+"]";return value>targetValue;case"<":this.message="您输入的值必须小于["+targetLabel+"]";return value<targetValue;case">=":this.message="您输入的值必须大于或等于["+targetLabel+"]";return value>=targetValue;case"<=":this.message="您输入的值必须小于或等于["+targetLabel+"]";return value<=targetValue;case"!=":this.message="您输入的值不能等于["+targetLabel+"]";return value!=targetValue}return true},message:"与其他输入项不匹配"},idcard:{validator:function(value){var sId=value;if(sId.length==15){if(!/^\d{14}(\d|x)$/i.test(sId)){this.message="你输入的身份证长度或格式错误";return false}else{sId=sId.substr(0,6)+"19"+sId.substr(6,9);sId+=getVCode(sId)}}function getVCode(CardNo17){var Wi=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2,1);var Ai=new Array("1","0","X","9","8","7","6","5","4","3","2");var cardNoSum=0;for(var i=0;i<CardNo17.length;i++){cardNoSum+=CardNo17.charAt(i)*Wi[i]}var seq=cardNoSum%11;return Ai[seq]}var aCity={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外"};var iSum=0;var info="";if(!/^\d{17}(\d|x)$/i.test(sId)){this.message="你输入的身份证长度或格式错误";return false}sId=sId.replace(/x$/i,"a");if(aCity[parseInt(sId.substr(0,2))]==null){this.message="你的身份证地区非法";return false}sBirthday=sId.substr(6,4)+"-"+Number(sId.substr(10,2))+"-"+Number(sId.substr(12,2));var d=new Date(sBirthday.replace(/-/g,"/"));if(sBirthday!=(d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate())){this.message="身份证上的出生日期非法";return false}for(var i=17;i>=0;i--){iSum+=(Math.pow(2,i)%11)*parseInt(sId.charAt(17-i),11)}if(iSum%11!=1){this.message="你输入的身份证号非法";return false}return true},message:"您输入的身份证号非法"}}}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery","WdatePicker"],a)}else{a(jQuery)}}(function(b){function a(u,e,d,q){e&&(e=b(e))||(e=this);d||(d={});var f,m,l,g,r,v,t,p;u||(u=[]);e.keyup(function(o){f=o.keyCode;if(e.attr("readonly")==true||e.attr("readonly")=="readonly"){return}if(96<=f&&f<=105){f=f-48}o||(o=window.event||{keyCode:0});if(o.ctrlKey||o.shiftKey||o.altKey||o.metaKey){return true}if(f==13){return true}if(f==78){switch(q){case 1:this.value=Ta.util.getCurDate();break;case 2:this.value=Ta.util.getCurDateTime();break;case 3:this.value=Ta.util.getCurIssue();break;case 4:this.value=String(Ta.util.getCurDateTime()).substring(11,19);break;case 5:this.value=Ta.util.getCurDateMonth();break;case 6:this.value=Ta.util.getCurDateYear();break}$this=b(this);setTimeout(function(){$this.focus()},10);return false}v=String(this.value);if(v.length==6&&!e.hasClass("issuefield")){var s=v.substring(v.length-1,v.length);if(s>1){v=v.substring(0,v.length-1)+"0"+s}this.value=v}if(v.length==9&&!e.hasClass("issuefield")){var s=v.substring(v.length-1,v.length);if(s>3){v=v.substring(0,v.length-1)+"0"+s}this.value=v}l=(v=String(this.value)).length;if(0==u.length||(112<=f&&123>=f)||27==f||9==f||91==f||20==f||18==f||17==f||16==f||(35<=f&&46>=f)){return true}if(8==f){if(p=d[l]){this.value=String(this.value).substring(0,String(this.value).length-1);l=(v=String(this.value)).length;return true}else{return true}}if(p=d[l]){this.value+=p,l=(v=String(this.value)).length}if(189==f){f=45}for(m=0;m<u.length;m++){g=u[m];if(l>g.length){return false}if((v.length==5&&!e.hasClass("issuefield"))||v.length==8||v.length==11||v.length==14||v.length==17){v=v.substring(0,v.length-2);v+=String.fromCharCode(f)}else{var s=v.substring(v.length-1,v.length);if(isNaN(s)){v=v.substring(0,v.length-1);v+=String.fromCharCode(f)}}if((v.length==4&&!e.hasClass("issuefield"))||v.length==7&&!e.hasClass("dateMonthfield")||v.length==10&&!e.hasClass("datefield")||v.length==13||v.length==16){r=g[l-2].test(v)}else{r=g[l-1].test(v)}n(r,this)}return false;function n(w,x){if(w){l=String(this.value=v).length;if(e.attr("maxlength")==7&&l==7){this.value=v}else{if((p=d[l])){if(x.value.substring(4,5)!="-"&&x.value.length>4){b(x).val(x.value.substring(0,4)+p)}if(x.value.substring(7,8)!="-"&&x.value.length>7){b(x).val(x.value.substring(0,7)+p)}}}}else{if(l<e.attr("maxlength")){l=String(e.val(v.substring(0,v.length-1))).length;if(p=d[l]){e.val(e.val()-p)}}else{v=v.substring(0,v.length-1);l=String(e.val()).length;e.val(v);if(p=d[l]){e.val(e.val()-p)}}}}})}jQuery.fn.extend({datetimemask:function(d){switch(d){case 1:a([[/\d/,/\d{2}/,/\d{3}/,/\d{4}/,/\d{4}[\-\xBD]/,/\d{4}[\-\xBD][0-1]/,/\d{4}[\-\xBD]((0[1-9])|(1[0-2]))/,/\d{4}[\-\xBD]((0[1-9])|(1[0-2]))[\-\xBD]/,/\d{4}[\-\xBD]((0[1-9])|(1[0-2]))[\-\xBD][0-3]/,/\d{4}[\-\xBD]((0[1-9])|(1[0-2]))[\-\xBD]((0[1-9])|([1-2][0-9])|(3[0-1]))/]],this,{4:"-",7:"-"},1);if(this[0].value.length>10){this[0].value=this[0].value.substring(0,10)}break;case 2:a([[/\d/,/\d{2}/,/\d{3}/,/\d{4}/,/\d{4}[\-\xBD]/,/\d{4}[\-\xBD][0-1]/,/\d{4}[\-\xBD]((0[1-9])|(1[0-2]))/,/\d{4}[\-\xBD]((0[1-9])|(1[0-2]))[\-\xBD]/,/\d{4}[\-\xBD]((0[1-9])|(1[0-2]))[\-\xBD][0-3]/,/\d{4}[\-\xBD]((0[1-9])|(1[0-2]))[\-\xBD]((0[1-9])|([1-2][0-9])|(3[0-1]))/,/\d{4}[\-\xBD]((0[1-9])|(1[0-2]))[\-\xBD]((0[1-9])|([1-2][0-9])|(3[0-1])) /,/\d{4}[\-\xBD]((0[1-9])|(1[0-2]))[\-\xBD]((0[1-9])|([1-2][0-9])|(3[0-1])) [0-2]/,/\d{4}[\-\xBD]((0[1-9])|(1[0-2]))[\-\xBD]((0[1-9])|([1-2][0-9])|(3[0-1])) (([0-1][0-9])|(2[0-3]))/,/\d{4}[\-\xBD]((0[1-9])|(1[0-2]))[\-\xBD]((0[1-9])|([1-2][0-9])|(3[0-1])) (([0-1][0-9])|(2[0-3])):/,/\d{4}[\-\xBD]((0[1-9])|(1[0-2]))[\-\xBD]((0[1-9])|([1-2][0-9])|(3[0-1])) (([0-1][0-9])|(2[0-3])):[0-5]/,/\d{4}[\-\xBD]((0[1-9])|(1[0-2]))[\-\xBD]((0[1-9])|([1-2][0-9])|(3[0-1])) (([0-1][0-9])|(2[0-3])):[0-5]\d/,/\d{4}[\-\xBD]((0[1-9])|(1[0-2]))[\-\xBD]((0[1-9])|([1-2][0-9])|(3[0-1])) (([0-1][0-9])|(2[0-3])):[0-5]\d:/,/\d{4}[\-\xBD]((0[1-9])|(1[0-2]))[\-\xBD]((0[1-9])|([1-2][0-9])|(3[0-1])) (([0-1][0-9])|(2[0-3])):[0-5]\d:[0-5]/,/\d{4}[\-\xBD]((0[1-9])|(1[0-2]))[\-\xBD]((0[1-9])|([1-2][0-9])|(3[0-1])) (([0-1][0-9])|(2[0-3])):[0-5]\d:[0-5]\d/]],this,{4:"-",7:"-",10:" ",13:":",16:":"},2);if(this[0].value.length>19){this[0].value=this[0].value.substring(0,19)}break;case 3:a([[/\d/,/\d{2}/,/\d{3}/,/\d{4}/,/\d{4}[0-1]/,/\d{4}((0[1-9])|(1[0-2]))/]],this,null,3);if(this[0].value.length>6){this[0].value=this[0].value.substring(0,6)}break;case 4:a([[/[0-2]/,/(([0-1][0-9])|(2[0-3]))/,/(([0-1][0-9])|(2[0-3])):/,/(([0-1][0-9])|(2[0-3])):[0-5]/,/(([0-1][0-9])|(2[0-3])):[0-5]\d/,/(([0-1][0-9])|(2[0-3])):[0-5]\d:/,/(([0-1][0-9])|(2[0-3])):[0-5]\d:[0-5]/,/(([0-1][0-9])|(2[0-3])):[0-5]\d:[0-5]\d/]],this,{2:":",5:":"},4);if(this[0].value.length>8){this[0].value=this[0].value.substring(0,8)}break;case 5:a([[/\d/,/\d{2}/,/\d{3}/,/\d{4}/,/\d{4}[\-\xBD]/,/\d{4}[\-\xBD][0-1]/,/\d{4}[\-\xBD]((0[1-9])|(1[0-2]))/]],this,{4:"-"},5);if(this[0].value.length>7){this[0].value=this[0].value.substring(0,7)}break;case 6:a([[/\d/,/\d{2}/,/\d{3}/,/\d{4}/]],this,null,6);if(this[0].value.length>4){this[0].value=this[0].value.substring(0,4)}break}}})}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery","datetimeMask"],a)}else{a(jQuery)}}(function(b){b.extend(true,window,{taissue:a});function a(d,f){var e=this;f=b.extend({txtWidth:100,disabled:false,readOnly:false,txtHeight:20,txtId:"issue",txtName:"dto['issue']"},f||{});function g(){var o=b("#"+f.txtId);o.unbind(".issue");o.bind("click.issue",function(){if("readonly"===(o.attr("readOnly"))){return}o.datetimemask(3);o.validatebox("validate");var q,p;var s=o.val();var r=parseInt(new Date().getFullYear());if(s==""||s==null){q=r}else{switch(s.length){case 1:s=s+"000";break;case 2:s=s+"00";break;case 3:s=s+"0";break;default:break}q=parseInt(s.substring(0,4))}if((r-9-q)>0){if((r-9-q)%10==0){p=q}else{if((r-9-q)%10==1){p=q-9}else{p=q-(10-(r-9-q)%10)}}}else{p=r-9}if(p<1000){p=1004}l(q,f.txtId,p,0)});function l(z,r,s,y){s=parseInt(s);var v=b("#"+r+"_years");if(v[0]){v.remove()}v=b('<div id="'+r+'_years"></div>');v.addClass("issue_years");if(y=="0"){s=s}else{if(y=="1"){s=s-10}else{s=s+10}}var p=Base.globvar.contextPath+"/ta/resource/themes/base/issue/images/";var A=b("<div></div>");A.addClass("issue_up");var t=b("<input type='image'/>");t.css({height:"10px",border:"0px"}).attr("src",p+"up.png").bind("click",function(){l(z,r,s,"1")}).appendTo(A);A.appendTo(v);var q=b("<div></div>");q.addClass("issue_down");var w=b("<input type='image'/>");w.css({height:"10px",border:"0px"}).attr("src",p+"down.png").bind("click",function(){l(z,r,s,"2")}).appendTo(q);var x="";for(var u=0;u<10;u++){x='<div id="'+(s+u)+'">'+(s+u)+"</div>";b(x).addClass("issue_year").appendTo(v).click(function(){n(this,r)})}q.appendTo(v);v.appendTo(d);b("#"+z).addClass("is_selected");d.show();v.show()}function n(r,q){b(r).parent().find("div").removeClass("is_selected");b(r).addClass("is_selected");var x=b("#"+q+"_months");if(x[0]){x.remove()}x=b('<div id="'+q+'_months"></div>');x.addClass("issue_months").css({left:"62px",width:"172px",height:"226px"});var w=b("<div>月份</div>");w.addClass("month_title");var z=b("<div style='height:100%;'></div>");w.appendTo(x);z.appendTo(x);var A=b('<table width="100%" height="89%" align="center" style="margin-bottom:10px;"></table>');A.appendTo(z);var s=0;for(var u=1;u<5;u++){var p=b("<tr></tr>");var y="";p.appendTo(A);for(var t=1;t<4;t++){s=parseInt(s)+1;var v=s+"";if(s<10){v="0"+s}y='<td val="'+(b(r).attr("id")+v)+'">'+parseInt(s)+"月</td>";b(y).addClass("is_td").appendTo(p).click(function(){m(this,q)})}}x.insertAfter(b("#"+q+"_years"));x.show()}function m(q,r){var p=b(q).attr("val");b("#"+r).val(p);b("#"+r+"_months").hide();d.hide()}return e}g();b.extend(this,{cmptype:"taissue"})}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(b){b.fn.extend({moneyInput:a});function a(n,u){var e=this;var y;var w;var v;var f;var A;var s;var r;var l;var t;var p=false;function x(){var B=n;var E=B.cnBox;if(E!=undefined&&typeof E==="string"&&E!==""){if(E.indexOf("#")===-1){E="#"+E}y=b(E);if(y.length<1){throw new Error("cnBox: "+E+" does not exist.")}p=true}v=e;s=e[0].id||"";if(s===""||v.length<1){throw new Error("moneyInput container: "+s+" does not exist.")}f=v.get(0);b(f).bind("keypress.moneybox",function(F){if(b(this).attr("precision")==0&&F.which==46){return false}if(b(this).val().indexOf(".")!=-1&&b(this).val().length-b(this).val().indexOf(".")>b(this).attr("precision")){return false}if(F.which==45){return false}if(F.which==46){if(b(this).val().indexOf(".",b(this).val().indexOf("."))!=-1){return false}return true}else{if((F.which>=48&&F.which<=57&&F.ctrlKey==false&&F.shiftKey==false)||F.which==0||F.which==8){return true}else{if(F.ctrlKey==true&&(F.which==99||F.which==118)){return true}else{return false}}}});w=b("#"+s+"_hidden");if(w.length<1){var D=b(e).attr("name");b(e).removeAttr("name");w=b('<input id="'+s+'_hidden" type="text" style="display:none" name="'+D+'" value="'+b(e).val()+'"/>').insertAfter(v);if(p){w.insertAfter(y)}else{w.insertAfter(v)}v.bind("focus",z);v.bind("blur",d);v.bind("keyup",q)}A=w.get(0);l=(B.symbol==undefined?"":B.symbol);t=(B.decimalPlace==undefined?0:parseInt(B.decimalPlace));_numberRound=(B.numberRound==undefined?true:B.numberRound);if(f.value.trim()>0){var C=f.value.replaceAll(",","");if(l!=""){C=C.replaceAll(l,"")}g(C)}}function z(){var B=parseFloat(A.value);B=isNaN(B)?"":new Number(B);if(t!==0&&B!==""){if(_numberRound==true||_numberRound=="true"){B=B.toFixed(t).toString()}else{var F=B.toString();var C=F.indexOf(".");if(C<0){B=F}else{B=F.substring(0,C+t+1)}}var G=B.indexOf(".");if(G!=-1){var E=B.substring(0,G);var I=B.substring(G,B.length);if(I.indexOf("0")!=-1){for(var D=I.length-1;D>0;D--){var H=I.charAt(D);if(H==="0"){I=I.slice(0,D)}else{break}}}I=(I==="."?"":I);B=E+I}}if(t==0){if(_numberRound==true||_numberRound=="true"){B==""?0:B.toFixed(t).toString()}else{var F=B.toString();var C=F.indexOf(".");if(C<0){B=F}else{B=F.substring(0,C+t)}}}f.value=((isNaN(B)||B==undefined||B==="")?"":B)}function d(){var C=r=(A.value==="")?"":parseFloat(A.value);if(_numberRound==true||_numberRound=="true"){C=(C!==""&&String(C.toFixed(t)))}else{var G=C.toString();var B=G.indexOf(".");if(B<0){var I=Number(G)}else{var I=Number(G.substring(0,B+t+1))}C=(C!==""&&String(I))}if(C.toString().indexOf(".")<0){if(t>0){C=C+".";for(var E=0;E<t;E++){C+="0"}}}else{var D=(C.substring(C.indexOf("."))).length-1;if(D<t&&D>0){for(var E=0;E<t-D;E++){C+="0"}}}var H;if(C){H=C.substring(C.lastIndexOf("."),C.length);C=C.substring(0,C.indexOf("."))}var F=/(-?\d+)(\d{3})/;if(r!=undefined||r!==""){while(F.test(C)){C=C.replace(F,"$1,$2")}}C=C+H;f.value=((r==undefined||r==="")?"":l+C);if(p){o()}}function q(F){var E=parseFloat(f.value);r=isNaN(E)?"":E;E=new Number(E);if(_numberRound==true||_numberRound=="true"){A.value=((isNaN(f.value)||isNaN(E)||r==="")?"":E.toFixed(t))}else{var D=E.toString();var B=D.indexOf(".");if(B<0){var C=Number(D)}else{var C=Number(D.substring(0,B+t+1))}A.value=((isNaN(f.value)||isNaN(E)||r==="")?"":C)}}function o(){var C=r;var F="零元整";var B="";var G="仟佰拾亿仟佰拾万仟佰拾元角分";C+="00";var E=C.indexOf(".");if(E>=0){C=C.substring(0,E)+C.substr(E+1,2)}G=G.substr(G.length-C.length);for(var D=0;D<C.length;D++){B+="零壹贰叁肆伍陆柒捌玖".substr(C.substr(D,1),1)+G.substr(D,1)}F=B.replace(/零角零分$/,"整").replace(/零[仟佰拾]/g,"零").replace(/零{2,}/g,"零").replace(/零([亿|万])/g,"$1").replace(/零+元/,"元").replace(/亿零{0,3}万/,"亿").replace(/^元/,"零元");y.text((isNaN(r)||r==undefined||r==="")?"":F)}function m(){return A.value}function g(D){D=String(D);r=D;var C=r=(A.value==="")?"":parseFloat(A.value);if(_numberRound==true||_numberRound=="true"){C=(C!==""&&String(C.toFixed(t)))}else{var G=C.toString();var B=G.indexOf(".");if(B<0){var H=Number(G)}else{var H=Number(G.substring(0,B+t+1))}C=(C!==""&&String(H))}if(C.indexOf(".")<0){if(t!==undefined){C=C+".";for(var F=0;F<t;F++){C+="0"}}}else{var E=(C.substring(C.indexOf("."))).length-1;if(E<t&&E>0){for(var F=0;F<t-E;F++){C+="0"}}}f.value=l+C;A.value=C;v.blur()}x();if(typeof n.getValue==="string"||typeof n.setValue==="string"){if("getValue"===n.getValue){return m()}else{if("setValue"===n.setValue){if(u!=undefined){if(u==""){A.value=u;f.value=u;return}A.value=u;g(u)}}}}}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery","TaJsUtil"],a)}else{a(jQuery)}}(function(b){function f(n){var m=b.data(n,"numberbox").options;var o=null;if(m.numberRound==true||m.numberRound=="true"){o=parseFloat(b(n).val()).toFixed(m.precision)}else{var l=b(n).val();var g=l.indexOf(".");if(l===""){o=""}else{if(g==-1){o=Number(l)}else{o=Number(l.substring(0,g+m.precision+1))}}}if(isNaN(o)){b(n).val("");return}o=o.toString();if(m.min!=null&&m.min!=undefined&&o<m.min){b(n).val(m.min.toFixed(m.precision))}else{if(m.max!=null&&m.max!=undefined&&o>m.max){b(n).val(m.max.toFixed(m.precision))}else{b(n).val(o)}}}function e(g){b(g).unbind(".numberbox");b(g).bind("keypress.numberbox",function(l){if((b(this).attr("precision")==undefined||b(this).attr("precision")==0)&&l.which==46){return false}if(b(this).val().indexOf(".")!=-1&&b(this).val().length-b(this).val().indexOf(".")>b(this).attr("precision")){return false}if(l.which==45){if(b(this).val().indexOf("-")!=-1){return false}else{b(this).val("-"+b(this).val())}}if(b(this).attr("max")){}if(l.which==46){if(b(this).val().indexOf(".",b(this).val().indexOf("."))!=-1){return false}return true}else{if((l.which>=48&&l.which<=57&&l.ctrlKey==false&&l.shiftKey==false)||l.which==0||l.which==8){return true}else{if(l.ctrlKey==true&&(l.which==99||l.which==118)){return true}else{return false}}}}).bind("paste.numberbox",function(m,l){return true}).bind("dragenter.numberbox",function(){return false}).bind("blur.numberbox",function(){f(g)}).bind("keydown.numberbox",function(l){if(l.keyCode==13){f(g)}})}function d(l){if(b.fn.validatebox){var g=b.data(l,"numberbox").options;b(l).validatebox(g)}}function a(m,g){var l=b.data(m,"numberbox").options;if(g){l.disabled=true;b(m).attr("disabled",true)}else{l.disabled=false;b(m).removeAttr("disabled")}}b.fn.numberbox=function(g,l){if(typeof g=="string"){switch(g){case"disable":return this.each(function(){a(this,true)});case"enable":return this.each(function(){a(this,false)})}}g=g||{};return this.each(function(){var n=b.data(this,"numberbox");if(n){b.extend(n.options,g)}else{var m=b(this);n=b.data(this,"numberbox",{options:b.extend({},b.fn.numberbox.defaults,{disabled:(m.attr("disabled")?true:undefined),min:(m.attr("min")=="0"?0:parseFloat(m.attr("min"))||undefined),max:(m.attr("max")=="0"?0:parseFloat(m.attr("max"))||undefined),precision:(parseInt(m.attr("precision"))||undefined),numberRound:(m.attr("numberRound"))},g)});m.removeAttr("disabled");b(this).css({imeMode:"disabled"})}if(l!==undefined){b(this).val(l)}a(this,n.options.disabled);f(this);e(this);d(this)})};b.fn.numberbox.defaults={disabled:false,min:null,max:null,precision:0,numberRound:"true"}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(b){b.extend(true,window,{taspinner:a});function a(l,g){var f=this;g=b.extend({maxValue:9999999,minValue:-9999999,defValue:1,addValue:1,txtWidth:100,readOnly:true,txtHeight:20,txtId:"xx",notUse:"false",txtName:"dto['xx']",defaultSrc:Base.globvar.contextPath+"/ta/resource/themes/base/spinner/images/"},g||{});defaultSrc1=Base.globvar.contextPath+"/ta/resource/themes/base/spinner/images/";function n(){$topDIV=b(l);var q="<input type='text' name=\""+g.txtName+"\" class='textinput spinner' /><img src='"+defaultSrc1+"spin-button.png' />";$topDIV.append(b(q));var p=$topDIV.find("input");if(g.readOnly==true){p.attr("readonly",true)}else{if(g.readOnly==false){p.attr("readonly",false)}}p.keyup(function(){var r=parseFloat(p.attr("value"));if(isNaN(r)||r<g.minValue){p.attr("value",g.defValue)}else{if(r>g.maxValue){p.attr("value",g.maxValue)}else{p.attr("value",r)}}}).bind("paste",function(){b(this).val(b(this).val().replace(/\D|^0/g,""))}).css("ime-mode","disabled");var o=$topDIV.find("img:first");o.height(21).width(20).addClass("imgspinner");p.attr("value",g.defValue);p.unbind("change");p.bind("change",function(){var r=parseFloat(p.attr("value"));if(isNaN(r)||r>g.maxValue||r<g.minValue){p.attr("value",g.defValue)}else{p.attr("value",g.defValue)}});o.hover(function(){b(this).addClass("_handHover")},function(){b(this).removeClass("_handHover")});o.unbind("click");if(g.notUse=="true"){e(g.txtId,false)}else{if(g.notUse=="false"){e(g.txtId,true)}}return f}function e(r,o){var q=b("#"+r+"_divtop").find("input");var p=b("#"+r+"_divtop").find("img:first");if(o==true){q.removeClass();q.addClass("textinput spinner");p.bind("click",function(u){if(!u){u=window.event}var v=u.pageY;var s=b(this).offset().top;var w=b(this).attr("height");var t=parseFloat(q.attr("value"));if(isNaN(t)){q.attr("value",g.defValue)}else{if(2*(v-s)>w){p.attr("src",g.defaultSrc+"spin-down.png");if(t-g.addValue>=g.minValue){q.attr("value",m(t,g.addValue))}else{if(t-g.addValue<g.minValue){q.attr("value",g.minValue)}}}else{p.attr("src",g.defaultSrc+"spin-up.png");if(t+g.addValue<=g.maxValue){q.attr("value",d(t,g.addValue))}else{if((t+g.addValue)>g.maxValue){q.attr("value",g.maxValue)}}}setTimeout(function(){p.attr("src",g.defaultSrc+"spin-button.png")},200)}})}else{q.removeClass();q.attr("readonly",true);q.addClass("textinput readonly spinner");p.unbind()}}function d(s,r){var q,p,o;try{q=s.toString().split(".")[1].length}catch(t){q=0}try{p=r.toString().split(".")[1].length}catch(t){p=0}o=Math.pow(10,Math.max(q,p));return(s*o+r*o)/o}function m(s,r){var q,p,o,u;try{q=s.toString().split(".")[1].length}catch(t){q=0}try{p=r.toString().split(".")[1].length}catch(t){p=0}o=Math.pow(10,Math.max(q,p));u=(q>=p)?q:p;return((s*o-r*o)/o).toFixed(u)}n();b.extend(this,{cmptype:"taspinner",spinnerImgClick:e})}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(a){a.extend(true,window,{SelectGridEditor:b});function b(y,g,N,n,r,q){var v={gridWidth:400,gridHeight:100,onEnter:false,loadFormUrl:false,minChar:5,paramName:"dto['id']",grid:{haveSn:true}};var z=this;var E=null;var f=null;var e=null;var I=null;var d=null;var D=null;var A=null;var P=[];var J=[];var p=true;function F(){n=a.extend({},v,n);E=y;E.empty();e=a("<input/>").attr("type","hidden");f=a("<input/>").attr("type","text").addClass("textinput").css("height","100%").css("width","100%");I=a("<div/>").addClass("slick-selectGrid");e.appendTo(E);f.appendTo(E);I.appendTo(E).hide();C();G();for(field in P){d.setColumnHidden(P[field])}if(!n.loadFormUrl){d.getData().setFilter(w);f.keydown(m).keyup(function(Q){if(Q.which!=38&&Q.which!=40){d.getData().refresh()}})}return z}function o(Q){if(Q){if(Q[A]){f.val(Q[A])}if(Q[D]){e.val(Q[D])}}else{f.val("");e.val("")}d.clearDirty()}function s(){return f.val()}function O(){return e.val()}function x(Q){f.val(Q)}function u(){e.val(value)}function L(){f.val("");e.val("");d.clearDirty()}function H(){return N}function t(Q,S){var R=Base.getJson(Q,S);d.clearDirty();d.getDataView().setItems(R);d.getDataView().refresh();d.refreshGrid()}function m(Q){if(Q.keyCode==38){if(d.getSelectRowsDataToObj().length===0){d.setActiveCell(0,0);d.setSelectedRows([0])}else{d.navigateUp(true)}l(Q)}else{if(Q.keyCode==40){K(true);if(d.getSelectRowsDataToObj().length===0){d.setActiveCell(0,0);d.setSelectedRows([0])}else{d.navigateDown(true)}l(Q)}else{if(Q.keyCode==13){if(d.getSelectRowsDataToObj().length===0){d.setActiveCell(0,0);d.setSelectedRows([0])}l(Q);if(!p){if(n.onSelect){n.onSelect(d.getData().getItemById(d.getSelectedRowsById()[0]))}o(d.getData().getItemById(d.getSelectedRowsById()[0]))}if(p){if(n.onEnter){n.onEnter(z)}return}K(p);d.clearDirty()}else{if(Q.keyCode==27){K(false)}else{if(Q.keyCode==191){K(false);r(z,191)}else{if(Q.keyCode==189){K(false);r(z,189)}else{if(f.val().indexOf(".")==0||event.keyCode==110||event.keyCode==190){K(false)}else{if(p){K(true)}r(z)}}}}}}}}function w(S){if(J.length===0){return true}var Q=new RegExp("^"+f.val());var T=null;for(var R=0;R<J.length;R++){T=S[J[R]];if(Q.test(T)){return true}}return false}function G(){for(var Q=0;Q<g.length;Q++){var R=g[Q];if(R.keyColumn&&R.keyColumn===true){D=R.field}if(R.descColumn&&R.descColumn===true){A=R.field}if(R.hiddenColumn&&R.hiddenColumn===true){P.push(R.field)}if(R.filterColumn){J.push(R.field)}}if(D==null){throw"必须指定keyColumn "}if(A==null){throw"必须指定descColumn "}}function l(Q){if(!p){setTimeout(function(){f.focus()},10)}Q.cancelBubble=true;Q.returnValue=false;if(Q.stopPropagation){Q.stopPropagation();Q.preventDefault()}}function K(R){if(p&&R){d.getData().refresh();setTimeout(function(){f.focus()},10);var T=f.parents(".slick-viewport");var Q=T.offset().top-a(window).scrollTop();if(T.height()-(f.offset().top-Q)-27<v.gridHeight){var S=(-Number(v.gridHeight)-5);I.css("top",S+"px");I.removeClass("slick-selectGrid-down");I.addClass("slick-selectGrid-up")}else{I.removeClass("slick-selectGrid-up");I.addClass("slick-selectGrid-down")}I.show();p=false}else{if(!R){I.hide();d.clearDirty();p=true}}a("body").bind("click.selectgriddiv",function(V){var U;if(a.browser.msie){U=V.srcElement}else{U=V.target}I.hide();d.clearDirty();p=true;a("body").unbind(".selectgriddiv")})}function B(R,Q){o(Q);l(R);if(n.onSelect){n.onSelect(Q)}if(typeof r=="function"){r(z,null,Q)}I.hide();p=true;d.clearDirty()}function C(){var R=n.grid;var Q=a("<div/>").css("height",n.gridHeight).css("width",n.gridWidth).appendTo(I).resizable({handles:"e",minWidth:50});d=new Slick.Grid(Q,N,g,R);d.onClick.subscribe(B)}function M(){return f}F();a.extend(this,{_grid:d,getInput:M,setDescData:x,getDescData:s,getKeyData:O,getGridData:H,setData:o,clearData:L})}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(a){a.extend(true,window,{SelectGrid:b});function b(B,g,M,n,r,q){var v={gridWidth:500,gridHeight:300,onEnter:false,loadFormUrl:false,minChar:5,paramName:"dto['id']"};var y=this;var E=null;var f=null;var e=null;var I=null;var d=null;var D=null;var z=null;var O=null;var J=[];var p=true;function F(){n=a.extend({},v,n);E=a("#"+B).empty();e=a("<input/>").attr("type","hidden").attr("id",B+"_key").attr("name","dto['"+B+"']");f=a("<input/>").attr("type","text").attr("id",B+"_desc").addClass("textinput");I=a("<div/>").css("border-style","outset").css("float","left").css("position","absolute").css("background-color","white").css("top",25).css("z-index","99999").attr("id",B+"_div");e.appendTo(E);f.appendTo(E);I.appendTo(E).hide();C();G();d.setColumnHidden(O);if(!n.loadFormUrl){d.getData().setFilter(w);f.keydown(m).keyup(function(P){f.val(f.val());if(P.which!=38&&P.which!=40){d.getData().refresh()}})}else{f.keydown(m).keyup(function(R){if(R.keyCode<=47||R.keyCode>=96){return}var P=f.val();if(P.length>n.minChar){var Q={};Q[n.paramName]=P;t(q,Q)}})}return y}function o(P){if(P){if(P[z]){f.val(P[z])}if(P[D]){e.val(P[D])}}else{f.val("");e.val("")}d.clearDirty()}function s(){return f.val()}function N(){return e.val()}function x(P){f.val(P)}function u(){e.val(value)}function L(){f.val("");e.val("");d.clearDirty()}function H(){return M}function t(P,R){var Q=Base.getJson(P,R);d.clearDirty();d.getDataView().setItems(Q);d.getDataView().refresh();d.refreshGrid()}function m(Q){if(Q.keyCode==38){if(d.getSelectRowsDataToObj().length===0){d.setActiveCell(0,0);d.setSelectedRows([0])}else{d.navigateUp()}l(Q)}else{if(Q.keyCode==40){K(true);if(d.getSelectRowsDataToObj().length===0){d.setActiveCell(0,0);d.setSelectedRows([0])}else{d.navigateDown()}l(Q)}else{if(Q.keyCode==13){if(d.getSelectRowsDataToObj().length===0){d.setActiveCell(0,0);d.setSelectedRows([0])}l(Q);if(!p){r(y,189,d.getData().getItemById(d.getSelectedRowsById()[0]));o(d.getData().getItemById(d.getSelectedRowsById()[0]))}if(p){if(n.onEnter){n.onEnter(y)}var P=Base._getNextFormField(B+"_desc");if(P){a(P).focus()}return}K(p);d.clearDirty()}else{if(Q.keyCode==27){K(false)}else{if(Q.keyCode==191){K(false);r(y,191)}else{if(Q.keyCode==189){K(false);r(y,189)}else{if(a("#"+B+"_desc").val().indexOf(".")==0||event.keyCode==110||event.keyCode==190){K(false)}else{if(p){K(true)}r(y)}}}}}}}}function w(R){if(J.length===0){return true}var P=new RegExp(f.val());var S=null;for(var Q=0;Q<J.length;Q++){S=R[J[Q]];if(P.test(S)){return true}}return false}function G(){for(var P=0;P<g.length;P++){var Q=g[P];if(Q.keyColumn&&Q.keyColumn===true){D=Q.field}if(Q.descColumn&&Q.descColumn===true){z=Q.field}if(Q.hiddenColumn&&Q.hiddenColumn===true){O=Q.field}if(Q.filterColumn){J.push(Q.field)}}if(D==null){throw"必须指定keyColumn "}if(z==null){throw"必须指定descColumn "}}function l(P){if(!p){setTimeout(function(){f.focus()},10)}P.cancelBubble=true;P.returnValue=false;if(P.stopPropagation){P.stopPropagation();P.preventDefault()}}function K(P){if(p&&P){d.getData().refresh();setTimeout(function(){f.focus()},10);I.show();p=false}else{if(!P){I.hide();d.clearDirty();p=true}}a("body").bind("click.selectgriddiv",function(R){var Q;if(a.browser.msie){Q=R.srcElement}else{Q=R.target}if(Q&&Q.id==f.attr("id")){return}I.hide();d.clearDirty();p=true;a("body").unbind(".selectgriddiv")})}function A(Q,P){o(P);l(Q);if(typeof r=="function"){r(y,null,P)}I.hide();p=true;d.clearDirty()}function C(){var Q=n.grid;var P=a("<div/>").attr("id",B+"_grid").css("height",n.gridHeight).css("width",n.gridWidth).appendTo(I).resizable({handles:"e",minWidth:50});d=new Slick.Grid("#"+B+"_grid",M,g,Q);d.onClick.subscribe(A)}F();a.extend(this,{_grid:d,getDescData:s,getKeyData:N,getGridData:H,clearData:L})}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery","api.forms"],a)}else{a(jQuery)}}(function($){$.flexbox=function(div,o){this.cmptype="flexbox";var first=true;var timeout=false,cache=[],cacheData=[],cacheSize=0,delim="\u25CA",scrolling=false,pageSize=o.paging&&o.paging.pageSize?o.paging.pageSize:0,retrievingRemoteData=false,defaultVisibleRows=o.maxVisibleRows>0?o.maxVisibleRows:1,$div=$(div).css("position","relative").css("z-index",0);var arrowClick;var $arrow,$refreshCode;var disables=[];var $hdn=$('<input type="hidden"/>').val(o.initialValue).appendTo($div);if(!o.allowInputOtherText){var $md5list=$('<input type="hidden"/>').val(o.md5list).appendTo($div)}var $input=$('<input autocomplete="off"/>');if(Base.globvar.indexStyle=="default"){$input.addClass(o.inputClass).addClass("ffb-input_163")}else{$input.addClass(o.inputClass)}$input.css("width",o.width).appendTo($div).click(function(e){if(o.watermark!==""&&this.value===o.watermark){this.value=""}else{arrowClick()}}).change(function(){if(typeof o.onChange=="function"){o.onChange($input.val(),$hdn.val())}}).focus(function(){if(typeof o.onFocus=="function"){o.onFocus($input.val(),$hdn.val())}}).blur(function(e){if(this.value===""){$hdn.val("")}if(!o.allowInputOtherText){clearInput(this.value)}else{for(var i=0;i<o.source.results.length;i++){if(this.value==o.source.results[i].name){break}if(i==o.source.results.length-1){$hdn.val(this.value)}}}}).keydown(processKeyDown);if(o.submitDesc&&o.name!==""){var desc=o.name.replace("']","");desc+="_desc']";$input.attr("name",desc)}if(o.name!==""){$hdn.attr("name",o.name);if(!o.allowInputOtherText){var desc=o.name.replace("']","");desc+="_md5list']";$md5list.attr("name",desc)}}if(o.divId!==""){$hdn.attr("id",o.divId);$input.attr("id",o.divId+"_desc");if(o.placeholder!=null&&o.placeholder!=""){$input.attr("placeholder",o.placeholder);Base.funPlaceholder(document.getElementById(o.divId+"_desc"))}if(!o.allowInputOtherText){$md5list.attr("id",o.divId+"_md5list")}}if(o.required){$input.attr("required","true")}if(o.readonly&&o.readonly=="true"){o.readonly=true}else{o.readonly=false}if(o.initialValue!==""){$input.val(o.initialValue).removeClass("watermark")}else{if(o.selectFirstValue){$input.val(o.source.results[0][o.displayValue]);$hdn.val(o.source.results[0][o.hiddenValue])}else{$input.val(o.watermark).addClass("watermark")}}var arrowWidth=0;var refreshcodeWidth=0;if(o.showArrow&&o.showResults){arrowClick=function(){if($ctr.is(":visible")){hideResults()}else{if(o.watermark!==""&&$input.val()===o.watermark){$input.val("")}else{$input.select()}if(timeout){clearTimeout(timeout)}timeout=setTimeout(function(){flexbox(1,true,o.arrowQuery)},o.queryDelay)}first=false};$arrow=$("<span></span>").attr("id",$div.attr("id")+"_arrow");if(Base.globvar.indexStyle=="default"){$arrow.addClass(o.arrowClass).addClass("ffb-arrow_163")}else{$arrow.addClass(o.arrowClass)}$arrow.addClass("out").hover(function(){$(this).removeClass("out").addClass("over")},function(){$(this).removeClass("over").addClass("out")}).mousedown(function(){$(this).removeClass("over").addClass("active")}).mouseup(function(){$(this).removeClass("active").addClass("over")}).click(arrowClick).appendTo($div);arrowWidth=$arrow.width();$input.css("width","100%");if(o.showRefresh=="true"){$refreshCode=$('<span class="ffb-refreshcode out">').attr("id",$div.attr("id")+"_refreshCode").hover(function(){$(this).removeClass("out").addClass("over")},function(){$(this).removeClass("over").addClass("out")}).mousedown(function(){$(this).removeClass("over").addClass("active")}).mouseup(function(){$(this).removeClass("active").addClass("over")}).click(arrowClick).appendTo($div);refreshcodeWidth=$refreshCode.width()}else{$arrow.css("right",-1)}}if(!o.isFocusShowPanel){$input.unbind("focus")}if(!o.allowInput){o.selectFirstMatch=false;$input.click(arrowClick)}var inputPad=$input.outerHeight(true)-$input.height()-2;var inputWidth=$input.outerWidth(true)-2;var top=21;var $ctr=$("<div></div>").attr("id",$div.attr("id")+"_ctr").css("width","100%");if(Base.globvar.indexStyle=="default"){$ctr.css("left","-9px")}else{$ctr.css("left","0px")}$ctr.css("top",top).css("position","absolute").addClass(o.containerClass).appendTo($div).mousedown(function(e){}).hide();if(o.widthPercentage){$ctr.css("width",o.widthPercentage)}var $content=$('<div style="overflow-x:hidden;overflow-y:auto;"></div>').addClass(o.contentClass).appendTo($ctr).scroll(function(){scrolling=true});var $paging=$("<div></div>").appendTo($ctr);if($.fn.resizable){$ctr.resizable({handles:"e",maxWidth:900,minWidth:50,onStartResize:function(){$content.hide()},onStopResize:function(){$content.width($ctr.width());$content.show()}})}function processKeyDown(e){var mod=0;if(typeof(e.ctrlKey)!=="undefined"){if(e.ctrlKey){mod|=1}if(e.shiftKey){mod|=2}}else{if(e.modifiers&Event.CONTROL_MASK){mod|=1}if(e.modifiers&Event.SHIFT_MASK){mod|=2}}if(/16$|17$/.test(e.keyCode)){return}var tab=e.keyCode===9,esc=e.keyCode===27;var tabWithModifiers=e.keyCode===9&&mod>0;var backspace=e.keyCode===8;if(tab){if(getCurr()){selectCurr()}}if((/27$|38$|33$|34$/.test(e.keyCode)&&$ctr.is(":visible"))||(/13$|40$/.test(e.keyCode))||!o.allowInput){if(e.preventDefault){e.preventDefault()}if(e.stopPropagation){e.stopPropagation()}e.cancelBubble=true;e.returnValue=false;switch(e.keyCode){case 38:prevResult();break;case 40:if($ctr.is(":visible")){nextResult()}else{flexboxDelay(true)}break;case 13:if(getCurr()){selectCurr()}else{var next=Base._getNextFormField(o.divId+"_desc");if(next&&next.id){Base.focus(next.id)}$(next).select()}break;case 27:hideResults();break;case 34:if(!retrievingRemoteData){if(o.paging){$("#"+$div.attr("id")+"n").click()}else{nextPage()}}break;case 33:if(!retrievingRemoteData){if(o.paging){$("#"+$div.attr("id")+"p").click()}else{prevPage()}}break;default:if(!o.allowInput){return}}}else{if(!esc&&!tab&&!tabWithModifiers){flexboxDelay(false,backspace)}}}function flexboxDelay(simulateArrowClick,increaseDelay){if(timeout){clearTimeout(timeout)}var delay=increaseDelay?o.queryDelay*5:o.queryDelay;timeout=setTimeout(function(){flexbox(1,simulateArrowClick,"")},delay)}function flexbox(p,arrowOrPagingClicked,prevQuery,pageClick){$("body").bind("click.selectinput",function(e){var srcobj;if($.browser.msie){srcobj=e.srcElement}else{srcobj=e.target}if(srcobj&&(srcobj.id==$input.attr("id")||srcobj.id==$ctr.attr("id"))){return}hideResults();$("body").unbind(".selectinput")});if(arrowOrPagingClicked){prevQuery=""}var filterBool=true;var q=prevQuery&&prevQuery.length>0?prevQuery:$input.val();if(q!==""&&!pageClick){if(o.paging){var j,page=o.source.total/pageSize;for(var i=0;i<o.source.total;i++){if(o.showValue=="key"){if(o.source[o.resultsProperty][i][o.hiddenValue]==q){filterBool=false;j=i;break}}else{if(o.showValue=="all"){if((o.source[o.resultsProperty][i][o.hiddenValue]+":"+o.source[o.resultsProperty][i][o.displayValue])==q){filterBool=false;j=i;break}}else{if(o.source[o.resultsProperty][i][o.displayValue]==q){filterBool=false;j=i;break}}}if(o.source.results[i][o.displayValue]==q){}}if(j){p=parseInt(j/pageSize);p+=1}}}else{if(pageClick){q=""}}if(q.length>=o.minInputChars||arrowOrPagingClicked){if($content.outerHeight(true)>0){$content.css("height",$content.outerHeight(true))}if(Base.globvar.indexStyle=="default"){var widthPercent=1;if(o.widthPercentage){widthPercent=parseInt(o.widthPercentage,10)/100}var pWidth=$content.parents(".fielddiv2").outerWidth(false);if(pWidth){$content.css("width",pWidth*widthPercent);$content.parent("div").css("width",pWidth*widthPercent)}}$content.html("");var cached=checkCache(q,p);if(o.showAllArrow&&cached){$content.css("height","auto");displayItems(o.source,q);showPaging(p,cached.t)}else{var params={q:q,p:p,s:pageSize,filter:filterBool,contentType:"application/json; charset=utf-8"};var callback=function(data,overrideQuery,params){if(typeof data=="string"){try{eval("var data = "+data)}catch(ex){throw"后台反回json错误"}}if(overrideQuery===true){q=overrideQuery}var totalResults=parseInt(data[o.totalProperty]);var totalSize=displayItems(data,q,params);showPaging(p,totalResults);$content.css("height","auto");var $selectDiv=$content.find("."+o.selectClass);if($selectDiv.length>0){$content.scrollTop($selectDiv[0].offsetTop-7)}retrievingRemoteData=false};if(typeof(o.source)==="object"){if(o.allowInput){callback(o.source,null,params)}else{callback(o.source)}}else{retrievingRemoteData=true;if(o.method.toUpperCase()=="POST"){$.post(o.source,params,callback,"json")}else{$.ajax({url:o.source,success:callback,data:params})}}}}else{hideResults()}}function filter(data,params){if(!params.filter&&!$ctr.is(":visible")){params.q=""}var filtered={};filtered[o.resultsProperty]=[];filtered[o.totalProperty]=0;var index=0;for(var i=0;i<data[o.resultsProperty].length;i++){var indexOfMatch=data[o.resultsProperty][i][o.displayValue].toLowerCase().indexOf(params.q.toLowerCase());var id_indexOfMatch=data[o.resultsProperty][i][o.hiddenValue].toString().toLowerCase().indexOf(params.q.toLowerCase());if(data[o.resultsProperty][i][o.pyFilter]!=undefined){var pyMatch=data[o.resultsProperty][i][o.pyFilter].toLowerCase().indexOf(params.q.toLowerCase());if((o.matchAny&&pyMatch!==-1)||(!o.matchAny&&pyMatch===0)){filtered[o.resultsProperty][index++]=data[o.resultsProperty][i];filtered[o.totalProperty]+=1;continue}}if((o.matchAny&&indexOfMatch!==-1)||(o.matchAny&&id_indexOfMatch!==-1)||(!o.matchAny&&indexOfMatch===0)){filtered[o.resultsProperty][index++]=data[o.resultsProperty][i];filtered[o.totalProperty]+=1}}if(o.paging){var start=(params.p-1)*params.s;var howMany=(start+params.s)>filtered[o.totalProperty]?filtered[o.totalProperty]-start:params.s;filtered[o.resultsProperty]=filtered[o.resultsProperty].splice(start,howMany)}return filtered}function showPaging(p,totalResults){$paging.html("").removeClass(o.paging.cssClass);if(o.showResults&&o.paging&&totalResults>pageSize){var pages=totalResults/pageSize;if(totalResults%pageSize>0){pages=parseInt(++pages)}outputPagingLinks(pages,p,totalResults)}}function handleKeyPress(e,page,totalPages){if(/^13$|^39$|^37$/.test(e.keyCode)){if(e.preventDefault){e.preventDefault()}if(e.stopPropagation){e.stopPropagation()}e.cancelBubble=true;e.returnValue=false;switch(e.keyCode){case 13:if(/^\d+$/.test(page)&&page>0&&page<=totalPages){flexbox(page,true)}else{alert("Please enter a page number between 1 and "+totalPages)}break;case 39:$("#"+$div.attr("id")+"n").click();break;case 37:$("#"+$div.attr("id")+"p").click();break}}}function handlePagingClick(e){flexbox(parseInt($(this).attr("page")),true,$input.attr("pq"),true);return false}function outputPagingLinks(totalPages,currentPage,totalResults){var first="&lt;&lt;",prev="&lt;",next="&gt;",last="&gt;&gt;",more="...";$paging.addClass(o.paging.cssClass);var $link=$("<a/>").attr("href","#").addClass("page").click(handlePagingClick),$span=$("<span></span>").addClass("page"),divId=$div.attr("id");if(currentPage>1){$link.clone(true).attr("id",divId+"f").attr("page",1).html(first).appendTo($paging);$link.clone(true).attr("id",divId+"p").attr("page",currentPage-1).html(prev).appendTo($paging)}else{$span.clone(true).html(first).appendTo($paging);$span.clone(true).html(prev).appendTo($paging)}if(o.paging.style==="links"){var maxPageLinks=o.paging.maxPageLinks;if(totalPages<=maxPageLinks){for(var i=1;i<=totalPages;i++){if(i===currentPage){$span.clone(true).html(currentPage).appendTo($paging)}else{$link.clone(true).attr("page",i).html(i).appendTo($paging)}}}else{if((currentPage+parseInt(maxPageLinks/2))>totalPages){startPage=totalPages-maxPageLinks+1}else{startPage=currentPage-parseInt(maxPageLinks/2)}if(startPage>1){$link.clone(true).attr("page",startPage-1).html(more).appendTo($paging)}else{startPage=1}for(var i=startPage;i<startPage+maxPageLinks;i++){if(i===currentPage){$span.clone(true).html(i).appendTo($paging)}else{$link.clone(true).attr("page",i).html(i).appendTo($paging)}}if(totalPages>(startPage+maxPageLinks)){$link.clone(true).attr("page",i).html(more).appendTo($paging)}}}else{if(o.paging.style==="input"){var $pagingBox=$("<input/>").addClass("box").click(function(e){this.select()}).keypress(function(e){return handleKeyPress(e,this.value,totalPages)}).val(currentPage).appendTo($paging)}}if(currentPage<totalPages){$link.clone(true).attr("id",divId+"n").attr("page",+currentPage+1).html(next).appendTo($paging);$link.clone(true).attr("id",divId+"l").attr("page",totalPages).html(last).appendTo($paging)}else{$span.clone(true).html(next).appendTo($paging);$span.clone(true).html(last).appendTo($paging)}var startingResult=(currentPage-1)*pageSize+1;var endingResult=(startingResult>(totalResults-pageSize))?totalResults:startingResult+pageSize-1;if(o.paging.showSummary){var summaryData={start:startingResult,end:endingResult,total:totalResults,page:currentPage,pages:totalPages};var html=o.paging.summaryTemplate.applyTemplate(summaryData);$("<br/>").appendTo($paging);$("<span></span>").addClass(o.paging.summaryClass).html(html).appendTo($paging)}}function checkCache(q,p){var key=q+delim+p;if(cacheData[key]){for(var i=0;i<cache.length;i++){if(cache[i]===key){cache.unshift(cache.splice(i,1)[0]);return cacheData[key]}}}return false}function updateCache(q,p,s,t,data,size){if(o.maxCacheBytes>0){while(cache.length&&(cacheSize+size>o.maxCacheBytes)){var cached=cache.pop();cacheSize-=cached.size}var key=q+delim+p;cacheData[key]={q:q,p:p,s:s,t:t,size:size,data:data};cache.push(key);cacheSize+=size}}function createItems(d,q,params){var totalSize=0,itemCount=0;var selectClassRow=[];var selectTop,selectBottom;if($input.parents(".tabs-panels").size()>=1){var $tab=$input.parents(".tabs-panels").first();selectTop=$input.offset().top-$tab.offset().top;selectBottom=$tab.offset().top+$tab.height()-$input.offset().top-o.itemHeight}else{selectTop=$input.offset().top-$(window).scrollTop();selectBottom=$(window).height()-selectTop-o.itemHeight}var $topContainer=$div.parent().parent().parent().parent();if($topContainer&&$topContainer.hasClass("slick-viewport")){var gridViewportTop=$topContainer.offset().top-$(window).scrollTop();var gridViewportBottom=$(window).height()-gridViewportTop-$topContainer.height();selectTop=gridViewportTop>0?(selectTop-gridViewportTop):selectTop;selectBottom=gridViewportBottom>0?(selectBottom-gridViewportBottom):selectBottom}var topMaxVisibleRows=parseInt(selectTop/o.itemHeight);var bottomMaxVisibleRows=parseInt(selectBottom/o.itemHeight);var dataAfterFilter=[];if(parseInt(d[o.totalProperty])===0&&o.noResultsText&&o.noResultsText.length>0){$content.addClass(o.noResultsClass).html(o.noResultsText);$ctr.parent().css("z-index",11000);$ctr.css({top:21});if(o.isAutoExtend){if(selectTop>selectBottom){if(bottomMaxVisibleRows==0){$ctr.css({top:-21})}}}$ctr.show();return}else{$content.removeClass(o.noResultsClass)}for(var i=0;i<d[o.resultsProperty].length;i++){var flag=true;var data=d[o.resultsProperty][i];for(var j=0;j<disables.length;j++){if(!o.reverseFilter&&disables[j]==data[o.hiddenValue]){flag=false;break}else{if(o.reverseFilter&&disables[j]==data[o.hiddenValue]){dataAfterFilter.push(data);flag=false;break}else{if(o.reverseFilter){flag=false}}}}if(!flag){continue}dataAfterFilter.push(data)}var dataAfterFilterPage={};dataAfterFilterPage[o.resultsProperty]=dataAfterFilter;var dataAfterFilterPageData=filter(dataAfterFilterPage,params);for(var i=0;i<dataAfterFilterPageData[o.resultsProperty].length;i++){var data2=dataAfterFilterPageData[o.resultsProperty][i],result=o.resultTemplate.applyTemplate(data2),exactMatch=q===result,selectedMatch=false,hasHtmlTags=false,match=data2[o.displayValue];if(!exactMatch&&o.highlightMatches&&q!==""){var pattern=q,highlightStart=match.toLowerCase().indexOf(q.toLowerCase()),replaceString='<span class="'+o.matchClass+'">'+match.substr(highlightStart,q.length)+"</span>";if(result.match("<(.|\n)*?>")){hasHtmlTags=true;pattern="(>)([^<]*?)("+q+")((.|\n)*?)(<)";replaceString='$1$2<span class="'+o.matchClass+'">$3</span>$4$6'}result=result.replace(new RegExp(pattern,o.highlightMatchesRegExModifier),replaceString)}if(o.autoCompleteFirstMatch&&!hasHtmlTags&&i===0){if(q.length>0&&match.toLowerCase().indexOf(q.toLowerCase())===0){$input.attr("pq",q);$hdn.val(data[o.hiddenValue]);$input.val(data[o.displayValue]);selectedMatch=selectRange(q.length,$input.val().length)}}if(!o.showResults){return}$row=$("<div></div>").attr("id",data2[o.hiddenValue]).attr("val",data2[o.displayValue]).appendTo($content);if(o.islevel=="true"){if(data2.level&&data2.level!=null){$row.css("paddingLeft",13*(data2.level-1)).attr("level",data2.level)}if(data2.leaf){$row.attr("leaf",data2.leaf)}}if(typeof o.infomouseover=="function"){$row.bind("mouseover",o.infomouseover)}if(typeof o.infomouseout=="function"){$row.bind("mouseout",o.infomouseout)}if(o.showKey){$row.html(data2[o.hiddenValue]+": "+result)}else{$row.html(result)}if(exactMatch){var isNew=true;for(var k=0;k<selectClassRow.length;k++){if(selectClassRow[k]==$row){isNew=false}}if(isNew){selectClassRow.push($row);itemCount++}}else{if(!exactMatch&&(++itemCount==1&&o.selectFirstMatch)||selectedMatch){var isNew=true;for(var k=0;k<selectClassRow.length;k++){if(selectClassRow[k]==$row){isNew=false}}if(isNew){selectClassRow.push($row)}}}totalSize+=result.length}if(o.selectFirstMatch&&selectClassRow.length>0){selectClassRow.pop().addClass(o.selectClass)}if(totalSize===0){hideResults();return}$ctr.parent().css("z-index",11000);if(selectBottom>=selectTop){var result=([bottomMaxVisibleRows,defaultVisibleRows,20,dataAfterFilterPageData[o.resultsProperty].length]).sort(function(a,b){return a-b})[0];o.maxVisibleRows=(result==0)?1:result;$ctr.show();$ctr.css({top:21})}else{var needVisibleRows;if(o.filter){if(o.reverseFilter&&disables.length>0){needVisibleRows=([disables.length,defaultVisibleRows,20]).sort(function(a,b){return a-b})[0]}else{needVisibleRows=([defaultVisibleRows,20,dataAfterFilterPageData[o.resultsProperty].length-disables.length]).sort(function(a,b){return a-b})[0]}}else{needVisibleRows=([defaultVisibleRows,20,dataAfterFilterPageData[o.resultsProperty].length]).sort(function(a,b){return a-b})[0]}if(bottomMaxVisibleRows>=needVisibleRows){o.maxVisibleRows=needVisibleRows;$ctr.show();$ctr.css({top:21})}else{var reslult=(topMaxVisibleRows>=needVisibleRows)?needVisibleRows:topMaxVisibleRows;o.maxVisibleRows=(reslult==0)?1:reslult;$ctr.show();if(o.maxVisibleRows>0){var maxHeight=$row.outerHeight(true)*o.maxVisibleRows;if(o.paging){var pageSize=o.paging&&o.paging.pageSize?o.paging.pageSize:0;var page=o.source.total/pageSize;if(page&&page>=1){maxHeight=maxHeight+25}}$content.css("max-height",maxHeight+2);if(o.isAutoExtend){$ctr.css({top:-(maxHeight+2+21)})}else{$ctr.css({top:21})}}}}if(o.maxVisibleRows>0){var maxHeight=$row.outerHeight(true)*o.maxVisibleRows;$content.css("max-height",maxHeight+2)}$content.children("div").mouseover(function(){$content.children("div").removeClass(o.selectClass);$(this).addClass(o.selectClass)}).mouseup(function(e){e.cancelBubble=true;e.returnValue=false;if(e.stopPropagation){e.stopPropagation();e.preventDefault()}selectCurr()});return totalSize}function displayItems(d,q,params){if((d.total==0||!d.total)&&o.collection){var selectTop,selectBottom;if($input.parents(".tabs-panels").size()>=1){var $tab=$input.parents(".tabs-panels").first();selectTop=$input.offset().top-$tab.offset().top;selectBottom=$tab.offset().top+$tab.height()-$input.offset().top-o.itemHeight}else{selectTop=$input.offset().top-$(window).scrollTop();selectBottom=$(window).height()-selectTop-o.itemHeight}var $topContainer=$div.parent().parent().parent().parent();if($topContainer&&$topContainer.hasClass("slick-viewport")){var gridViewportTop=$topContainer.offset().top-$(window).scrollTop();var gridViewportBottom=$(window).height()-gridViewportTop-$topContainer.height();selectTop=gridViewportTop>0?(selectTop-gridViewportTop):selectTop;selectBottom=gridViewportBottom>0?(selectBottom-gridViewportBottom):selectBottom}var topMaxVisibleRows=parseInt(selectTop/o.itemHeight);var bottomMaxVisibleRows=parseInt(selectBottom/o.itemHeight);$content.addClass(o.noResultsClass).html("努力加载中...");$ctr.parent().css("z-index",11000);$ctr.css({top:21});if(o.isAutoExtend){if(selectTop>selectBottom){if(bottomMaxVisibleRows==0){$ctr.css({top:-21})}}}$ctr.show();$.ajax({cache:true,type:"POST",url:Base.globvar.basePath+"/sysapp/appCodeCacheAction!getCacheByCollection.do",dataType:"json",data:"collection="+o.collection,async:true,error:function(request){alert("Connection error")},success:function(data){$content.addClass(o.noResultsClass).html("");$content.removeClass(o.noResultsClass);$ctr.hide();var data=eval(data);d[o.totalProperty]=data.length;var arrays=[];for(var i in data){arrays.push(data[i])}d[o.resultsProperty]=arrays;if(!d){return}createItems(d,q,params)}})}else{if(!d){return}createItems(d,q,params)}}function selectRange(s,l){var tb=$input[0];if(tb.createTextRange){var r=tb.createTextRange();r.moveStart("character",s);r.moveEnd("character",l-tb.value.length);r.select()}else{if(tb.setSelectionRange){tb.setSelectionRange(s,l)}}tb.focus();return true}String.prototype.applyTemplate=function(d){try{if(d===""){return this}return this.replace(/{([^{}]*)}/g,function(a,b){var r;if(b.indexOf(".")!==-1){var ary=b.split(".");var obj=d;for(var i=0;i<ary.length;i++){obj=obj[ary[i]]}r=obj}else{r=d[b]}if(typeof r==="string"||typeof r==="number"){return r}else{throw (a)}})}catch(ex){alert("Invalid JSON property "+ex+" found when trying to apply resultTemplate or paging.summaryTemplate.\nPlease check your spelling and try again.")}};function hideResults(){$input.data("active",false);$div.css("z-index",0);$ctr.hide()}function getCurr(){if(!$ctr.is(":visible")){return false}var $curr=$content.children("div."+o.selectClass);if(!$curr.length){$curr=false}return $curr}function selectCurr(){$curr=getCurr();if(o.isMustLeaf=="true"){var leaf=$curr.attr("leaf");if(leaf=="N"){alert("必须选择子节点");$hdn.val("");$input.val("").focus();return}}if(!isNaN(o.minLevel)){var level=$curr.attr("level");if(level<o.minLevel){alert("必须选择大于第"+o.minLevel+"级的节点");$hdn.val("");$input.val("").focus();return}}if(!isNaN(o.maxLevel)){var level=$curr.attr("level");if(level>o.maxLevel){alert("必须选择小于第"+o.maxLevel+"级的节点");$hdn.val("");$input.val("").focus();return}}if($curr){var oldHdnVal=$hdn.val();$hdn.val($curr.attr("id"));if(o.showValue=="key"){$input.val($curr.attr("id")).focus()}else{if(o.showValue=="all"){$input.val($curr.attr("id")+":"+$curr.attr("val")).focus()}else{$input.val($curr.attr("val")).focus()}}hideResults();if(o.onSelect&&(oldHdnVal!=$hdn.val())){o.onSelect($input.val(),$hdn.val())}}}function supportsGetBoxObjectFor(){try{document.getBoxObjectFor(document.body);return true}catch(e){return false}}function supportsGetBoundingClientRect(){try{document.body.getBoundingClientRect();return true}catch(e){return false}}function nextPage(){$curr=getCurr();if($curr&&$curr.next().length>0){$curr.removeClass(o.selectClass);for(var i=0;i<o.maxVisibleRows;i++){if($curr.next().length>0){$curr=$curr.next()}}$curr.addClass(o.selectClass);var scrollPos=$content.scrollTop();$content.scrollTop(scrollPos+$content.height())}else{if(!$curr){$content.children("div:first-child").addClass(o.selectClass)}}}function prevPage(){$curr=getCurr();if($curr&&$curr.prev().length>0){$curr.removeClass(o.selectClass);for(var i=0;i<o.maxVisibleRows;i++){if($curr.prev().length>0){$curr=$curr.prev()}}$curr.addClass(o.selectClass);var scrollPos=$content.scrollTop();$content.scrollTop(scrollPos-$content.height())}else{if(!$curr){$content.children("div:last-child").addClass(o.selectClass)}}}function nextResult(){$curr=getCurr();if($curr&&$curr.next().length>0){$curr.removeClass(o.selectClass).next().addClass(o.selectClass);var scrollPos=$content.scrollTop(),curr=$curr[0],parentBottom,bottom,height;if(supportsGetBoxObjectFor()){parentBottom=document.getBoxObjectFor($content[0]).y+$content.attr("offsetHeight");bottom=document.getBoxObjectFor(curr).y+$curr.attr("offsetHeight");height=document.getBoxObjectFor(curr).height}else{if(supportsGetBoundingClientRect()){parentBottom=$content[0].getBoundingClientRect().bottom;var rect=curr.getBoundingClientRect();bottom=rect.bottom;height=bottom-rect.top}}if(bottom>=parentBottom-20){$content.scrollTop(scrollPos+height)}}else{if(!$curr){$content.children("div:first-child").addClass(o.selectClass)}}}function clearInput(val){var has,hdnValue;for(var i=0;i<o.source[o.totalProperty];i++){if(o.showValue=="key"){if(o.source[o.resultsProperty][i][o.hiddenValue]==val){has=true;hdnValue=o.source[o.resultsProperty][i][o.hiddenValue];break}}else{if(o.showValue=="all"){if((o.source[o.resultsProperty][i][o.hiddenValue]+":"+o.source[o.resultsProperty][i][o.displayValue])==val){has=true;hdnValue=o.source[o.resultsProperty][i][o.hiddenValue];break}}else{if(o.source[o.resultsProperty][i][o.displayValue]==val){has=true;hdnValue=o.source[o.resultsProperty][i][o.hiddenValue];break}}}}if(has){$hdn.val(hdnValue);return}else{$input.val("");$hdn.val("")}}function disableSelect(id){var dis=$(id,$div)}function prevResult(){$curr=getCurr();if($curr&&$curr.prev().length>0){$curr.removeClass(o.selectClass).prev().addClass(o.selectClass);var scrollPos=$content.scrollTop(),curr=$curr[0],parent=$curr.parent()[0],parentTop,top,height;if(supportsGetBoxObjectFor()){height=document.getBoxObjectFor(curr).height;parentTop=document.getBoxObjectFor($content[0]).y-(height*2);top=document.getBoxObjectFor(curr).y-document.getBoxObjectFor($content[0]).y}else{if(supportsGetBoundingClientRect()){parentTop=parent.getBoundingClientRect().top;var rect=curr.getBoundingClientRect();top=rect.top;height=rect.bottom-top}}if(top<=parentTop+20){$content.scrollTop(scrollPos-height)}}else{if(!$curr){$content.children("div:last-child").addClass(o.selectClass)}}}this.setFocus=function(){$input.focus()};this.getInput=function(){return $input};this.setValue=function(value){if(value!="undefined"){if(typeof value!="string"){value+=""}if(typeof o.source=="string"){return}var length=o.source[o.resultsProperty].length;for(var i=0;i<length;i++){if(value==o.source[o.resultsProperty][i][o.hiddenValue]){$input.val(o.source[o.resultsProperty][i][o.displayValue]);$hdn.val(value);return}if(value==o.source[o.resultsProperty][i][o.displayValue]){$input.val(value);$hdn.val(o.source[o.resultsProperty][i][o.hiddenValue]);return}}clearInput(value)}};this.getValue=function(caseValue){var res;switch(caseValue){case 0:res=$input.val();break;case 1:res=$hdn.val();break;default:res=obj2JSON(o.source[o.resultsProperty]);break}return res};function obj2JSON(value){if(value&&typeof value=="object"&&value.length>0){var str="";str+="[";for(var i=0;i<value.length;i++){str+="{ ";var obj=value[i];for(j in obj){str+=j+':"'+obj[j]+'",'}str=str.slice(0,-1);str+="}";if(i!=value.length-1){str+=","}}str+="]";return str}return"无数据"}this.setEnable=function(bool){if(bool){$input.removeAttr("disabled");$hdn.removeAttr("disabled");$input.removeAttr("readonly");$input.removeClass("textinput readonly");$input.parent().parent().removeClass("readonly");$arrow.click(arrowClick)}else{$input.val("");$hdn.val("");$input.attr("disabled","true").attr("readonly","readonly");$input.addClass("textinput readonly");$hdn.attr("disabled","true");$input.parent().parent().addClass("readonly");$arrow.unbind("click");if($ctr.is(":visible")){hideResults()}}};this.readOnly=function(bool){if(!bool){$input.removeAttr("disabled");$input.removeAttr("readonly");$input.removeClass("textinput readonly");$input.parent().parent().removeClass("readonly");$arrow.click(arrowClick)}else{$input.attr("disabled","true").addClass("textinput readonly").attr("readonly","readonly");$input.parent().parent().addClass("readonly");$arrow.unbind("click");if($ctr.is(":visible")){hideResults()}}};this.loadff=function(url){if(url.total>0&&o.clearData!=""){var appendString={};appendString.id="";appendString.name=o.clearData;url.results.unshift(appendString);url.total=data.total+1}o.source=url;if(o.initialValue==""&&o.selectFirstValue){$input.val(url.results[0][o.displayValue]);$hdn.val(url.results[0][o.hiddenValue])}else{$input.val("");$hdn.val("")}return this};this.setData=function(data){if(data){if(data.results.length>0&&o.clearData!=""){var appendString={};appendString.id="";appendString.name=o.clearData;data.results.unshift(appendString)}o.source=data;o.source.total=data.results.length;$input.val("");$hdn.val("")}};this.setDisableSelect=function(val,isReverseFilter){disables=[];if(isReverseFilter!=undefined){o.reverseFilter=isReverseFilter}var s=[];if(typeof val=="string"){if(val.indexOf("[")!=-1&&$.isArray(eval(val))){s=eval(val)}else{s=val.split(",")}}else{if($.isArray(val)){s=val}}for(var j=0;j<s.length;j++){if(checkFilterValue(s[j])){disables.push(s[j])}}};this.setfilterStartChar=function(val,isReverseFilter){if(isReverseFilter!=undefined){o.reverseFilter=isReverseFilter}var s=[];if(typeof val=="string"){if(val.indexOf("[")!=-1&&$.isArray(eval(val))){s=eval(val)}else{s=val.split(",")}}else{if($.isArray(val)){s=val}}for(var i=0;i<o.source.results.length;i++){for(var j=0;j<s.length;j++){if((o.source.results[i][o.displayValue]+"").indexOf(s[j])==0){disables.push(o.source.results[i][o.hiddenValue]);break}}}};this.fiterValueLengthMin=function(min){for(var i=0;i<o.source.results.length;i++){if((o.source.results[i][o.displayValue]+"").length<min){disables.push(o.source.results[i][o.hiddenValue])}}};this.fiterValueLengthMax=function(max){for(var i=0;i<o.source.results.length;i++){if((o.source.results[i][o.displayValue]+"").length>max){disables.push(o.source.results[i][o.hiddenValue])}}};function checkFilterValue(id){for(var i=0;i<o.source.total;i++){var key=o.source[o.resultsProperty][i][o.hiddenValue];if(key==id){return true}}return false}this.clearSelect=function(){$input.val("");$hdn.val("")};this.getId=function(){return o.divId}};$.fn.flexbox=function(source,options){var flexboxes=[];try{var defaults=$.fn.flexbox.defaults;var o=$.extend({},defaults,options);if(Base.globvar.indexStyle=="default"){o.containerClass="ffb ffb_163 ui-multiselect-menu ui-widget"}if(!source){return}if(source.length>0&&o.clearData!=""){var appendString={};appendString.id="";appendString.name=o.clearData;source.unshift(appendString)}o.source={};o.source.results=source;if(!o.source.total){o.source.total=source.length}if(options){o.paging=(options.paging||options.paging==null)?$.extend({},defaults.paging,options.paging):false;for(var prop in o.paging){if(defaults.paging[prop]===undefined){throw ("Invalid option specified: "+prop+"\nPlease check your spelling and try again.")}}if(options.displayValue&&!options.hiddenValue){o.hiddenValue=options.displayValue}}this.each(function(){var obj=new $.flexbox(this,o);if(o.disabled){obj.setEnable(false)}else{if(o.readonly){obj.readOnly(true)}else{if(o.filter){obj.setDisableSelect(o.filter)}}}flexboxes.push(obj)});return flexboxes}catch(ex){if(typeof ex==="object"){alert(ex.message)}else{alert(ex)}}};$.fn.flexbox.defaults={method:"GET",queryDelay:0,allowInput:true,containerClass:"ffb ui-multiselect-menu ui-widget",contentClass:"content",selectClass:"ffb-select",inputClass:"ffb-input",arrowClass:"ffb-arrow",matchClass:"ffb-match",noResultsText:"没有相匹配的项目",noResultsClass:"ffb-no-results",showResults:true,selectFirstMatch:true,autoCompleteFirstMatch:false,highlightMatches:true,highlightMatchesRegExModifier:"i",matchAny:true,minInputChars:1,showArrow:true,arrowQuery:"",onSelect:false,onChange:false,maxCacheBytes:32768,displayValue:"name",resultTemplate:"{name}",hiddenValue:"id",initialValue:"",watermark:"",width:200,resultsProperty:"results",totalProperty:"total",maxVisibleRows:20,pyFilter:"py",reverseFilter:false,allowInputOtherText:false,showAllArrow:true,isAutoExtend:true,isFocusShowPanel:true,showKey:false,showValue:"value",md5list:"",placeholder:"",clearData:"",disabled:false,readonly:false,name:"",divId:"",required:false,submitDesc:true,showRefresh:false,itemHeight:22,paging:{style:"input",cssClass:"paging",pageSize:1000,maxPageLinks:5,showSummary:false,summaryClass:"summary",summaryTemplate:"{start}-{end} 共 {total} 条"}}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery","ztree.excheck.min","ztree.exedit","ztree.exhide.min"],a)}else{a(jQuery)}}(function(b){b.extend(true,window,{SelectTree:a});function a(e,m,n,q){var l={async:true,asyncParam:["id"],nameKey:"name",idKey:"id",parentKey:"pId",nodesData:""};var f=b("<ul class='ztree'></ul>"),g;if(q.cssStyle){g=b('<div style="'+q.cssStyle+'"></div>')}else{g=b("<div></div>")}var d=e;function p(){q=b.extend({},l,q);if(m!=""&&m!=undefined&&n!=""&&n!=undefined){f.attr("id",n);g.attr("id",d).addClass("selectTreeContainer ffb_163").append(f);if(q.cssClass){g.addClass(q.cssClass)}if(q.height){g.css("height",q.height)}if(q.width){g.css("width",q.width)}b("body").append(g)}var r={selectedMulti:false,autoCancelSelected:false};if(q.fontCss){r.fontCss=q.fontCss}o(r);return this}function o(r){var t={view:r,async:{url:q.url,autoParam:q.asyncParam,enable:q.async},data:{keep:{parent:false,leaf:false},key:{children:"children",name:q.nameKey},simpleData:{enable:true,idKey:q.idKey,pIdKey:q.parentKey,rootPId:""}},callback:{beforeClick:q.selectTreeBeforeClick,onClick:q.selectTreeCallback,end:null}};var s=q.nodesData;b.fn.zTree.init(b("#"+n),t,s)}b.extend(this,{cmptype:"selectTree"});p()}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function($){$.extend(true,window,{AjaxUpload:AjaxUpload});function addEvent(el,type,fn){if(el.addEventListener){el.addEventListener(type,fn,false)}else{if(el.attachEvent){el.attachEvent("on"+type,function(){fn.call(el)})}else{throw new Error("not supported or DOM not loaded")}}}function addResizeEvent(fn){var timeout;addEvent(window,"resize",function(){if(timeout){clearTimeout(timeout)}timeout=setTimeout(fn,100)})}if(document.documentElement.getBoundingClientRect){var getOffset=function(el){var box=el.getBoundingClientRect();var doc=el.ownerDocument;var body=doc.body;var docElem=doc.documentElement;var clientTop=docElem.clientTop||body.clientTop||0;var clientLeft=docElem.clientLeft||body.clientLeft||0;var zoom=1;if(body.getBoundingClientRect){var bound=body.getBoundingClientRect();zoom=(bound.right-bound.left)/body.clientWidth}if(zoom>1){clientTop=0;clientLeft=0}var top=box.top/zoom+(window.pageYOffset||docElem&&docElem.scrollTop/zoom||body.scrollTop/zoom)-clientTop,left=box.left/zoom+(window.pageXOffset||docElem&&docElem.scrollLeft/zoom||body.scrollLeft/zoom)-clientLeft;return{top:top,left:left}}}else{var getOffset=function(el){var top=0,left=0;do{top+=el.offsetTop||0;left+=el.offsetLeft||0;el=el.offsetParent}while(el);return{left:left,top:top}}}function getBox(el){var left,right,top,bottom;var offset=getOffset(el);left=offset.left;top=offset.top;right=left+el.offsetWidth;bottom=top+el.offsetHeight;return{left:left,right:right,top:top,bottom:bottom}}function addStyles(el,styles){for(var name in styles){if(styles.hasOwnProperty(name)){el.style[name]=styles[name]}}}function copyLayout(from,to){var box=getBox(from);addStyles(to,{position:"absolute",left:box.left+"px",top:box.top+"px",width:from.offsetWidth+"px",height:from.offsetHeight+"px"})}var toElement=(function(){var div=document.createElement("div");return function(html){div.innerHTML=html;var el=div.firstChild;return div.removeChild(el)}})();var getUID=(function(){var id=0;return function(){return"ValumsAjaxUpload"+id++}})();function fileFromPath(file){return file.replace(/.*(\/|\\)/,"")}function getExt(file){return(-1!==file.indexOf("."))?file.replace(/.*[.]/,""):""}function hasClass(el,name){var re=new RegExp("\\b"+name+"\\b");return re.test(el.className)}function addClass(el,name){if(!hasClass(el,name)){el.className+=" "+name}}function removeClass(el,name){var re=new RegExp("\\b"+name+"\\b");el.className=el.className.replace(re,"")}function removeNode(el){el.parentNode.removeChild(el)}function AjaxUpload(button,options){this._settings={action:"#",name:"file",multiple:false,data:{},submitIds:false,autoSubmit:true,responseType:"json",hoverClass:"hover",focusClass:"focus",disabledClass:"disabled",onChange:function(file,extension){},onSubmit:function(file,extension){},onComplete:function(file,response){}};this.id=button;for(var i in options){if(options.hasOwnProperty(i)){this._settings[i]=options[i]}}if(button.jquery){button=button[0]}else{if(typeof button=="string"){if(/^#.*/.test(button)){button=button.slice(1)}button=document.getElementById(button)}}if(!button||button.nodeType!==1){throw new Error("Please make sure that you're passing a valid element")}if(button.nodeName.toUpperCase()=="A"){addEvent(button,"click",function(e){if(e&&e.preventDefault){e.preventDefault()}else{if(window.event){window.event.returnValue=false}}})}this._button=button;this._input=null;this._disabled=false;this.enable();this._rerouteClicks()}AjaxUpload.prototype={setData:function(data){this._settings.data=data},disable:function(){addClass(this._button,this._settings.disabledClass);this._disabled=true;var nodeName=this._button.nodeName.toUpperCase();if(nodeName=="INPUT"||nodeName=="BUTTON"){this._button.setAttribute("disabled","disabled")}if(this._input){if(this._input.parentNode){this._input.parentNode.style.visibility="hidden"}}},enable:function(){removeClass(this._button,this._settings.disabledClass);this._button.removeAttribute("disabled");this._disabled=false},_createInput:function(){var self=this;var input=document.createElement("input");input.setAttribute("type","file");input.setAttribute("id",this.id);input.setAttribute("name",this._settings.name);if(this._settings.multiple){input.setAttribute("multiple","multiple")}addStyles(input,{position:"absolute",right:0,margin:0,padding:0,fontFamily:"sans-serif",cursor:"pointer",height:"100%"});var div=document.createElement("div");addStyles(div,{display:"block",position:"absolute",overflow:"hidden",margin:0,padding:0,opacity:0,direction:"ltr",zIndex:2147483583});if(div.style.opacity!=="0"){if(typeof(div.filters)=="undefined"){throw new Error("Opacity not supported by the browser")}div.style.filter="alpha(opacity=0)"}addEvent(input,"change",function(){if(!input||input.value===""){return}var file=fileFromPath(input.value);if(false===self._settings.onChange.call(self,file,getExt(file))){self._clearInput();return}if(self._settings.autoSubmit){self.submit()}});addEvent(input,"mouseover",function(){addClass(self._button,self._settings.hoverClass)});addEvent(input,"mouseout",function(){removeClass(self._button,self._settings.hoverClass);removeClass(self._button,self._settings.focusClass);if(input.parentNode){input.parentNode.style.visibility="hidden"}});addEvent(input,"focus",function(){addClass(self._button,self._settings.focusClass)});addEvent(input,"blur",function(){removeClass(self._button,self._settings.focusClass)});input.height=div.height;div.appendChild(input);document.body.appendChild(div);this._input=input},_clearInput:function(){if(!this._input){return}removeNode(this._input.parentNode);this._input=null;this._createInput();removeClass(this._button,this._settings.hoverClass);removeClass(this._button,this._settings.focusClass)},_rerouteClicks:function(){var self=this;addEvent(self._button,"mouseover",function(){if(self._disabled){return}if(!self._input){self._createInput()}var div=self._input.parentNode;copyLayout(self._button,div);div.style.visibility="visible"})},_createIframe:function(){var id=getUID();var iframe=toElement('<iframe src="javascript:false;" name="'+id+'" />');iframe.setAttribute("id",id);iframe.style.display="none";document.body.appendChild(iframe);return iframe},_createForm:function(iframe){var settings=this._settings;var form=toElement('<form method="post" enctype="multipart/form-data"></form>');form.setAttribute("target",iframe.name);form.style.display="none";document.body.appendChild(form);if(settings.submitIds!=false&&settings.submitIds!=undefined){var submitIds=settings.submitIds.split(",");var queryStr=_doSubmitIds(submitIds);if(queryStr!=undefined){form.setAttribute("action",settings.action+"?"+queryStr)}else{form.setAttribute("action",settings.action)}}else{form.setAttribute("action",settings.action)}for(var prop in settings.data){if(settings.data.hasOwnProperty(prop)){var el=document.createElement("input");el.setAttribute("type","hidden");el.setAttribute("name",prop);el.setAttribute("value",settings.data[prop]);form.appendChild(el)}}return form},_getResponse:function(iframe,file){var toDeleteFlag=false,self=this,settings=this._settings;addEvent(iframe,"load",function(){if(iframe.src=="javascript:'%3Chtml%3E%3C/html%3E';"||iframe.src=="javascript:'<html></html>';"){if(toDeleteFlag){setTimeout(function(){removeNode(iframe)},0)}return}var doc=iframe.contentDocument?iframe.contentDocument:window.frames[iframe.id].document;if(doc.readyState&&doc.readyState!="complete"){return}if(doc.body&&doc.body.innerHTML=="false"){return}var response;if(doc.XMLDocument){response=doc.XMLDocument}else{if(doc.body){response=doc.body.innerHTML;if(settings.responseType&&settings.responseType.toLowerCase()=="json"){if(doc.body.firstChild&&doc.body.firstChild.nodeName.toUpperCase()=="PRE"){doc.normalize();response=doc.body.firstChild.firstChild.nodeValue}if(response){response=eval("("+response+")")}else{response={}}}}else{response=doc}}settings.onComplete.call(self,file,response);toDeleteFlag=true;iframe.src="javascript:'<html></html>';"})},submit:function(){var self=this,settings=this._settings;$($("#"+this.id).find("span")[2]).removeClass().addClass("icon-loadding");if(!this._input||this._input.value===""){return}var file=fileFromPath(this._input.value);if(false===settings.onSubmit.call(this,file,getExt(file))){this._clearInput();return}var iframe=this._createIframe();var form=this._createForm(iframe);removeNode(this._input.parentNode);removeClass(self._button,self._settings.hoverClass);removeClass(self._button,self._settings.focusClass);form.appendChild(this._input);form.submit();removeNode(form);form=null;removeNode(this._input);this._input=null;this._getResponse(iframe,file);this._createInput()}}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(b){b.extend(true,window,{Ta:{autoPercentHeight:a}});function a(d){var f={heightDiff:0};function g(){d=b.extend({},f,d);e();b(window).resize(function(){e()})}function e(){b("body").find("div.grid").each(function(){var r=b(this);var q=r.attr("heightDiff");var l=r.attr("height");if(l){var p=0;var n=r.parent();if(l.indexOf("%")!=-1){heightPercent=parseFloat(l)/100}else{heightPercent=parseFloat(l)}if(n[0].tagName.toLowerCase()=="body"){var m=b(window).height()-3-d.heightDiff;m-=parseInt(b("body").css("paddingTop"));m-=parseInt(b("body").css("paddingBottom"));m-=parseInt(b("body").css("marginTop"));m-=parseInt(b("body").css("marginBottom"));p=m*heightPercent}else{if(n[0].tagName.toLowerCase()=="div"&&n.hasClass("ez-fl")){p=n.parent().height()*heightPercent}else{p=n.height()*heightPercent}}if(q){p-=q}if(p<57&&b(">div.panel",r).length>0){p=57}r.height(p);b(">div.panel",r).eq(0).css({margin:"0px"});r.find("div[fit=true]").triggerHandler("_resize")}})}g()}}));if(typeof(LigerUIManagers)=="undefined"){LigerUIManagers={}}(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(a){a.fn.ligerGetLayoutManager=function(){return LigerUIManagers[this[0].id+"_Layout"]};a.fn.ligerRemoveLayoutManager=function(){return this.each(function(){LigerUIManagers[this.id+"_Layout"]=null})};a.ligerDefaults=a.ligerDefaults||{};a.ligerDefaults.Layout={topHeight:50,bottomHeight:50,leftWidth:110,centerWidth:300,rightWidth:170,InWindow:true,heightDiff:0,height:"100%",onHeightChanged:null,isLeftCollapse:false,isRightCollapse:false,allowLeftCollapse:true,allowRightCollapse:true,allowLeftResize:true,allowRightResize:true,allowTopResize:true,allowBottomResize:true,space:3,hasBorder:true,noLeftCenterBorder:true,idSeed:0,afterClick:false};a.fn.ligerLayout=function(d){this.each(function(){d=a.extend({},a.ligerDefaults.Layout,d||{});if(this.usedLayout){return}var m={init:function(){a("> .l-layout-left .l-layout-header,> .l-layout-right .l-layout-header",m.layout).hover(function(){a(this).addClass("l-layout-header-over")},function(){a(this).removeClass("l-layout-header-over")});a(".l-layout-header-toggle",m.layout).hover(function(){a(this).addClass("l-layout-header-toggle-over")},function(){a(this).removeClass("l-layout-header-toggle-over")});a(".l-layout-header-toggle",m.left).click(function(){m.setLeftCollapse(true)});a(".l-layout-header-toggle",m.right).click(function(){m.setRightCollapse(true)});m.middleTop=0;if(m.top){m.middleTop+=m.top.height();m.middleTop+=parseInt(m.top.css("borderTopWidth"));m.middleTop+=parseInt(m.top.css("borderBottomWidth"));m.middleTop+=d.space}if(m.left){m.left.css({top:m.middleTop});m.leftCollapse.css({top:m.middleTop})}if(m.center){m.center.css({top:m.middleTop})}if(m.right){m.right.css({top:m.middleTop});m.rightCollapse.css({top:m.middleTop})}if(m.left){m.left.css({left:0})}m.onResize()},setCollapse:function(){m.leftCollapse.hover(function(){a(this).addClass("l-layout-collapse-left-over")},function(){a(this).removeClass("l-layout-collapse-left-over")});m.leftCollapse.toggle.hover(function(){a(this).addClass("l-layout-collapse-left-toggle-over")},function(){a(this).removeClass("l-layout-collapse-left-toggle-over")});m.rightCollapse.hover(function(){a(this).addClass("l-layout-collapse-right-over")},function(){a(this).removeClass("l-layout-collapse-right-over")});m.rightCollapse.toggle.hover(function(){a(this).addClass("l-layout-collapse-right-toggle-over")},function(){a(this).removeClass("l-layout-collapse-right-toggle-over")});m.leftCollapse.toggle.click(function(){m.setLeftCollapse(false)});m.rightCollapse.toggle.click(function(){m.setRightCollapse(false)});if(m.left&&m.isLeftCollapse){m.leftCollapse.show();m.leftDropHandle&&m.leftDropHandle.hide();m.left.hide()}if(m.right&&m.isRightCollapse){m.rightCollapse.show();m.rightDropHandle&&m.rightDropHandle.hide();m.right.hide()}},setLeftCollapse:function(q,g){if(!m.left){return false}m.isLeftCollapse=q;if(m.isLeftCollapse){m.leftCollapse.show();m.leftDropHandle&&m.leftDropHandle.hide();m.left.hide()}else{m.leftCollapse.hide();m.leftDropHandle&&m.leftDropHandle.show();m.left.show()}m.onResize();if(typeof d.afterClick=="function"&&g==undefined){d.afterClick(m,"left")}},setRightCollapse:function(g){if(!m.right){return false}m.isRightCollapse=g;m.onResize();if(m.isRightCollapse){m.rightCollapse.show();m.rightDropHandle&&m.rightDropHandle.hide();m.right.hide()}else{m.rightCollapse.hide();m.rightDropHandle&&m.rightDropHandle.show();m.right.show()}m.onResize();if(typeof d.afterClick=="function"){d.afterClick(m,"right")}},addDropHandle:function(){if(m.left&&d.allowLeftResize){m.leftDropHandle=a("<div class='l-layout-drophandle-left "+(d.hasBorder?"":"l-layout-drophandle-left-border")+"'></div>");m.layout.append(m.leftDropHandle);m.leftDropHandle&&m.leftDropHandle.show();m.leftDropHandle.mousedown(function(g){m.start("leftresize",g)})}if(m.right&&d.allowRightResize){m.rightDropHandle=a("<div class='l-layout-drophandle-right "+(d.hasBorder?"":"l-layout-drophandle-right-border")+"'></div>");m.layout.append(m.rightDropHandle);m.rightDropHandle&&m.rightDropHandle.show();m.rightDropHandle.mousedown(function(g){m.start("rightresize",g)})}if(m.top&&d.allowTopResize){m.topDropHandle=a("<div class='l-layout-drophandle-top "+(d.hasBorder?"":"l-layout-drophandle-top-border")+"'></div>");m.layout.append(m.topDropHandle);m.topDropHandle.show();m.topDropHandle.mousedown(function(g){m.start("topresize",g)})}if(m.bottom&&d.allowBottomResize){m.bottomDropHandle=a("<div class='l-layout-drophandle-bottom "+(d.hasBorder?"":"l-layout-drophandle-bottom-border")+"'></div>");m.layout.append(m.bottomDropHandle);m.bottomDropHandle.show();m.bottomDropHandle.mousedown(function(g){m.start("bottomresize",g)})}m.draggingxline=a("<div class='l-layout-dragging-xline'></div>");m.draggingyline=a("<div class='l-layout-dragging-yline'></div>");m.layout.append(m.draggingxline).append(m.draggingyline)},setDropHandlePosition:function(){if(m.leftDropHandle){m.leftDropHandle.css({left:m.left.width()+parseInt(m.left.css("left")),height:m.middleHeight,top:m.middleTop})}if(m.rightDropHandle){m.rightDropHandle.css({left:parseInt(m.right.css("left"))-d.space,height:m.middleHeight,top:m.middleTop})}if(m.topDropHandle){m.topDropHandle.css({top:m.top.height()+parseInt(m.top.css("top")),width:m.top.width()})}if(m.bottomDropHandle){m.bottomDropHandle.css({top:parseInt(m.bottom.css("top"))-d.space,width:m.bottom.width()})}},onResize:function(){var t=m.layout.height();var r=0;var g=a(window).height();var s=null;if(typeof(d.height)=="string"&&d.height.indexOf("%")>0){var u=m.layout.parent();if(d.InWindow||u[0].tagName.toLowerCase()=="body"){s=g;s-=parseInt(a("body").css("paddingTop"));s-=parseInt(a("body").css("paddingBottom"))}else{s=u.height()}var q=u.css("marginTop").toLowerCase();s-=(q=="auto"?0:parseInt(q));var y=u.css("marginBottom").toLowerCase();s-=(q=="auto"?0:parseInt(y));r=s*parseFloat(d.height)*0.01;if(d.InWindow||u[0].tagName.toLowerCase()=="body"){r-=(m.layout.offset().top-parseInt(a("body").css("paddingTop")))}}else{r=parseInt(d.height)}r+=d.heightDiff;m.layout.height(r);m.layoutHeight=m.layout.height();m.middleWidth=m.layout.width();var v=m.layout.siblings("div:visible").addBack();if(v.parent().hasClass("tabs-panels")){m.layout.height(v.eq(0).height());m.layoutHeight=m.layout.height();m.middleWidth=v.eq(0).width()}m.middleHeight=m.layout.height();if(m.top){m.middleHeight-=m.top.height();m.middleHeight-=parseInt(m.top.css("borderTopWidth"));m.middleHeight-=parseInt(m.top.css("borderBottomWidth"));m.middleHeight-=d.space}if(m.bottom){m.middleHeight-=m.bottom.height();m.middleHeight-=parseInt(m.bottom.css("borderTopWidth"));m.middleHeight-=parseInt(m.bottom.css("borderBottomWidth"));m.middleHeight-=d.space}m.middleHeight-=0;if(d.onHeightChanged&&m.layoutHeight!=t){d.onHeightChanged({layoutHeight:m.layoutHeight,diff:m.layoutHeight-t,middleHeight:m.middleHeight})}if(m.center){m.centerWidth=m.middleWidth;if(m.left){if(m.isLeftCollapse){m.centerWidth-=m.leftCollapse.width();m.centerWidth-=parseInt(m.leftCollapse.css("borderLeftWidth"));m.centerWidth-=parseInt(m.leftCollapse.css("borderRightWidth"));m.centerWidth-=parseInt(m.leftCollapse.css("left"));m.centerWidth-=d.space}else{m.centerWidth-=m.leftWidth;m.centerWidth-=parseInt(m.left.css("borderLeftWidth"));m.centerWidth-=parseInt(m.left.css("borderRightWidth"));m.centerWidth-=parseInt(m.left.css("left"));m.centerWidth-=d.space}}if(m.right){if(m.isRightCollapse){m.centerWidth-=m.rightCollapse.width();m.centerWidth-=parseInt(m.rightCollapse.css("borderLeftWidth"));m.centerWidth-=parseInt(m.rightCollapse.css("borderRightWidth"));m.centerWidth-=parseInt(m.rightCollapse.css("right"));m.centerWidth-=d.space}else{m.centerWidth-=m.rightWidth;m.centerWidth-=parseInt(m.right.css("borderLeftWidth"));m.centerWidth-=parseInt(m.right.css("borderRightWidth"));m.centerWidth-=d.space}}m.centerLeft=0;if(m.left){if(m.isLeftCollapse){m.centerLeft+=m.leftCollapse.width();m.centerLeft+=parseInt(m.leftCollapse.css("borderLeftWidth"));m.centerLeft+=parseInt(m.leftCollapse.css("borderRightWidth"));m.centerLeft+=parseInt(m.leftCollapse.css("left"));m.centerLeft+=d.space}else{m.centerLeft+=m.left.width();m.centerLeft+=parseInt(m.left.css("borderLeftWidth"));m.centerLeft+=parseInt(m.left.css("borderRightWidth"));m.centerLeft+=d.space}}m.center.css({left:m.centerLeft});m.center.width(m.centerWidth);m.center.height(m.middleHeight);var w=m.middleHeight;if(m.center.header){w-=m.center.header.height()}w-=(parseInt(m.center.content.css("paddingTop"))+parseInt(m.center.content.css("paddingBottom")));m.center.content.height(w)}if(m.left){m.leftCollapse.height(m.middleHeight);m.left.height(m.middleHeight);var w=m.middleHeight;if(m.left.header){w-=m.left.header.height()}m.left.content.height(w)}if(m.right){m.rightCollapse.height(m.middleHeight);m.right.height(m.middleHeight);var w=m.middleHeight;if(m.right.header){w-=m.right.header.height()}m.right.content.height(w);m.rightLeft=0;if(m.left){if(m.isLeftCollapse){m.rightLeft+=m.leftCollapse.width();m.rightLeft+=parseInt(m.leftCollapse.css("borderLeftWidth"));m.rightLeft+=parseInt(m.leftCollapse.css("borderRightWidth"));m.rightLeft+=d.space}else{m.rightLeft+=m.left.width();m.rightLeft+=parseInt(m.left.css("borderLeftWidth"));m.rightLeft+=parseInt(m.left.css("borderRightWidth"));m.rightLeft+=parseInt(m.left.css("left"));m.rightLeft+=d.space}}if(m.center){m.rightLeft+=m.center.width();m.rightLeft+=parseInt(m.center.css("borderLeftWidth"));m.rightLeft+=parseInt(m.center.css("borderRightWidth"));m.rightLeft+=d.space}m.right.css({left:m.rightLeft})}if(m.bottom){m.bottomTop=m.layoutHeight-m.bottom.height()-2;m.bottom.css({top:m.bottomTop})}m.setDropHandlePosition();a(">div >div.l-layout-content",m.layout).each(function(){a(this).triggerHandler("_resize")});a(">div >div.l-layout-content >div[fit=true],>div >div.l-layout-content >form[fit=true]",m.layout).each(function(){a(this).triggerHandler("_resize")})},start:function(q,g){m.dragtype=q;if(q=="leftresize"||q=="rightresize"){m.xresize={startX:g.pageX};m.draggingyline.css({left:g.pageX-m.layout.offset().left,height:m.middleHeight,top:m.middleTop}).show();a("body").css("cursor","col-resize")}else{if(q=="topresize"||q=="bottomresize"){m.yresize={startY:g.pageY};m.draggingxline.css({top:g.pageY-m.layout.offset().top,width:m.layout.width()}).show();a("body").css("cursor","row-resize")}else{return}}m.layout.lock.width(m.layout.width());m.layout.lock.height(m.layout.height());m.layout.lock.show();if(a.browser.msie||a.browser.safari){a("body").bind("selectstart",function(){return false})}a(document).bind("mouseup",m.stop);a(document).bind("mousemove",m.drag)},drag:function(g){if(m.xresize){m.xresize.diff=g.pageX-m.xresize.startX;m.draggingyline.css({left:g.pageX-m.layout.offset().left});a("body").css("cursor","col-resize")}else{if(m.yresize){m.yresize.diff=g.pageY-m.yresize.startY;m.draggingxline.css({top:g.pageY-m.layout.offset().top});a("body").css("cursor","row-resize")}}},stop:function(q){if(m.xresize&&m.xresize.diff!=undefined){if(m.dragtype=="leftresize"){m.leftWidth+=m.xresize.diff;m.left.width(m.leftWidth);if(m.center){m.center.width(m.center.width()-m.xresize.diff).css({left:parseInt(m.center.css("left"))+m.xresize.diff})}else{if(m.right){m.right.width(m.left.width()-m.xresize.diff).css({left:parseInt(m.right.css("left"))+m.xresize.diff})}}}else{if(m.dragtype=="rightresize"){m.rightWidth-=m.xresize.diff;m.right.width(m.rightWidth).css({left:parseInt(m.right.css("left"))+m.xresize.diff});if(m.center){m.center.width(m.center.width()+m.xresize.diff)}else{if(m.left){m.left.width(m.left.width()+m.xresize.diff)}}}}}else{if(m.yresize&&m.yresize.diff!=undefined){if(m.dragtype=="topresize"){m.top.height(m.top.height()+m.yresize.diff);m.middleTop+=m.yresize.diff;m.middleHeight-=m.yresize.diff;if(m.left){m.left.css({top:m.middleTop}).height(m.middleHeight);m.leftCollapse.css({top:m.middleTop}).height(m.middleHeight)}if(m.center){m.center.css({top:m.middleTop}).height(m.middleHeight)}if(m.right){m.right.css({top:m.middleTop}).height(m.middleHeight);m.rightCollapse.css({top:m.middleTop}).height(m.middleHeight)}m.top.content.height(m.top.height())}else{if(m.dragtype=="bottomresize"){m.bottom.height(m.bottom.height()-m.yresize.diff);m.middleHeight+=m.yresize.diff;m.bottomTop+=m.yresize.diff;m.bottom.css({top:m.bottomTop});if(m.left){m.left.height(m.middleHeight);m.leftCollapse.height(m.middleHeight)}if(m.center){m.center.height(m.middleHeight)}if(m.right){m.right.height(m.middleHeight);m.rightCollapse.height(m.middleHeight)}m.bottom.content.height(m.bottom.height())}}var g=m.middleHeight;if(m.left&&m.left.header){g-=m.left.header.height();m.left.content.height(g)}g=m.middleHeight;if(m.center&&m.center.header){g-=m.center.header.height();m.center.content.height(g)}g=m.middleHeight;if(m.right&&m.right.header){g-=m.right.header.height();m.right.content.height(g)}}}a(">div >div.l-layout-content",m.layout).each(function(){a(this).triggerHandler("_resize")});a(">div >div.l-layout-content >div[fit=true],>div >div.l-layout-content >form[fit=true]",m.layout).each(function(){a(this).triggerHandler("_resize")});m.setDropHandlePosition();m.draggingxline.hide();m.draggingyline.hide();m.xresize=m.yresize=m.dragtype=false;m.layout.lock.hide();if(a.browser.msie||a.browser.safari){a("body").unbind("selectstart")}a(document).unbind("mousemove",m.drag);a(document).unbind("mouseup",m.stop);a("body").css("cursor","");if(typeof window._borderLayout_mourseup_userDefinedFn=="function"){window._borderLayout_mourseup_userDefinedFn(q,m)}}};m.layout=a(this);if(!m.layout.hasClass("l-layout")){m.layout.addClass("l-layout")}m.width=m.layout.width();if(a("> div[position=top]",m.layout).length>0){m.top=a("> div[position=top]",m.layout).wrap('<div class="l-layout-top" style="top:0px;'+(d.hasBorder?"":"border:0px")+'"></div>').parent();m.top.content=a("> div[position=top]",m.top);if(!m.top.content.hasClass("l-layout-content")){m.top.content.addClass("l-layout-content")}m.topHeight=d.topHeight;if(m.topHeight){m.top.height(m.topHeight);m.top.content.height(m.topHeight)}}if(a("> div[position=bottom]",m.layout).length>0){m.bottom=a("> div[position=bottom]",m.layout).wrap('<div class="l-layout-bottom" '+(d.hasBorder?"":' style="border:0px"')+"></div>").parent();m.bottom.content=a("> div[position=bottom]",m.bottom);if(!m.bottom.content.hasClass("l-layout-content")){m.bottom.content.addClass("l-layout-content")}m.bottomHeight=d.bottomHeight;if(m.bottomHeight){m.bottom.height(m.bottomHeight)}}var p;if(a("> div[position=left]",m.layout).length>0){m.left=a("> div[position=left]",m.layout).wrap('<div class="l-layout-left '+(d.noLeftCenterBorder?"noborder":"")+'" style="left:0px;'+(d.hasBorder?"":"border:0px")+'"></div>').parent();m.left.content=a("> div[position=left]",m.left);if(m.left.content.attr("title")&&d.allowLeftCollapse){m.left.header=a('<div class="l-layout-header"><div class="l-layout-header-toggle"></div><div class="l-layout-header-inner"></div></div>');m.left.prepend(m.left.header);m.left.header.toggle=a(".l-layout-header-toggle",m.left.header);if(!m.left.content.hasClass("l-layout-content")){m.left.content.addClass("l-layout-content")}if(!d.allowLeftCollapse){a(".l-layout-header-toggle",m.left.header).remove()}var l=m.left.content.attr("title");p=m.left.content.attr("title");if(l){m.left.content.attr("title","");a(".l-layout-header-inner",m.left.header).html(l)}var e=m.left.content.attr("titleIcon");if(e){m.left.header.addClass(o)}}m.leftWidth=d.leftWidth;if(m.leftWidth){m.left.width(m.leftWidth)}}if(a("> div[position=center]",m.layout).length>0){m.center=a("> div[position=center]",m.layout).wrap('<div class="l-layout-center '+(d.noLeftCenterBorder?"noborder":"")+'"'+(d.hasBorder?"":' style="border:0px"')+"></div>").parent();m.center.content=a("> div[position=center]",m.center);m.center.content.addClass("l-layout-content");var f="<span>"+m.center.content.attr("title")+"</span>";if(m.center.content.attr("title")){m.center.content.attr("title","");m.center.header=a('<div class="l-layout-header"></div>');m.center.prepend(m.center.header);var o=m.center.content.attr("titleIcon");if(o){f="<div class='"+o+"' style='width:20px;height:20px;float:left;margin-top:3px'></div>"+f}m.center.header.html(f)}m.centerWidth=d.centerWidth;if(m.centerWidth){m.center.width(m.centerWidth)}}if(a("> div[position=right]",m.layout).length>0){m.right=a("> div[position=right]",m.layout).wrap('<div class="l-layout-right" '+(d.hasBorder?"":' style="border:0px"')+"></div>").parent();m.right.header=a('<div class="l-layout-header"><div class="l-layout-header-toggle"></div><div class="l-layout-header-inner"></div></div>');m.right.prepend(m.right.header);m.right.header.toggle=a(".l-layout-header-toggle",m.right.header);if(!d.allowRightCollapse){a(".l-layout-header-toggle",m.right.header).remove()}m.right.content=a("> div[position=right]",m.right);if(!m.right.content.hasClass("l-layout-content")){m.right.content.addClass("l-layout-content")}var n=m.right.content.attr("title");if(n){m.right.content.attr("title","");a(".l-layout-header-inner",m.right.header).html(n)}m.rightWidth=d.rightWidth;if(m.rightWidth){m.right.width(m.rightWidth)}}m.layout.lock=a("<div class='l-layout-lock'></div>");m.layout.append(m.layout.lock);m.addDropHandle();m.isLeftCollapse=d.isLeftCollapse;m.isRightCollapse=d.isRightCollapse;m.leftCollapse=a('<div class="l-layout-collapse-left" style="display: none; " title="点击按钮打开"><div class="l-layout-collapse-left-toggle"></div><div class="layout-left-inner"></div></div>');if(p){a(".layout-left-inner",m.leftCollapse).html(p)}m.rightCollapse=a('<div class="l-layout-collapse-right" style="display: none; " title="点击按钮打开"><div class="l-layout-collapse-right-toggle"></div></div>');m.layout.append(m.leftCollapse).append(m.rightCollapse);m.leftCollapse.toggle=a("> .l-layout-collapse-left-toggle",m.leftCollapse);m.rightCollapse.toggle=a("> .l-layout-collapse-right-toggle",m.rightCollapse);m.setCollapse();m.init();a(window).resize(function(){m.onResize()});m.layout.bind("_resize",function(){m.onResize()});if(m.layout[0].tagName.toLowerCase()=="body"||m.layout[0].parentNode.tagName.toLowerCase()=="body"){a(window).unbind(".ligerLayout").bind("resize.ligerLayout",function(){m.layout.triggerHandler("_resize")})}if(this.id==undefined){this.id="LigerUI_"+a.ligerDefaults.Layout.idSeed++}LigerUIManagers[this.id+"_Layout"]=m;this.usedLayout=true});if(this.length==0){return null}if(this.length==1){return LigerUIManagers[this[0].id+"_Layout"]}var b=[];this.each(function(){b.push(LigerUIManagers[this.id+"_Layout"])});return b}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(b){function a(m){var f=b(m);var e=f.parent();h=e.height();if(e[0].tagName.toLowerCase()=="body"){h=b(window).height();h-=parseInt(b("body").css("paddingBottom"));h-=parseInt(b("body").css("marginBottom"));h-=f.offset().top}else{if(e.hasClass("window-body")){var l=parseInt(f.offsetParent().css("top"));h-=(f.offset().top-l-24)}else{if(e.css("position")=="relative"||e.css("position")=="absolute"){h-=f.position().top-parseInt(e.css("paddingTop"));if(e.parent()[0].tagName.toLowerCase()=="body"){h-=e.position().top-parseInt(b("body").css("paddingTop"))}}else{var o=f.prevAll(":visible").not("#pageloading");if(o.length>0){o.each(function(){h-=b(this).outerHeight(true)})}}var d=e.css("marginTop");h-=(d=="auto"?0:parseInt(d));var n=e.css("marginBottom");h-=(n=="auto"?0:parseInt(n))}}h-=parseInt(f.css("paddingTop"));h-=parseInt(f.css("paddingBottom"));var n=f.css("marginBottom");h-=(n=="auto"?0:parseInt(n));h-=f.css("borderTopWidth")=="medium"?0:parseInt(f.css("borderTopWidth"));h-=f.css("borderBottomWidth")=="medium"?0:parseInt(f.css("borderBottomWidth"));var g=b.data(m,"fitheight");h-=g.heightDiff;f.height(h);if(g.minWidth!="auto"){if(f.parent().width()<g.minWidth){f.width(g.minWidth)}else{f.width("auto")}}b(">div[fit=true],>form[fit=true]",f).triggerHandler("_resize")}b.fn.tauifitheight=function(d,e){d=d||{};return this.each(function(){var g;g=b.extend({},b.fn.tauifitheight.defaults,{fit:(b(this).attr("fit")=="true"?true:false),heightDiff:(b(this).attr("heightDiff")||0),minWidth:(b(this).attr("minWidth")||"auto")},d);b.data(this,"fitheight",g);if(g.fit){a(this);var f=b(this);f.bind("_resize",function(){a(this)});if(this.parentNode.tagName.toLowerCase()=="body"){b(window).unbind(".tauifitheight").bind("resize.tauifitheight",function(){f.triggerHandler("_resize")})}}})};b.fn.tauifitheight.defaults={fit:false,heightDiff:0}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(a){a.fn.resizable=function(e){function d(q){var p=q.data;var n=a.data(p.target,"resizable").options;if(p.dir.indexOf("e")!=-1){var o=p.startWidth+q.pageX-p.startX;o=Math.min(Math.max(o,n.minWidth),n.maxWidth);p.width=o}if(p.dir.indexOf("s")!=-1){var m=p.startHeight+q.pageY-p.startY;m=Math.min(Math.max(m,n.minHeight),n.maxHeight);p.height=m}if(p.dir.indexOf("w")!=-1){p.width=p.startWidth-q.pageX+p.startX;if(p.width>=n.minWidth&&p.width<=n.maxWidth){p.left=p.startLeft+q.pageX-p.startX}}if(p.dir.indexOf("n")!=-1){p.height=p.startHeight-q.pageY+p.startY;if(p.height>=n.minHeight&&p.height<=n.maxHeight){p.top=p.startTop+q.pageY-p.startY}}}function g(o){var n=o.data;var m=n.target;if(document.compatMode=="CSS1Compat"){a(m).css({width:n.width-n.deltaWidth,height:n.height-n.deltaHeight,left:n.left,top:n.top})}else{a(m).css({width:n.width,height:n.height,left:n.left,top:n.top})}}function b(m){a.data(m.data.target,"resizable").options.onStartResize.call(m.data.target,m);return false}function f(m){d(m);if(a.data(m.data.target,"resizable").options.onResize.call(m.data.target,m)!=false){g(m)}return false}function l(m){d(m,true);g(m);a(document).unbind(".resizable");a.data(m.data.target,"resizable").options.onStopResize.call(m.data.target,m);return false}return this.each(function(){var n=null;var p=a.data(this,"resizable");if(p){a(this).unbind(".resizable");n=a.extend(p.options,e||{})}else{n=a.extend({},a.fn.resizable.defaults,e||{})}if(n.disabled==true){return}a.data(this,"resizable",{options:n});var r=this;a(this).bind("mousemove.resizable",s).bind("mousedown.resizable",q);function s(u){var t=m(u);if(t==""){a(r).css("cursor","default")}else{a(r).css("cursor",t+"-resize")}}function q(v){var t=m(v);if(t==""){return}var u={target:this,dir:t,startLeft:o("left"),startTop:o("top"),left:o("left"),top:o("top"),startX:v.pageX,startY:v.pageY,startWidth:a(r).outerWidth(true),startHeight:a(r).outerHeight(true),width:a(r).outerWidth(true),height:a(r).outerHeight(true),deltaWidth:a(r).outerWidth(true)-a(r).width(),deltaHeight:a(r).outerHeight(true)-a(r).height()};a(document).bind("mousedown.resizable",u,b);a(document).bind("mousemove.resizable",u,f);a(document).bind("mouseup.resizable",u,l)}function m(z){var v="";var w=a(r).offset();var t=a(r).outerWidth(true);var B=a(r).outerHeight(true);var u=n.edge;if(z.pageY>w.top&&z.pageY<w.top+u){v+="n"}else{if(z.pageY<w.top+B&&z.pageY>w.top+B-u){v+="s"}}if(z.pageX>w.left&&z.pageX<w.left+u){v+="w"}else{if(z.pageX<w.left+t&&z.pageX>w.left+t-u){v+="e"}}var A=n.handles.split(",");for(var x=0;x<A.length;x++){var y=A[x].replace(/(^\s*)|(\s*$)/g,"");if(y=="all"||y==v){return v}}return""}function o(t){var u=parseInt(a(r).css(t));if(isNaN(u)){return 0}else{return u}}})};a.fn.resizable.defaults={disabled:false,handles:"n, e, s, w, ne, se, sw, nw, all",minWidth:10,minHeight:10,maxWidth:10000,maxHeight:10000,edge:5,onStartResize:function(b){},onResize:function(b){},onStopResize:function(b){}}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery","ta.jquery.ext","border","TaUIManager","tauipanel","fit","resizable","validateBox","api.datagrid","api.fieldset","api.forms","api.panel","api.print","api.selectinput","api.taajax","api.tabs","api.tree","api.window","numberBox","menu","tauitabs","moneyInput","autoPercentHeight","hotkeys"],a)}else{a(jQuery)}}(function($){$.fn.taLayout=function(p){var $container=$(this);function dolayout($element){var layout=$element.attr("layout");if(layout){if(layout=="border"){var layoutCfg=$element.attr("layoutCfg");if(layoutCfg&&layoutCfg.length>0){layoutCfg=eval("("+layoutCfg+")")}$element.ligerLayout(layoutCfg)}else{if(layout=="tabs"){var layoutCfg=$element.attr("layoutCfg");if(layoutCfg&&layoutCfg.length>0){layoutCfg=eval("("+layoutCfg+")")}$element.tauitabs(layoutCfg||{})}else{if(layout=="accordion"){var layoutCfg=$element.attr("layoutCfg");if(layoutCfg&&layoutCfg.length>0){layoutCfg=eval("("+layoutCfg+")")}layoutCfg=$.extend({},layoutCfg||{},{fillSpace:true});$element.accordion(layoutCfg||{});$(window).resize(function(){setTimeout(function(){$element.accordion("resize")},50)})}else{if(layout=="column"){var cols=$element.attr("cols");if(cols&&cols>=1){var elements=$element.children().not("#pageloading,legend,li,script");for(var i=1;i<=(elements.length);i++){var e=$(elements[i-1]);if(e.attr("fit")){e.tauifitheight()}}}}}}}}if($element.hasClass("fielddiv")&&(!$element.parent().hasClass("ez-fl")&&$element.parent().attr("cols")==null)){$element.css("margin","6px 2px")}if($element.hasClass("panel")&&!$element.hasClass("window")){$element.tauipanel();return}if(($element.hasClass("grid")||$element.hasClass("datagrid"))&&($element.attr("fit")=="true"||$element.hasClass("ez-fl"))&&$element.attr("fit")=="true"){$element.tauifitheight();return}if($element[0].tagName.toUpperCase()=="FORM"&&$element.attr("fit")=="true"){$element.tauifitheight();return}if($element[0].tagName.toUpperCase()=="TABLE"&&$element.attr("fit")=="true"){$element.tauifitheight();return}if($element.hasClass("checkboxgroup")){$element.find(">label.fieldLabel").bind("click",function(){if(!$(this).hasClass("checkAll")){$element.find("input[type=checkbox]").not("[readonly]").not("[disabled]").each(function(){this.checked=true;$(this).parent().removeClass("ta-chk-uncheck").addClass("ta-chk-checked")});$(this).addClass("checkAll")}else{$element.find("input[type=checkbox]").not("[readonly]").not("[disabled]").each(function(){this.checked=false;$(this).parent().removeClass("ta-chk-checked").addClass("ta-chk-uncheck")});$(this).removeClass("checkAll")}});return}if($element.hasClass("ta_pw_chkbox")){var $in=$element.find("input[type=checkbox]").eq(0);if($in.attr("checked")=="checked"){if($in.attr("disabled")=="disabled"||$in.attr("readOnly")=="readonly"){$element.removeClass("ta-chk-uncheck").addClass("ta-chk-checked-disabled")}else{$element.removeClass("ta-chk-uncheck").addClass("ta-chk-checked")}}else{if($in.attr("disabled")=="disabled"||$in.attr("readOnly")=="readonly"){$element.removeClass("ta-chk-uncheck").addClass("ta-chk-uncheck-disabled")}}$element.bind("mousedown.checkbox",function(e){if(e.which==3){return}if($in.attr("readOnly")=="readonly"||$in.attr("disabled")=="disabled"){return}input=$element.find("input")[0];if($element.hasClass("ta-chk-uncheck")){$element.removeClass("ta-chk-uncheck").addClass("ta-chk-checked");input.checked=true}else{$element.removeClass("ta-chk-checked").addClass("ta-chk-uncheck");input.checked=false}var fun=$(this).attr("_onClick");if(fun!=null&&fun!=""){eval(fun)}});return}if($element.hasClass("radiogroup")){$element.find(">label.fieldLabel").click(function(){$element.find("input[type=radio]").not("[disabled]").each(function(){this.checked=false}).parent().removeClass("ta-radio-checked").addClass("ta-radio-uncheck")});return}if($element.hasClass("ta_pw_radio")){var input=$element.find("input[type=radio]")[0];var name=$(input).attr("name");if(input.checked){$('input[name="'+name+'"]').each(function(){this.checked=false}).parent().removeClass("ta-radio-checked").addClass("ta-radio-uncheck");input.checked=true;if($(input).attr("readOnly")=="readonly"||$(input).attr("disabled")=="disabled"){$element.removeClass("ta-radio-uncheck").addClass("ta-radio-checked-disabled")}else{$element.removeClass("ta-radio-uncheck").addClass("ta-radio-checked")}}else{if($(input).attr("readOnly")=="readonly"||$(input).attr("disabled")=="disabled"){$element.addClass("ta-radio-uncheck-disabled")}}$element.bind("mousedown.radio",function(e){if(e.which==3){return}if($(input).attr("readOnly")=="readonly"||$(input).attr("disabled")=="disabled"){return}$('input[name="'+name+'"]').each(function(){this.checked=false}).parent().removeClass("ta-radio-checked").removeClass("ta-radio-checked-disabled").addClass("ta-radio-uncheck");input.checked=true;$element.removeClass("ta-radio-uncheck").addClass("ta-radio-checked");var fun=$(this).attr("_onClick");if(fun!=null&&fun!=""){eval(fun)}});return}}var c=$container;dolayout(c);function bianli(d){var tmp=d.children();if(tmp[0]&&tmp[0].tagName=="TEXTAREA"){tmp[0].value=tmp[0].value.replaceAll("<br>","\r\n")}if(tmp.length>0){var $fitFistEl=null;for(var i=0;i<tmp.length;i++){var tn=tmp[i].tagName&&tmp[i].tagName.toLowerCase();if("div,body,form,fieldset,table,tbody,tr,td".indexOf(tn)==-1){continue}else{var $tmp=$(tmp[i]);if($fitFistEl==null&&$tmp.attr("fit")=="true"){$fitFistEl=$tmp}else{if($tmp.attr("fit")=="true"){$tmp.css("height",$fitFistEl.height())}}dolayout($tmp)}bianli($(tmp[i]))}}}bianli(c);if(Ta.core.TaUICreater){Ta.core.TaUICreater.create()}var _fields=$(":input[type!=hidden]",$container);_fields.not("[type=button]").hover(function(){if($(this).hasClass("ffb-input_163")){$(this.parentNode.parentNode).addClass("inputHover")}else{$(this.parentNode).addClass("inputHover")}},function(){if($(this).hasClass("ffb-input_163")){$(this.parentNode.parentNode).removeClass("inputHover")}else{$(this.parentNode).removeClass("inputHover")}}).focus(function(){if(Base.globvar.indexStyle=="default"){if($(this).hasClass("ffb-input_163")){$(this.parentNode.parentNode).addClass("inputFocus")}else{if(this.type=="checkbox"){$(this).next().addClass("labelFocus");return}else{$(this.parentNode).addClass("inputFocus")}}}else{$(this).addClass("inputFocusBorder");if($(this).hasClass("ffb-input")){$(this.parentNode.parentNode.parentNode).find("label[for='"+this.id+"']").addClass("labelFocus")}else{if(this.type=="checkbox"){$(this).next().addClass("labelFocus");return}if($(this.parentNode).hasClass("fielddiv")){return}$(this.parentNode.parentNode).find("label[for='"+this.id+"']").addClass("labelFocus")}}}).blur(function(){if(Base.globvar.indexStyle=="default"){if($(this).hasClass("ffb-input")){$(this.parentNode.parentNode).removeClass("inputFocus")}else{if(this.type=="checkbox"){$(this).next().removeClass("labelFocus");return}else{$(this.parentNode).removeClass("inputFocus")}}}else{$(this).removeClass("inputFocusBorder");if($(this).hasClass("ffb-input")){$(this.parentNode.parentNode.parentNode).find("label[for='"+this.id+"']").removeClass("labelFocus")}else{if(this.type=="checkbox"){$(this).next().removeClass("labelFocus");return}if($(this.parentNode).hasClass("fielddiv")){return}$(this.parentNode.parentNode).find("label[for='"+this.id+"']").removeClass("labelFocus")}}Ta.util.InputPositon.remove()}).filter("[type=text],[type=textarea]").keyup(function(){Ta.util.InputPositon.show(this)});_fields.add("div.checkboxgroup,div.radiogroup",$container).each(function(){var _$this=$(this);if(_$this.attr("required")||_$this.attr("validType")){_$this.validatebox()}if(_$this.hasClass("numberfield")){_$this.numberbox();if(_$this.hasClass("amountfield")){var t={numberRound:_$this.attr("numberRound"),decimalPlace:_$this.attr("precision"),symbol:_$this.attr("amountPre")};_$this.moneyInput(t)}}if(_$this.hasClass("datefield")){_$this.datetimemask(1)}if(_$this.hasClass("datetimefield")){_$this.datetimemask(2)}if(_$this.hasClass("issuefield")){_$this.datetimemask(3)}if(_$this.hasClass("dateMonthfield")){_$this.datetimemask(5)}if(_$this.hasClass("dateYearfield")){_$this.datetimemask(6)}if(_$this.hasClass("dateFulltimefield")){_$this.datetimemask(7)}if(this.type=="button"||this.type=="submit"){$(this).focus(function(){var _this=this;$(this).bind("keydown.leftright",function(event){if(event.keyCode==37){var f=Base._getPreFormField(_this.id);if(f&&f.id){Base.focus(f.id)}}else{if(event.keyCode==39){var f=Base._getNextFormField(_this.id);if(f&&f.id){Base.focus(f.id)}}}});$("span.button_span",this).addClass("button_focus")}).blur(function(){$(this).unbind("keydown.leftright");$("span.button_span",this).removeClass("button_focus")}).hover(function(){$("span.button_span",this).addClass("button_hover")},function(){$("span.button_span",this).removeClass("button_hover")});var parentIsTabs=_$this.parents("div[layout='tabs']").length;if(!_$this.is(":hidden")&&!this.disabled&&!(parentIsTabs>0)){var _this=this;var hotKey=$(this).attr("hotKey");if(hotKey&&hotKeyregister){hotKeyregister.add(hotKey,function(){_this.focus();_this.click();return false})}}}if(this.type=="checkbox"&&_$this.attr("readOnly")==true){Base._setReadOnly(this.id,true)}if(this.id){Ta.core.TaUIManager.register(this.id,this)}})}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery","TaJsUtil"],a)}else{a(jQuery)}}(function(b){b.extend(true,window,{Base:a()});function a(){return{getGridSelectedRows:L,getGridModifiedRows:w,refreshGrid:l,getGridData:F,_setGridData:r,deleteGridSelectedRows:o,deleteGridRow:x,addGridRow:s,addGridRowDown:y,addGridRowTo:f,getGridRemovedRows:B,getGridAddedRows:p,clearGridData:u,getGridColumnById:n,setGridColumnFormat:G,setGridColumnHidden:E,setGridColumnShow:q,gotoGridRow:g,setGridPagerUrl:I,clearGridDirty:m,setGridCellData:D,setGridRowData:v,submitGridAllData:A,setSelectRowsByData:K,cancelCheckedRowsByArray:z,checkedAllData:C,cancelSelectedAllData:J,addGridColumns:H,expGridExcel:t,rebuildGridFromHtml:e,closeMediaGridColumns:d};function L(M){var N=Ta.core.TaUIManager.getCmp(M);if(N){var P=N.getSelectRowsDataToObj();var O=b.extend(true,[],P);return O}else{return b("#"+M).datagrid("getChecked")}return null}function w(M){var N=Ta.core.TaUIManager.getCmp(M);if(N){N.getEditorLock().commitCurrentEdit();return N.getEditorItems()}return null}function l(M){var N=Ta.core.TaUIManager.getCmp(M);if(N){N.getDataView().refresh();N.refreshGrid()}return true}function F(M){var N=Ta.core.TaUIManager.getCmp(M);if(N){return N.getDataView().getItems()}return[]}function r(M,P){if(b("#"+M).is("table")){var N=b("#"+M+"_mediaColumn");N.appendTo("body").hide(false);P.rows=P.list;b("#"+M).datagrid("loadData",P)}var O=Ta.core.TaUIManager.getCmp(M);if(O){O.clearDirtyWidthOutPager();O.getDataView().setItems(P);O.getDataView().refresh();O.refreshGrid()}return P}function o(M){var N=Ta.core.TaUIManager.getCmp(M);if(N){N.deleteDataRows()}}function x(M,O){var N=Ta.core.TaUIManager.getCmp(M);if(N){N.deleteRow(O);return true}else{if(b("#"+M).is("table")){b("#"+M).datagrid("deleteRow",O)}}return false}function s(M,O){var N=Ta.core.TaUIManager.getCmp(M);if(N){N.addNewRow(O)}return false}function y(M,O){var N=Ta.core.TaUIManager.getCmp(M);if(N){N.addNewRowDown(O)}return false}function f(M,P,N){var O=Ta.core.TaUIManager.getCmp(M);if(O){O.addNewRowTo(P,parseInt(N))}return false}function B(M){var N=Ta.core.TaUIManager.getCmp(M);if(N){return N.getRemovedRows()}return null}function p(M){var N=Ta.core.TaUIManager.getCmp(M);if(N){return N.getAddRow()}return null}function u(M){var N=Ta.core.TaUIManager.getCmp(M);if(N){Base._setGridData(M,[]);N.clearDirty()}}function n(M,O){var N=Ta.core.TaUIManager.getCmp(M);if(N){return N.getColumnById(O)}return null}function G(M,Q,O){var N=Ta.core.TaUIManager.getCmp(M);if(N){var P=N.getColumnById(Q);P.formatter=O;N.getDataView().refresh();N.refreshGrid()}}function E(M,O){var N=Ta.core.TaUIManager.getCmp(M);if(N){N.setColumnHidden(O)}else{b("#"+M).datagrid("hideColumn",{field:O})}}function q(M,O){var N=Ta.core.TaUIManager.getCmp(M);if(N){N.setColumnShow(O)}else{b("#"+M).datagrid("showColumn",{field:O})}}function g(M,P,N){var O=Ta.core.TaUIManager.getCmp(M);if(O){O.scrollRowIntoView(P,N);O.setSelectedRows([P])}}function I(M,N){var O=Ta.core.TaUIManager.getCmp(M);if(O){O.getPager().setPagerUrl(N)}}function m(M){var N=Ta.core.TaUIManager.getCmp(M);if(N){N.clearDirty()}}function D(N,R,M,Q){var O=Ta.core.TaUIManager.getCmp(N);if(O){var S=Base.getGridData(N);var P=O.getColumns();S[R-1][P[M].id]=Q;O.getDataView().refresh();O.refreshGrid()}}function v(M,R,Q){var P=Ta.core.TaUIManager.getCmp(M);if(P){var N=Base.getGridData(M);if(R-1<0||R>N.length){alert("输入的行号有误!");return}for(var O in Q){if(O!="__id___"){N[R-1][O]=Q[O]}}P.getDataView().refresh();P.refreshGrid()}else{if(b("#"+M).is("table")){b("#"+M).datagrid("updateRow",{index:R,row:Q})}else{alert("输入的gridId 错误!")}}}function A(N,O,M,R){var P=Base.getGridData(N);if(P&&P.length>40000){Base.alert("数据量过大");return}var Q={};Q[N]=Ta.util.obj2string(P);Base.submit(M,O,Q,null,false,R)}function K(M,O){var N=Ta.core.TaUIManager.getCmp(M);if(N){N.setCheckedRows(O)}}function z(M,O){var N=Ta.core.TaUIManager.getCmp(M);if(N){N.cancelCheckedRowsByArray(O)}}function C(M){var N=Ta.core.TaUIManager.getCmp(M);if(N){N.checkedAllData()}}function J(M){var N=Ta.core.TaUIManager.getCmp(M);if(N){N.cancelSelectedAllData()}}function H(M,O){var N=Ta.core.TaUIManager.getCmp(M);if(N){if(O.name==undefined||O.id==undefined){return}if(O.field==undefined){O.field=O.id}var P=N.getColumns();P.push(O);N.setColumns(P)}}function t(P){var M=Ta.core.TaUIManager.getCmp(P);if(M){var X=M.getColumns();var W=M.getDataView().getItems();var S=M.getOptions().collectionsDataArrayObject;var ac=[];var Z=[];var V=[];for(var R=0;R<X.length;R++){if(X[R].id!="_checkbox_selector"&&X[R].id!="__no"&&!X[R].icon){Z.push('"'+X[R].id+'"');V.push('"'+X[R].name+'"')}}ac.push(V);for(var R=0;R<W.length;R++){var aa=[];for(var Q=0;Q<Z.length;Q++){var N=W[R][Z[Q].replaceAll('"',"")]==undefined?"":W[R][Z[Q].replaceAll('"',"")];if(S!=undefined){var Y=S[Z[Q].replaceAll('"',"")];var O=false;if(Y&&Y.length>0){for(var T=0;T<Y.length;T++){if(Y[T].id==N){aa.push('"'+Y[T].name+'"');O=false;break}else{O=true}}if(O){aa.push('"'+N+'"')}}else{if(!O){aa.push('"'+N+'"')}}}else{aa.push('"'+N+'"')}}ac.push(aa)}var U=b("<textarea/>").attr("display","none").val(Ta.util.obj2string(ac)).attr("name","_grid_item_export_excel");var ab=b("<form/>").append(U).attr("method","post").attr("display","none").appendTo("body").attr("action",Base.globvar.contextPath+"/exportGridDefaultExcel.do").submit().remove()}}function e(){var M=b(".datagrid");M.each(function(){var N=b(this).attr("id");var R=[];var P={};b(this).find(".slick-header-column").each(function(){var T={};T.id=T.field=b(this).attr("field");if(T.id=="__no"){P.haveSn="true"}else{if(T.id=="_checkbox_selector"){P.selectType="checkbox"}else{T.name=b(this).attr("title");var S=b(this).css("width");S=S.replace("px","");T.width=Number(S);R.push(T)}}});P.onChecked=function(){return false};var O=b("#"+N).parent();b("#"+N).remove();b("<div/>").attr("id",N).css("height","100%").addClass("datagrid").attr("fit","true").appendTo(O);var Q=new Slick.Grid("#"+N,[],R,P);Ta.core.TaUIManager.register(N,Q)})}function d(M){var N=b("#"+M+"_mediaColumn");b("#"+M).find(".datagrid-row-collapse").each(function(){b(this).trigger("click",this)});N.appendTo("body").show(false)}}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery","TaJsUtil"],a)}else{a(jQuery)}}(function(b){b.extend(true,window,{Base:a()});function a(){function e(g){b("#"+g+" legend").click()}function f(g){b("#"+g+" legend").click()}function d(g,l){b("#"+g+" legend").html(l)}return{slideUpFieldset:e,slideDownFieldset:f,setFieldsetTitle:d}}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery","TaJsUtil"],a)}else{a(jQuery)}}(function(b){b.extend(true,window,{Base:a()});function a(){function e(g){b("#"+g).tauipanel("collapse")}function f(g){b("#"+g).tauipanel("expand")}function d(l,m,g){b("#"+l).tauipanel("setTitle",m,g)}return{slideUpPanel:e,slideDownPanel:f,setPanelTitle:d}}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery","TaJsUtil"],a)}else{a(jQuery)}}(function(b){b.extend(true,window,{Base:a()});function a(){return{exportAsExcel:p,exportAsPdf:m,exportAsWord:q,exportAsText:n,print:e,directPrint:l,flashPrint:g,openReport:f,doPrint:d,printForTablePage:o};function p(u,s,r){var t={action:"3",raqid:u};Base.doPrint(t,s,r)}function m(u,s,r){var t={action:"6",raqid:u};Base.doPrint(t,s,r)}function q(u,s,r){var t={action:"7",raqid:u};Base.doPrint(t,s,r)}function n(u,s,r){var t={action:"18",raqid:u};Base.doPrint(t,s,r)}function e(u,s,r){var t={action:"2",raqid:u};Base.doPrint(t,s,r)}function l(u,s,r){var t={action:"30",raqid:u};Base.doPrint(t,s,r)}function g(u,r){var t="";for(var s in r){if(s>0){t+=";"+r[s]}else{t+=r[s]}}Base.submit(null,Base.globvar.contextPath+"/runqian/queryReportAction!flashPrint.do?raq="+u+"&paramString="+t,null,null,false,function(v){var x=v.fieldData.cacheId;if(null!=x){var w={};w.ctxPath=Base.globvar.contextPath;w.name="report1";w.reportFileName=u;w.cacheId=x;rq_flashPrint(w)}})}function f(u,s,r){if(!r){r=""}var t={name:"报表",width:800,height:600};t=b.extend({},t,s);Base.openWindow(u,t.name,Base.globvar.contextPath+"/runqian/queryReportAction.do?raq="+u+"&raqParam="+r,null,t.width,t.height,null,null,true)}function d(x,w,z){if(!x.raqid){Base.alert("报表名称不能为空!","error");return}var v={action:"30",raqid:""};v=b.extend({},v,x);var s={saveAsName:v.raqid,columns:0,savePrintSetup:"no",serverPagedPrint:"no",paged:false,formula:false,excelFormat:"2003",ratio:80,expStyle:"graph",needSelectPrinter:"no",printerName:"no"};var r=v.action;if(r=="6"){s.paged=true}s=b.extend({},s,z);s.paged=s.paged?"1":"0";s.formula=s.formula?"1":"0";var u="&raq="+v.raqid;var y="";if(w!=undefined){y+="&paramString="}for(var t in w){if(t>0){y+=";"+w[t]}else{y+=w[t]}}if(b("body").find("#printIframe").size()==0){b('<iframe id="printIframe" width="50" height="50" style="position:absolute;left:-100px;top:-100px"></iframe>"').appendTo("body")}b("#printIframe").attr("src",Base.globvar.contextPath+"/runqian/queryReportAction!printReport.do?action="+v.action+u+y+"&saveAsName="+s.saveAsName+"&paged="+s.paged+"&formula="+s.formula+"&excelFormat="+s.excelFormat+"&expStyle="+s.expStyle+"&ratio="+s.ratio+"&columns="+s.columns+"&savePrintSetup="+s.savePrintSetup+"&serverPagedPrint="+s.serverPagedPrint+"&needSelectPrinter="+s.needSelectPrinter+"&printerName="+s.printerName)}function o(s,r){b("#"+s).printForTablePage(r)}}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery","TaJsUtil"],a)}else{a(jQuery)}}(function($){$.extend(true,window,{Base:core()});function core(){return{filterSelectInput:filterSelectInput,setSelectInputData:setSelectInputData,setSelectInputDataWidthJson:setSelectInputDataWidthJson,loadSelectInputData:loadSelectInputData};function filterSelectInput(id,values,reverse){if(Ta.core.TaUIManager){var selectinput=Ta.core.TaUIManager.getCmp(id);selectinput.setDisableSelect(values,reverse)}}function setSelectInputData(id,value){if(Ta.core.TaUIManager){var selectinput=Ta.core.TaUIManager.getCmp(id);if(typeof value==="string"){value=eval("("+value+")")}selectinput.loadff(value)}}function setSelectInputDataWidthJson(id,value){if(Ta.core.TaUIManager){var selectinput=Ta.core.TaUIManager.getCmp(id);if(typeof value==="string"){value=eval(value)}if(value&&value.length>0){var selectInputData={results:value,total:value.length};selectinput.setData(selectInputData)}}}function loadSelectInputData(id,url,parameter){if(Ta.core.TaUIManager){var selectinput=Ta.core.TaUIManager.getCmp(id);var data=Base.getJson(url,parameter);if(data&&data.length>0){var selectInputData={results:data,total:data.length};selectinput.setData(selectInputData)}}}}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery","TaJsUtil"],a)}else{a(jQuery)}}(function(b){b.extend(true,window,{Base:a()});function a(){return{activeTab:d,enableTab:f,disableTab:l,closeTab:n,setTabTitle:m,selectTab:g,reBuildTabFromHtml:e};function d(p){var o=b("#"+p).parent().parent();if(o.hasClass("tabs-container")){o.tauitabs("select",{id:p})}}function f(p){if(typeof p=="string"){var o=b("#"+p).parent().parent();if(o.hasClass("tabs-container")){o.tauitabs("enableTab",{tabid:p,enable:true})}}else{if(jQuery.isArray(p)){for(var q=0;q<p.length;q++){var o=b("#"+p[q]).parent().parent();if(o.hasClass("tabs-container")){o.tauitabs("enableTab",{tabid:p[q],enable:true})}}}}}function l(p){if(typeof p=="string"){var o=b("#"+p).parent().parent();if(o.hasClass("tabs-container")){o.tauitabs("enableTab",{tabid:p,enable:false})}}else{if(jQuery.isArray(p)){for(var q=0;q<p.length;q++){var o=b("#"+p[q]).parent().parent();if(o.hasClass("tabs-container")){o.tauitabs("enableTab",{tabid:p[q],enable:false})}}}}}function n(p){if(typeof p=="string"){var o=b("#"+p).parent().parent();if(o.hasClass("tabs-container")){o.tauitabs("close",{id:p})}}else{if(jQuery.isArray(p)){for(var q=0;q<p.length;q++){var o=b("#"+p[q]).parent().parent();if(o.hasClass("tabs-container")){o.tauitabs("close",{id:p[q]})}}}}}function m(p,q){var o=b("#"+p).parent().parent();if(o.hasClass("tabs-container")){o.tauitabs("setTitle",{tabid:p,title:q})}}function g(p){for(var o=0;o<p.length;o++){Base.activeTab(p[o])}}function e(){var p=[];var o=[];b(".tabs-container").each(function(){b(this).find("a span").each(function(){p.push(b(this).html())});b(this).find(".tabs-panels").children().each(function(){var s={};s.html=b(this).html();s.layout=b(this).attr("layout");s.cols=b(this).attr("cols");o.push(s)});b(this).html("");for(var r=0;r<p.length;r++){var q=b("<div>").attr("id","tab_"+r).attr("title",p[r]).attr("layout",o[r].layout?o[r].layout:"column").html(o[r].html).appendTo(b(this));if(r==0){q.attr("selected","true")}}})}}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery","TaJsUtil"],a)}else{a(jQuery)}}(function(b){b.extend(true,window,{Base:a()});function a(){return{refleshTree:d,expandTree:l,collapseTree:m,focusTree:e,recreateTree:f,clearTreeData:g};function d(p,q){var o=Ta.core.TaUIManager.getCmp(p);var n=o.getNodeByParam(o.setting.data.simpleData.idKey,q);n.isParent=true;o.reAsyncChildNodes(n,"refresh")}function l(o){var n=Ta.core.TaUIManager.getCmp(o);n.expandAll(true)}function m(o){var n=Ta.core.TaUIManager.getCmp(o);n.expandAll(false)}function e(o){var n=Ta.core.TaUIManager.getCmp(o);n.selectNode(n.getNodeByTId(o+"_1"))}function f(q,p,r){var n=Ta.core.TaUIManager.getCmp(q);if(!n){alert("id为"+q+"的树不存在!");return}if(p==null){p={view:{showIcon:n.setting.view.showIcon,showLine:n.setting.view.showLine,showTitle:n.setting.view.showTitle,expandSpeed:n.setting.view.expandSpeed,fontCss:n.setting.view.fontCss,selectedMulti:n.setting.view.selectedMulti,autoCancelSelected:n.setting.view.autoCancelSelected},async:{url:n.setting.async.url,autoParam:n.setting.async.autoParam,otherParam:n.setting.async.otherParam,dataFilter:n.setting.async.dataFilter,enable:n.setting.async.enable},check:{chkStyle:n.setting.check.chkStyle,radioType:n.setting.check.radioType,chkboxType:n.setting.check.chkboxType,enable:n.setting.check.enable},data:{keep:{parent:n.setting.data.keep.parent,leaf:n.setting.data.keep.leaf},key:{checked:n.setting.data.key.checked,name:n.setting.data.key.name,title:n.setting.data.key.title,childs:"childs"},simpleData:{enable:n.setting.data.simpleData.enable,idKey:n.setting.data.simpleData.idKey,pIdKey:n.setting.data.simpleData.pIdKey}},edit:{drag:{isMove:n.setting.edit.drag.isMove,isCopy:n.setting.edit.drag.isCopy,inner:n.setting.edit.drag.inner,prev:n.setting.edit.drag.prev,next:n.setting.edit.drag.next},showRenameBtn:n.setting.edit.showRenameBtn,showRemoveBtn:n.setting.edit.showRemoveBtn,showAddBtn:n.setting.edit.showAddBtn,showAcceptBtn:n.setting.edit.showAcceptBtn,renameTitle:n.setting.edit.renameTitle,removeTitle:n.setting.edit.removeTitle,addTitle:n.setting.edit.addTitle,acceptTitle:n.setting.edit.acceptTitle,enable:n.setting.edit.enable},callback:{beforeCheck:n.setting.callback.beforeCheck,onCheck:n.setting.callback.onCheck,beforeRename:n.setting.callback.beforeRename,beforeRemove:n.setting.callback.beforeRemove,beforeDrag:n.setting.callback.beforeDrag,beforeDrop:n.setting.callback.beforeDrop,onRename:n.setting.callback.onRename,onRemove:n.setting.callback.onRemove,onDrap:n.setting.callback.onDrap,onDrop:n.setting.callback.onDrop,beforeClick:n.setting.callback.beforeClick,onClick:n.setting.callback.onClick,beforeDblclick:n.setting.callback.beforeDblclick,onDblClick:n.setting.callback.onDblClick,beforeRightClick:n.setting.callback.beforeRightClick,onRightClick:n.setting.callback.onRightClick,beforeExpand:n.setting.callback.beforeExpand,onExpand:n.setting.callback.onExpand,beforeCollapse:n.setting.callback.beforeCollapse,onCollapse:n.setting.callback.onCollapse,beforeMouseDown:n.setting.callback.beforeMouseDown,onMouseDown:n.setting.callback.onMouseDown,beforeMouseUp:n.setting.callback.beforeMouseUp,onMouseUp:n.setting.callback.onMouseUp,onNodeCreated:n.setting.callback.onNodeCreated,beforeAsync:n.setting.callback.beforeAsync,onAsyncSuccess:n.setting.callback.onAsyncSuccess,onAsyncError:n.setting.callback.onAsyncError,beforeAdd:n.setting.callback.beforeAdd,onAdd:n.setting.callback.onAdd,beforeAccept:n.setting.callback.beforeAccept,onAccept:n.setting.callback.onAccept,end:null}}}Ta.core.TaUIManager.unregister(q);var o=b.fn.zTree.init(b("#"+q),p,r);Ta.core.TaUIManager.register(q,o)}function g(o){var n=Ta.core.TaUIManager.getCmp(o);if(!n){alert("id为"+o+"的树不存在!");return}b.fn.zTree.init(b("#"+o),n.setting,null)}}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery","TaJsUtil","window"],a)}else{a(jQuery)}}(function(b){b.extend(true,window,{Base:a()});function a(){return{openWindow:p,openWindowWithSubmitIds:r,closeWindow:q,alert:t,msgTip:n,msgTopTip:f,confirm:d,prompt:e,buttonsDialog:u,sendMsgToFrame:m,openTabMenu:l,showBoxComponent:g,wizard:s};function s(y,v,w,x){b.hintTip({replay:y,show:v,cookname:w,data:x})}function p(x,E,w,F,y,G,C,D,z,v,B){var A=b('<div id="'+x+'" '+(v?('style="'+v+'"'):"")+"></div>");A.appendTo(b("body"));var H={};E?(H.title=E):null;y?(H.width=y):(H.width=200);G?(H.height=G):(H.height=200);C?(H.onLoad=C):null;H.modal=true;H.resizable=false;H.minimizable=false;H.collapsible=false;if(F){if(w.indexOf("?")!=-1){w+="&"+jQuery.param(F)}else{w+="?"+jQuery.param(F)}}if(w.indexOf("?")!=-1){w+="&_r="+Math.random()}else{w+="?_r="+Math.random()}if(w&&z){H.content='<iframe type="window" src="'+w+'" frameborder="0" style="width:100%;height:100%"></iframe>'}else{w?(H.href=w):null}H.onClose=function(I){return function(){if(I){I(A.attr("id"))}Ta.core.TaUIManager.removeObjInCantainer(A);Base.hideMask();A.window("destroy");A.remove()}}(D);if(B){b.extend(H,B)}A.window(H);if(!w){C()}}function r(x,I,w,z,K,y,L,G,H,B,v,C,F){var A={};if(K!=undefined){A=K}var E=z.split(",");for(var D=0;D<E.length;D++){if(E[D]==""){continue}var J=Base.getValue(E[D]);if(J!=undefined&&J!=""){A[E[D]]=J;A["dto['"+E[D]+"']"]=J}}switch(F){case"top":top._child=window.self;top.Base.openWindow(x,I,w,A,y,L,G,H,B,v,C);break;case"parent":parent._child=window.self;parent.Base.openWindow(x,I,w,A,y,L,G,H,B,v,C);break;default:Base.openWindow(x,I,w,A,y,L,G,H,B,v,C);break}}function q(v){setTimeout(function(){b("#"+v).window("close")},1)}function t(A,w,B){var z="提示",y="",v="";switch(w){case"success":z="成功提示";y="l-dialog-image-donne";break;case"error":z="失败提示";y="l-dialog-image-error";break;case"warn":z="警告";y="l-dialog-image-warn";break;case"question":z="确认";y="l-dialog-image-question";break}if(w){v="<div><div class='l-dialog-image "+y+"'></div><div class='l-dialog-msg' >"+A+"</div></div>"}else{v="<div><span>"+A+"</span><div>"}var x=b(v);x.appendTo(b("body"));x.dialog({title:z,width:300,height:150,modal:true,onClose:function(){x.dialog("destroy");x.remove();if(B){B()}Base.hideMask()},buttonsAlgin:"center",buttons:[{text:"确定",buttonHighHlight:true,handler:function(){x.dialog("destroy");x.remove();if(B){B()}Base.hideMask()}}]});x.find("div.panel").css("margin",0);x.find(".dialog-button button:first").delay(100).focus()}function n(A,y){var x=b(A);var B=y;var z=null;if(!z){z=b('<div class="validatebox-tip"><div class="validatebox-tip-content  ui-corner-all"></div><div class="validatebox-tip-pointer"></div></div>').appendTo("body")}var w=z.find(".validatebox-tip-content");w.html(B);var v=w.height();if(v==0){v=17}z.css({display:"block",left:x.offset().left+10,top:(x.offset().top-v-15)})}function f(z,C,y,v,x){var A=null,B,w=-63;if(C==null||isNaN(C)){C=2000}if(!A){x=x==undefined?"":x;A=b('<div class="windowTopMsg"></div>').append('<div class="header" style="height:18px;border-bottom:1px #c6c6c6 solid;"><span class="closeTip" style="color:red;float:right;cursor:pointer">x</span></div><div class="body" style="margin-top:3px;'+x+'">'+z+"</div>").appendTo("body");b(".closeTip").click(function(){A.animate({top:w+"px"},500);setTimeout(function(){A.remove()},500)})}if(y!==undefined&&y!==null&&y!==""&&!isNaN(y)){B=(b("body").width()-y)/2;A.width(y)}else{B=(b("body").width()-250)/2}A.css("left",B);if(v!==undefined&&v!==null&&v!==""&&!isNaN(v)){A.height(v);w=-(Number(v)+13)}A.animate({top:"10px"},"slow");setTimeout(function(){A.animate({top:w+"px"},500);setTimeout(function(){A.remove()},500)},C)}function d(C,z,x,y,w){var B=b("<div><div class='l-dialog-image l-dialog-image-question'></div><div style='display:block;margin:15px'>"+C+"</div></div>");B.appendTo(b("body"));var v=[];if(typeof y=="string"){v=y.split(",")}B.dialog({title:x&&x.title?x.title:"确认提示",width:350,height:150,modal:true,closable:false,onClose:function(){B.dialog("destroy");B.remove()},buttonsAlgin:"center",buttons:[{text:x&&x.buttonOk?x.buttonOk:v[0]?"确定["+v[0].toUpperCase()+"]":"确定",buttonHighHlight:true,handler:function(){B.dialog("destroy");B.remove();if(z){z(true)}}},{text:x&&x.buttonCancel?x.buttonCancel:v[1]?"取消["+v[1].toUpperCase()+"]":"取消",handler:function(){B.dialog("destroy");B.remove();if(z){z(false)}}}]});if(w){B.find(".dialog-button button:first").focus()}else{B.find(".dialog-button button:last").focus()}if(v){var A=B.find(".dialog-button button");if(v[0]){if(v[0].length==1){hotKeyregister.add("alt+"+v[0],function(){A.eq(0).focus();A.eq(0).click();return false})}else{if(v[0].length>1){hotKeyregister.add(v[0],function(){A.eq(0).focus();A.eq(0).click();return false})}}}if(v[1]){if(v[1].length==1){hotKeyregister.add("alt+"+v[1],function(){A.eq(1).focus();A.eq(1).click();return false})}else{if(v[1].length>1){hotKeyregister.add(v[1],function(){A.eq(1).focus();A.eq(1).click();return false})}}}}B.keydown(function(F){if(F.keyCode==39){var G=F.target||F.srcElement;var D=b(G).next()[0];if(D){D.focus()}}else{if(F.keyCode==37){var G=F.target||F.srcElement;var E=b(G).prev()[0];if(E){E.focus()}}}});B.find("div.panel").css("margin",0)}function e(y,w,v){var x=b("<div ><span style='margin:10px 2px 2px 10px;'>"+y+'</span></br><input type="text" style="width:300px;margin-left:20px" id="___prompt" value="'+(v?v:"")+'"/></div>');x.appendTo(b("body"));b("#___prompt").keydown(function(z){if(z.keyCode==13){x.find(".dialog-button button:first").delay(100).focus()}});x.dialog({title:"请输入",width:350,height:150,modal:true,closable:false,onClose:function(){x.dialog("destroy");x.remove()},buttonsAlgin:"center",buttons:[{text:"确定",buttonHighHlight:true,handler:function(){var z=b("#___prompt").val();x.dialog("destroy");x.remove();if(w){w(true,z)}}},{text:"取消",handler:function(){var z=b("#___prompt").val();x.dialog("destroy");x.remove();if(w){w(false,z)}}}]});x.keydown(function(B){if(B.keyCode==39){var z=b(B.srcElement).next()[0];if(z){z.focus()}}else{if(B.keyCode==37){var A=b(B.srcElement).prev()[0];if(A){A.focus()}}}});b("#___prompt").delay(100).focus()}function u(C,y,v,z){var A=b("<div style='word-break:break-all;overflow:hidden;'><span style='margin:10px 2px 2px 10px;'>"+C+"</span></div>");A.appendTo(b("body"));var B=false;var w=z;if(w){for(var x=0;x<w.length;x++){if(w[x].handler){w[x].handler=function(D){return function(){A.dialog("destroy");A.remove();D()}}(w[x].handler)}}}A.dialog({title:"选择操作",width:(y?y:350),height:(v?v:250),modal:true,closable:false,buttonsAlgin:"center",onClose:function(){A.dialog("destroy");A.remove()},buttons:z});A.keydown(function(F){if(F.keyCode==39){var D=b(F.srcElement).next()[0];if(D){D.focus()}}else{if(F.keyCode==37){var E=b(F.srcElement).prev()[0];if(E){E.focus()}}}});A.find(".dialog-button button:first").delay(100).focus()}function m(w,z,v){try{var y={};y.type=w;y.msg=z;y.args=v;y=Ta.util.obj2string(y);window.top.postMessage(y,"*")}catch(x){}}function l(v,z,x){if(!x){return}var y=b("#tab_"+v);var w=v+";"+z+";"+x;if(y[0]){Base.confirm("页面已打开,是否刷新",function(B){if(B){var A=IndexTab.getTabBd(v);b(A).attr("src",b(A).attr("src"))}m("function","IndexTab.actTab",v+";true")})}else{m("function","IndexTab.addTab",w)}}function g(F,M){var x=b(M);var H=b(document.body).outerHeight(true);var K=b(document.body).outerWidth(true);var E=b("#"+F);var B=E.outerHeight(true);var C=E.outerWidth(true);if(x&&x.length==1){var L=x.offset();if(L){var D=L.top;var I=L.left;var z=x.innerHeight();var y=x.innerWidth();var v=H-z-D;var w=K-y-I;var A=true,J=true;var G=E.attr("_position");if(G=="horizontal"){v=H-D;w=K-y-I}else{if(G=="vertical"){v=H-z-D;w=K-I}}if(v>=B){if(G=="horizontal"){E.css("top",(D+z-40-z/2))}else{if(G=="vertical"){E.css("top",(D+z+10))}}J=false}else{if(G=="horizontal"){E.css("top",(D-B+50))}else{if(G=="vertical"){E.css("top",(D-B-10))}}J=true}if(w>=C){if(G=="horizontal"){E.css("left",I+y)}else{if(G=="vertical"){E.css("left",I-20)}}A=false}else{if(G=="horizontal"){E.css("left",(I-C-10))}else{if(G=="vertical"){E.css("left",(I-C+40))}}A=true}var N=b("#"+F+" > b");if(G=="horizontal"){if(J&&A){o(N);N.addClass("boxComponent_b_rightBottom")}else{if(J&&!A){o(N);N.addClass("boxComponent_b_leftBottom")}else{if(!J&&A){o(N);N.addClass("boxComponent_b_rightTop")}else{if(!J&&!A){o(N);N.addClass("boxComponent_b_leftTop")}}}}}else{if(G=="vertical"){if(J&&A){o(N);N.addClass("boxComponent_b_bottomRight")}else{if(J&&!A){o(N);N.addClass("boxComponent_b_bottomLeft")}else{if(!J&&A){o(N);N.addClass("boxComponent_b_topRight")}else{if(!J&&!A){o(N);N.addClass("boxComponent_b_topLeft")}}}}}}}}E.show()}function o(v){v.removeClass("boxComponent_b_topLeft boxComponent_b_topRight boxComponent_b_bottomLeft boxComponent_b_bottomRight boxComponent_b_leftTop boxComponent_b_rightTop boxComponent_b_leftBottom boxComponent_b_rightBottom")}}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery","TaJsUtil"],a)}else{a(jQuery)}}(function($){$.extend(true,window,{Base:core()});function core(){function _getPreFormField(curid){if(curid==null||curid==undefined||curid==""){return}var inWin=false;if($("#"+curid).parents("div.window-body").length>0){inWin=true}var ids=Ta.core.TaUIManager.keys();var pre=null;for(var i=ids.length-1;i>=0;i--){if(ids[i]==curid){var m=i-1;if(i==(ids.length-1)){m=ids.length-2}for(;m>=0;m--){var srcobj=Ta.core.TaUIManager.getCmp(ids[m]);if(srcobj.type&&!srcobj.disabled&&!srcobj.readOnly&&!$(srcobj).is(":hidden")){if(inWin){if($(srcobj).parents("div.window-body").length>0){pre=srcobj;break}}else{pre=srcobj;break}}}}}return pre}function _getNextFormField(curid){if(curid==null||curid==undefined||curid==""){return}var inWin=false;if($("#"+curid).parents("div.window-body").length>0){inWin=true}var ids=Ta.core.TaUIManager.keys();var next=null;for(var i=0;i<ids.length;i++){if(ids[i]==curid){var m=i+1;if(i==(ids.length-1)){m=0}for(;m<ids.length;m++){var srcobj=Ta.core.TaUIManager.getCmp(ids[m]);if(srcobj.type&&!srcobj.disabled&&!srcobj.readOnly&&!$(srcobj).is(":hidden")){if(inWin){if($(srcobj).parents("div.window-body").length>0){next=srcobj;break}}else{next=srcobj;break}}}}}return next}function getObj(id){var obj=Ta.core.TaUIManager.getCmp(id);if(obj){return obj}var obj=$("#"+id);if(obj[0]){return obj[0]}else{if(Base.globvar.developMode){}return null}}function getFieldLabel(id){var obj=Base.getObj(id);if(!obj){return}var str="";if(obj.cmptype=="flexbox"){return $("#"+obj.getId()).parent().parent().parent().find(">label.fieldLabel").text()}else{if(obj.tagName){if(obj.type&&(obj.type=="checkbox"||obj.type=="radio")){return $(obj.parentNode).find(">label").text()}else{if(obj.tagName.toLowerCase()=="input"){return $(obj.parentNode.parentNode).find(">label.fieldLabel").text()}else{if($(obj).hasClass("checkboxgroup")||$(obj).hasClass("radiogroup")){return $(obj).find(">label.fieldLabel").text()}}}}}}function setFieldLabel(id,label){var obj=Base.getObj(id);if(!obj){return}var str="";if(label&&label.indexOf("：")==-1){label=label+"："}if(obj.cmptype=="flexbox"){$("#"+obj.getId()).parent().parent().parent().find(">label.fieldLabel").text(label)}else{if(obj.tagName){if(obj.type&&(obj.type=="checkbox"||obj.type=="radio")){$(obj.parentNode).find(">label").text(label)}else{if(obj.tagName.toLowerCase()=="input"){$(obj.parentNode.parentNode).find(">label.fieldLabel").text(label)}else{if($(obj).hasClass("checkboxgroup")||$(obj).hasClass("radiogroup")){$(obj).find(">label.fieldLabel").text(label)}}}}}}function _setReadOnly(ids,isReadOnly){var fnsetReadonly=function(id,isReadOnly){var obj=Base.getObj(id);if(!obj){return false}if(obj.tagName){var $obj=$(obj);$obj.attr("readOnly",isReadOnly);if(obj.type=="radio"){var $par=$obj.parent();if(isReadOnly){if($par.hasClass("ta-radio-checked")){$par.removeClass("ta-radio-checked").addClass("ta-radio-checked-disabled")}else{if($par.hasClass("ta-radio-uncheck")){$par.addClass("ta-radio-uncheck-disabled")}}}else{if($par.hasClass("ta-radio-checked-disabled")){$par.removeClass("ta-radio-checked-disabled").addClass("ta-radio-checked")}else{if($par.hasClass("ta-radio-uncheck-disabled")){$par.removeClass("ta-radio-uncheck-disabled")}}}}if(obj.type=="checkbox"){var $par=$obj.parent();if(isReadOnly){if($par.hasClass("ta-chk-checked")){$par.removeClass("ta-chk-checked").addClass("ta-chk-checked-disabled")}else{if($par.hasClass("ta-chk-uncheck")){$par.removeClass("ta-chk-uncheck").addClass("ta-chk-uncheck-disabled")}}}else{if($par.hasClass("ta-chk-checked-disabled")){$par.removeClass("ta-chk-checked-disabled").addClass("ta-chk-checked")}else{if($par.hasClass("ta-chk-uncheck-disabled")){$par.removeClass("ta-chk-uncheck-disabled").addClass("ta-chk-uncheck")}}}}if(isReadOnly){$obj.addClass("readonly");$obj.parent("div.fielddiv2").addClass("readonly");if($obj.hasClass("Wdate")){if($obj.next(".shadingWdate").length==0){$obj.after($("<div class='shadingWdate'></div>"))}else{$obj.next(".shadingWdate").show()}}}else{$obj.removeClass("readonly");$obj.parent("div").removeClass("readonly");$(obj).unbind(".checkboxReadOnly")}}else{if(obj.cmptype=="flexbox"){obj.readOnly(isReadOnly)}}};if(typeof ids=="string"){ids=ids.split(",")}if(jQuery.isArray(ids)){for(var i=0;i<ids.length;i++){if(ids[i]!=undefined){var o=Base.getObj(ids[i]);var $o=$(o);if(o&&o.tagName&&(o.tagName=="FIELDSET"||o.tagName=="DIV"||o.tagName=="FORM")){$o.find("input.ffb-input").each(function(){var a=this.id.replace("_desc","");Base.getObj(a).readOnly(isReadOnly)});$o.find(":input[type!=hidden] ").not(".ffb-input").not(".datagrid :input").each(function(){fnsetReadonly(this.id,isReadOnly)})}else{fnsetReadonly(ids[i],isReadOnly)}}}}}function setReadOnly(ids){Base._setReadOnly(ids,true)}function _setEnable(ids,enable){var fnsetEnable=function(id,enable){var obj=Base.getObj(id);if(!obj){return false}if(obj.tagName){var $obj=$(obj);if(obj.tagName.toLowerCase()=="input"||obj.tagName.toLowerCase()=="textarea"){if(obj.type=="radio"){var $par=$obj.parent();if(enable){if($par.hasClass("ta-radio-checked-disabled")){$par.removeClass("ta-radio-checked-disabled").addClass("ta-radio-checked")}else{if($par.hasClass("ta-radio-uncheck-disabled")){$par.removeClass("ta-radio-uncheck-disabled")}}$obj.removeAttr("disabled");$obj.removeAttr("readOnly")}else{if($par.hasClass("ta-radio-checked")){$par.removeClass("ta-radio-checked").addClass("ta-radio-checked-disabled")}else{if($par.hasClass("ta-radio-uncheck")){$par.addClass("ta-radio-uncheck-disabled")}}$obj.attr("disabled","disabled")}}if(obj.type=="checkbox"){var $par=$obj.parent();if(enable){if($par.hasClass("ta-chk-checked-disabled")){$par.removeClass("ta-chk-checked-disabled").addClass("ta-chk-checked")}else{if($par.hasClass("ta-chk-uncheck-disabled")){$par.removeClass("ta-chk-uncheck-disabled")}}$obj.removeAttr("disabled");$obj.removeAttr("readOnly")}else{if($par.hasClass("ta-chk-checked")){$par.removeClass("ta-chk-checked").addClass("ta-chk-checked-disabled")}else{if($par.hasClass("ta-chk-uncheck")){$par.addClass("ta-chk-uncheck-disabled")}}$obj.attr("disabled","disabled")}}else{$obj.attr("disabled",!enable);if(enable){$obj.removeClass("disabled");Base._setReadOnly(id,false);if($obj.hasClass("Wdate")){$obj.next(".shadingWdate").remove()}$obj.parent("div.fielddiv2").removeClass("disabled")}else{$obj.addClass("disabled");$obj.parent("div.fielddiv2").addClass("disabled")}}}else{if($obj.hasClass("checkboxgroup")||$obj.hasClass("radiogroup")){$obj.find("input").attr("disabled",!enable)}else{if(obj.tagName.toLowerCase()=="fieldset"||$(obj).hasClass("panel")){if(enable){Base.hideMask()}else{Base.showMask(id,false)}}else{if((obj.tagName.toLowerCase()=="input"&&obj.type=="button")||obj.tagName.toLowerCase()=="button"){enable?(obj.disabled=false):(obj.disabled=true);var hotKey=$(obj).attr("hotKey");if(hotKey&&hotKeyregister){var _this=obj;if(enable){if(!hotKeyregister.all_shortcuts[hotKey.toLowerCase()]){hotKeyregister.add(hotKey,function(){_this.focus();_this.click();return false})}}else{hotKeyregister.remove(hotKey)}}}else{if($(obj.parentNode).hasClass("tabs-panels")){enable?Base.enableTab(id):Base.disableTab(id)}}}}}}else{if(obj.cmptype=="flexbox"){obj.setEnable(enable)}else{if(obj.cmptype=="taspinner"){var spinner=Ta.core.TaUIManager.getCmp(id);if(spinner){spinner.spinnerImgClick(id,enable)}}else{if(obj.id&&(obj.id=="file"||obj.id=="multipleFile")){if(!enable){obj._disabled=true;$("#"+id).addClass("disabled")}else{obj._disabled=false;$("#"+id).removeClass("disabled")}}else{if(false){}}}}}};if(typeof ids=="string"){ids=ids.split(",")}if(jQuery.isArray(ids)){for(var i=0;i<ids.length;i++){if(ids[i]!=undefined){var o=Base.getObj(ids[i]);var $o=$(o);if(o&&o.tagName&&(o.tagName=="FIELDSET"||(o.tagName=="DIV"&&(!$(o.parentNode).hasClass("tabs-panels")))||o.tagName=="FORM")){$o.find("input.ffb-input").each(function(){var a=this.id.replace("_desc","");Base.getObj(a).setEnable(enable)});$o.find(":input[type!=hidden] ").not(".ffb-input").not(".datagrid :input").each(function(){fnsetEnable(this.id,enable)})}else{fnsetEnable(ids[i],enable)}}}}}function setEnable(ids){Base._setEnable(ids,true)}function setDisabled(ids){Base._setEnable(ids,false)}function _setIsRequired(ids,isRequired){var fnsetRequired=function(id,isRequired){var obj=Base.getObj(id);if(!obj){return false}if(obj.tagName&&(obj.tagName.toLowerCase()=="input"||obj.tagName.toLowerCase()=="textarea")){var label=$(obj).parents("div.fielddiv:first").find("label");if(label){if(isRequired){if($(">span:first",label).text()!="*"){label.html('<span style="color:red">*</span>'+label.text())}$(obj).validatebox("setRequired",true)}else{$(">span:first",label).remove();$(obj).validatebox("setRequired",false)}}}else{if(obj.cmptype=="flexbox"){var label=$(Base.getObj(id+"_div")).parents("div.fielddiv:first").find("label");if(label){if(isRequired){if($(">span:first",label).text()!="*"){label.html('<span style="color:red">*</span>'+label.text())}$("#"+id+"_desc").validatebox("setRequired",true)}else{$(">span:first",label).remove();$("#"+id+"_desc").validatebox("setRequired",false)}}}else{if($(obj).hasClass("checkboxgroup")||$(obj).hasClass("radiogroup")){var label=$(obj).find(">label");if(label){if(isRequired){if($(">span:first",label).text()!="*"){label.html('<span style="color:red">*</span>'+label.text())}$(obj).validatebox("setRequired",true)}else{$(">span:first",label).remove();$(obj).validatebox("setRequired",false)}}}}}};if(typeof ids=="string"){ids=ids.split(",")}if(jQuery.isArray(ids)){for(var i=0;i<ids.length;i++){ids[i]?fnsetRequired(ids[i],isRequired):null}}}function setRequired(ids){Base._setIsRequired(ids,true)}function setDisRequired(ids){Base._setIsRequired(ids,false)}function setValue(id,value){if(typeof value=="string"){value=$.trim(value)}var _setValue=function(id,value){var temp_id=id+"";if(temp_id.substring(0,5)=="_sel_"){id=temp_id.substring(5,temp_id.length)}var obj=Base.getObj(id);if(!obj){return false}if(obj.tagName){if($(obj).hasClass("checkboxgroup")){$(obj).find("input[type=checkbox]").each(function(){if(typeof value=="string"){if(this.disabled==true){}else{this.checked=(this.value==value);if(this.checked){Base._setChecked($(this).parent(),"checkbox")}else{if(!this.checked){Base._setUnChecked($(this).parent(),"checkbox")}}}}else{if(jQuery.isArray(value)){var flag=false;for(var i=0;i<value.length;i++){if(value[i]==this.value){flag=true}}if(flag){this.checked=true;Base._setChecked($(this).parent(),"checkbox")}else{this.checked=false;Base._setUnChecked($(this).parent(),"checkbox")}}}})}else{if($(obj).hasClass("radiogroup")){$(obj).find("input[type=radio]").each(function(){this.checked=(this.value==value);if(this.checked){Base._setChecked($(this).parent(),"radio")}else{if(!this.checked){Base._setUnChecked($(this).parent(),"radio")}}})}else{if($(obj).hasClass("amountfield")){var t={numberRound:$(obj).attr("numberRound"),decimalPlace:$(obj).attr("precision"),symbol:$(obj).attr("amountPre"),setValue:"setValue"};$(obj).moneyInput(t,value)}else{if($(obj).hasClass("numberfield")){var options={};$(obj).numberbox(options,value)}else{if(obj.type=="text"||obj.type=="password"||obj.tagName=="TEXTAREA"){if(value!=null&&typeof value=="string"){value=value.replaceAll("\\\\r","\r");value=value.replaceAll("\\\\n","\n");$(obj).val(value)}else{$(obj).val(value)}if($(obj).hasClass("datefield")){if(value&&value.length>10){$(obj).val(value.substring(0,10))}}else{if($(obj).hasClass("datetimefield")){if(value&&value.length>19){$(obj).val(value.substring(0,19))}}}}else{if(obj.type=="radio"||obj.type=="checkbox"){var $par=$(obj).parent();if(!value){obj.checked=false;if(obj.type=="radio"){Base._setUnChecked($par,"radio")}else{Base._setUnChecked($par,"checkbox")}}else{if(value&&obj.value==value){obj.checked=true;if(obj.type=="radio"){Base._setChecked($par,"radio")}else{if(obj.type=="checkbox"){Base._setChecked($par,"checkbox")}}}}}else{if($(obj).hasClass("z_pic")){obj.src=Base.globvar.contextPath+"/"+value}}}}}}}}else{if(obj.cmptype=="flexbox"){try{var a={};if(array){a.results=eval(array["_sel_"+id]);if(array["_sel_"+id]!=null){obj.setData(a)}obj.setValue(value)}else{if(value!=""&&value.indexOf("[")>=0&&value.indexOf("]")>0){a.results=eval(value);obj.setData(a)}else{if($.isArray(value)){a.results=eval(value);obj.setData(a)}else{obj.setValue(value)}}}}catch(e){obj.setValue(value)}}else{if(obj.cmptype=="taselectpanel"){obj.setValue(id,value)}else{if(false){}}}}};if(value==null||value=="null"||value=="NULL"){value=""}if(typeof id=="object"){var array={};for(var i in id){if((i+"").substring(0,5)=="_sel_"){array[i]=id[i];delete id[i]}}if($.isEmptyObject(id)){if(!$.isEmptyObject(array)){for(var j in array){_setValue(j,array[j])}}}else{if(!$.isEmptyObject(array)){for(var j in array){_setValue(j,array[j])}}for(var i in id){if(typeof id[i]=="string"){_setValue(i,$.trim(id[i]))}else{_setValue(i,id[i])}}}}else{_setValue(id,value)}}function getValue(id){var obj=Base.getObj(id);if(!obj){return false}if(obj.tagName){if($(obj).hasClass("checkboxgroup")){var ret=[];$(obj).find("input[type=checkbox]:checked").each(function(){ret.push(this.value)});return ret}else{if($(obj).hasClass("radiogroup")){return $(obj).find("input[type=radio]:checked").eq(0).val()}else{if($(obj).hasClass("amountfield")){var t={numberRound:$(obj).attr("numberRound"),decimalPlace:$(obj).attr("precision"),symbol:$(obj).attr("amountPre"),getValue:"getValue"};return $(obj).moneyInput(t)}else{if(obj.type=="text"||obj.type=="password"||obj.type=="textarea"||obj.tagName=="TEXTAREA"){return $(obj).val()}else{if(obj.type=="radio"||obj.type=="checkbox"){return obj.checked?$(obj).val():null}}}}}}else{if(obj.cmptype=="flexbox"){return obj.getValue(1)}else{if(obj.cmptype=="taselectpanel"){return obj.getValue(id)}else{if(false){}}}}}function focus(id,delay){var obj=Base.getObj(id);if(!obj){return false}if(obj.cmptype=="flexbox"){obj=$("#"+id+"_desc")}if(delay){$(obj).delay(delay).focus()}else{$(obj).focus()}}function showObj(ids){var show=function(id){var obj=Base.getObj(id);if(!obj){return false}if(obj.tagName&&(obj.type=="text"||obj.type=="password"||obj.type=="textarea"||obj.type=="file")){if($(obj).parent().hasClass("fielddiv2")){$(obj).parent().parent().show().css("visibility","visible")}else{if($(obj).parent().hasClass("fielddiv")){$(obj).parent().show().css("visibility","visible")}}if(obj.type=="textarea"){$(obj).show().css("visibility","visible")}}else{if($(obj.parentNode).hasClass("tabs-panels")){var tabsc=$(obj.parentNode.parentNode);if(tabsc.hasClass("tabs-container")){tabsc.tauitabs("showTab",id)}}else{if(obj.cmptype=="flexbox"){$("#"+id).parent().parent().parent().show().css("visibility","visible")}else{if($(obj).hasClass("radiogroup")||$(obj).hasClass("checkboxgroup")){$(obj).show()}else{if(obj.tagName&&obj.tagName.toLowerCase()=="input"&&(obj.type=="checkbox"||obj.type=="radio")){$(obj).parent().show().css("visibility","visible")}else{if(obj.tagName&&(obj.tagName.toLowerCase()=="button"||(obj.tagName.toLowerCase()=="input"&&obj.type=="button"))){$(obj).show().css("visibility","visible");var hotKey=$(obj).attr("hotKey");if(hotKey&&hotKeyregister){var _this=obj;hotKeyregister.add(hotKey,function(){_this.focus();_this.click();return false})}}else{$(obj).show().css("visibility","visible")}}}}}}};if(typeof ids=="string"){ids=ids.split(",")}if(jQuery.isArray(ids)){for(var i=0;i<ids.length;i++){show(ids[i])}}}function hideObj(ids,isHold){var hide=function(id,isHold){var obj=Base.getObj(id);if(!obj){return false}if(obj.tagName&&(obj.type=="text"||obj.type=="password"||obj.type=="textarea"||obj.type=="file")){if($(obj).parent().hasClass("fielddiv2")){if(isHold){$(obj).parent().parent().css("visibility","hidden")}else{$(obj).parent().parent().hide()}}else{if($(obj).parent().hasClass("fielddiv")){if(isHold){$(obj).parent().css("visibility","hidden")}else{$(obj).parent().hide()}}}}else{if($(obj.parentNode).hasClass("tabs-panels")){var tabsc=$(obj.parentNode.parentNode);if(tabsc.hasClass("tabs-container")){tabsc.tauitabs("hideTab",id)}}else{if(obj.cmptype=="flexbox"){if(isHold){$("#"+id).parent().parent().parent().css("visibility","hidden")}else{$("#"+id).parent().parent().parent().hide()}}else{if(obj.tagName&&obj.tagName.toLowerCase()=="input"&&(obj.type=="checkbox"||obj.type=="radio")){if(isHold){$(obj).parent().css("visibility","hidden")}else{$(obj).parent().hide()}}else{if(isHold){$(obj).css("visibility","hidden")}else{$(obj).hide()}var hotKey=$(obj).attr("hotKey");if(hotKey&&hotKeyregister){var _this=obj;hotKeyregister.remove(hotKey)}}}}}};isHold=(isHold===true?true:false);if(typeof ids=="string"){ids=ids.split(",")}if(jQuery.isArray(ids)){for(var i=0;i<ids.length;i++){ids[i]?hide(ids[i],isHold):null}}}function resetForm(formId){var form=$("#"+formId)[0];if(formId==undefined){form=$("form")[0]}if(form&&form.tagName=="FORM"){form.reset();Base.clearInvalidStyle(formId)}$(form).find(":checkbox").not("[readonly='readonly']").each(function(){if(this.checked){Base._setChecked($(this).parent(),"checkbox")}else{Base._setUnChecked($(this).parent(),"checkbox")}});$(form).find(":radio").not("[readonly='readonly']").each(function(){if(this.checked){Base._setChecked($(this).parent(),"radio")}else{Base._setUnChecked($(this).parent(),"radio")}})}function validateTab(ids,focusFirst){if(!ids){return true}var firstValid,focusFirst=(focusFirst===false?false:true);function validate(id){var obj=Base.getObj(id);if(!obj){return true}if(obj.tagName=="INPUT"||$(obj).hasClass("checkboxgroup")||$(obj).hasClass("radiogroup")){var bvalid=$(obj).validatebox("isValid");if(!bvalid&&focusFirst&&!firstValid){firstValid=id}return bvalid}else{if(obj.cmptype=="flexbox"){var bvalid=$("#"+obj.getId()+"_desc").validatebox("isValid");if(!bvalid&&focusFirst&&!firstValid){firstValid=id}return bvalid}else{var bret=true;$(obj).find(":input,div.checkboxgroup,div.radiogroup").not("[type=button]").each(function(){if($(this).is(":hidden")&&!$(this).validatebox("isValid")){bret=false;if(focusFirst&&!firstValid&&$(this).css("display")!="none"){firstValid=this.id}}});return bret}}}if(typeof ids=="string"){ids=ids.split(",")}if($.isArray(ids)){var bret=true;for(var i=0;i<ids.length;i++){if(ids[i]&&ids[i]!=""&&!validate(ids[i])){bret=false}}if(focusFirst&&firstValid){var tabid=$("#"+firstValid).closest(".tabs-panels").children("div").has("#"+firstValid)[0].id;Base.activeTab(tabid);Base.focus(firstValid,100)}return bret}return false}function validateForm(ids,focusFirst){if(!ids){return true}var firstValid,focusFirst=(focusFirst===false?false:true);function validate(id){var obj=Base.getObj(id);if(!obj){return true}if($("#"+id).is(":hidden")){return true}if(obj.tagName=="INPUT"||obj.tagName=="TEXTAREA"||$(obj).hasClass("checkboxgroup")||$(obj).hasClass("radiogroup")){var bvalid=$(obj).validatebox("isValid");if(!bvalid&&focusFirst&&!firstValid){firstValid=id}return bvalid}else{if(obj.cmptype=="flexbox"){var bvalid=$("#"+obj.getId()+"_desc").validatebox("isValid");if(!bvalid&&focusFirst&&!firstValid){firstValid=id}return bvalid}else{var bret=true;$(obj).find(":input,div.checkboxgroup,div.radiogroup").not("[type=button]").each(function(){if(!$(this).is(":hidden")&&!$(this).validatebox("isValid")){bret=false;if(focusFirst&&!firstValid){firstValid=this.id}return bret}if($(this).is(":disabled")){bret=true}});return bret}}}if(typeof ids=="string"){ids=ids.split(",")}if($.isArray(ids)){var bret=true;for(var i=0;i<ids.length;i++){if(ids[i]&&ids[i]!=""&&!validate(ids[i])){bret=false}}if(focusFirst&&firstValid){Base.focus(firstValid,100)}return bret}return false}function setInvalidField(id,message){var obj=Base.getObj(id);if(!obj){return false}if(obj.tagName=="INPUT"||$(obj).hasClass("checkboxgroup")||$(obj).hasClass("radiogroup")){$(obj).validatebox("makeInvalid",message)}else{if(obj.cmptype=="flexbox"){$("#"+obj.getId()+"_desc").validatebox("makeInvalid",message)}else{}}}function clearInvalidStyle(ids){var clear=function(id){var obj=Base.getObj(id);if(!obj){return false}if(obj.tagName=="INPUT"||$(obj).hasClass("checkboxgroup")||$(obj).hasClass("radiogroup")){$(obj).validatebox("clear")}else{if(obj.cmptype=="flexbox"){$("#"+obj.getId()+"_desc").validatebox("clear")}else{$(obj).find(":input:visible,div.checkboxgroup,div.radiogroup").not("[type=button]").each(function(){$(this).validatebox("clear")})}}};if(typeof ids=="string"){ids=ids.split(",")}if($.isArray(ids)){for(var i=0;i<ids.length;i++){if(ids[i]&&ids[i]!=""){clear(ids[i])}}}}function clearData(ids){var obj=Base.getObj(ids);if(obj){$(obj).find(":input").not(":radio").not(":checkbox").val("");$(obj).find(":checkbox").not("[readonly='readonly']").each(function(){this.checked=false;Base._setUnChecked($(this).parent(),"checkbox")});$(obj).find(":radio").not("[readonly='readonly']").each(function(){this.checked=false;Base._setUnChecked($(this).parent(),"radio")})}}function cancelBubble(event){if(event==null){event=window.event}event.cancelBubble=true;event.returnValue=false;if(event.stopPropagation){event.stopPropagation();event.preventDefault()}}function getIdCardBirthday(idCard){var year,month,day;if(idCard.length==15){year=idCard.substring(6,8);month=idCard.substring(8,10);day=idCard.substring(10,12)}else{year=idCard.substring(6,10);month=idCard.substring(10,12);day=idCard.substring(12,14)}if(year.length==2){year="19"+year}if(month.indexOf("0")==0){month=month.substring(1)}if(day.indexOf("0")==0){day=day.substring(1)}return year+"-"+month+"-"+day}function getIdCardGender(idCard){var gender;if(idCard.length==15){gender=idCard.substr(14,1)}else{gender=idCard.substr(16,1)}return gender%2==0?"女":"男"}function idcard218(sId){if(sId.length==15){if(!/^\d{14}(\d|x)$/i.test(sId)){this.message="你输入的身份证长度或格式错误";return false}else{sId=sId.substr(0,6)+"19"+sId.substr(6,9);sId+=getVCode(sId)}}function getVCode(CardNo17){var Wi=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2,1);var Ai=new Array("1","0","X","9","8","7","6","5","4","3","2");var cardNoSum=0;for(var i=0;i<CardNo17.length;i++){cardNoSum+=CardNo17.charAt(i)*Wi[i]}var seq=cardNoSum%11;return Ai[seq]}return sId}function setSelectDataValue(id,defaultId,defaultName){if(id!=null&&defaultId!=null&&defaultName!=null){if(Base.getObj(id)!=null){if(defaultId!=""){if(String(defaultId).indexOf(",")>-1){var ids=defaultId.split(",");var names=defaultName.split(",");for(var i=0;i<ids.length;i++){if(i==0){$("#"+id).parent().prepend("<div class='selectData_leirong'  _id='leirong_"+ids[i]+"'><strong style='margin-right:18px;'>"+names[i]+"</strong> <a class='selectData_leirong_a' href='javascript:void(0)' title='点击删除' onclick='fnRemoveSelectData_"+id+"(this)'>x</a></div>")}else{$("#"+id).siblings(".selectData_leirong:last").after("<div class='selectData_leirong' _id='leirong_"+ids[i]+"'><strong  style='margin-right:18px;'>"+names[i]+"</strong><a class='selectData_leirong_a' href='javascript:void(0)' title='点击删除' onclick='fnRemoveSelectData_"+id+"(this)'>x</a></div>")}}}else{$("#"+id).parent().prepend("<div class='selectData_leirong'  _id='leirong_"+defaultId+"'><strong style='margin-right:18px;'>"+defaultName+"</strong> <a class='selectData_leirong_a' href='javascript:void(0)' title='点击删除' onclick='fnRemoveSelectData_"+id+"(this)'>x</a></div>")}var leirongWidth=0;var $leirong=$("#selectData_"+id+" div.selectData_leirong"),leirongWidth=0;if($leirong&&$leirong.length>0){for(var i=0;i<$leirong.length;i++){leirongWidth+=$($leirong[i]).outerWidth(true)}}$("#"+id).css("left",leirongWidth)}}}}function getHandleStatus(){var data={};var fields=[];var lists=[];var keys=Ta.core.TaUIManager.keys();for(var i=0;i<keys.length;i++){var obj=Base.getObj(keys[i]);if(obj.cmptype=="datagrid"){var grid={};grid.id=keys[i];var sdata=Base.getGridSelectedRows(keys[i]);grid.selData=Ta.util.obj2string(sdata);var allData=Base.getGridData(keys[i]);grid.allData=Ta.util.obj2string(allData);lists.push(grid)}}data.lists=lists;$("input").each(function(){if($(this).attr("id")!=null){if($(this).attr("readonly")){var singleData={};singleData.id=$(this).attr("id");singleData.value=$(this).val();singleData.status="readonly";fields.push(singleData)}else{if($(this).attr("disabled")){var singleData1={};singleData1.id=$(this).attr("id");singleData1.value=$(this).val();singleData1.status="disabled";fields.push(singleData1)}else{var singleData2={};singleData2.id=$(this).attr("id");singleData2.value=$(this).val();singleData2.status="";fields.push(singleData2)}}}});data.fields=fields;var $t=$('<textarea id="_dataFields_" name="dto[\'_dataFields_\']"></textarea>');$t.appendTo($("body"));$t.hide();$t.val(Ta.util.obj2string(data));var html=document.documentElement.outerHTML;var $jsp=$('<textarea id="_jspContext_" name="dto[\'_jspContext_\']"></textarea>');$jsp.appendTo($("body"));$jsp.hide();$jsp.val(html);Base.submit("_dataFields_,_jspContext_",Base.globvar.basePath+"/system/handleOldDataManagerAction!save.do");$t.remove();$jsp.remove()}function showHandleStatus(userid,time,optionid){var param={};param["dto['id']"]=optionid;top.Base.openWindow("optionid","经办现场回顾",Base.globvar.basePath+"/system/handleOldDataManagerAction!doExecutePage.do",param,top.innerWidth,top.innerHeight,null,null,true)}function selectValue(obj){if(obj!=null){if(typeof obj=="string"){$("#"+obj).select()}else{if(typeof obj=="object"){if(obj instanceof jQuery){obj.select()}else{$(obj).select()}}else{return}}}else{return}}function saveOldValue(submitIds){if(submitIds==null){return}var oldValueObj=[];var aids=submitIds.split(",");for(var i=0;i<aids.length;i++){if(aids[i]==null||aids[i]==""){continue}var obj=Base.getObj(aids[i]);if(obj==undefined){continue}var $obj=$(obj);if(obj&&obj.cmptype!="datagrid"&&($obj.hasClass("panel")||$obj.hasClass("grid")||obj.cmptype=="flexbox"||(obj.tagName&&(obj.tagName=="FORM"||obj.tagName=="FIELDSET"||obj.tagName=="DIV"||obj.tagName=="INPUT"||obj.tagName=="TEXTAREA"||obj.tagName=="SELECT")))){if(obj.cmptype=="flexbox"){obj=$("#"+aids[i])}for(var j=0;j<aids.length;j++){if(aids[j]==null||aids[j]==""){continue}var obj2=Base.getObj(aids[j]);if(obj2.cmptype=="flexbox"){obj2=$("#"+aids[j])}if(i!=j&&obj2.cmptype!="datagrid"){if($(obj).has($(obj2)).length>0){alert(aids[j]+"对象在"+aids[i]+"对象里面，指定提交的元素id不能有包含与被包含关系");return false}if($(obj2).has($(obj)).length>0){alert(aids[i]+"对象在"+aids[j]+"对象里面，指定提交的元素id不能有包含与被包含关系");return false}}}if($obj.hasClass("amountfield")){var mnyobj={};mnyobj.__id=aids[i];mnyobj["ovDto['"+aids[i]+"']"]=$("#"+aids[i]+"_hidden").val().trim().replace(":","").replace("*","");mnyobj["ovDto['"+aids[i]+"__label']"]=$("#"+aids[i]+"_hidden").parent().parent().find("label").text().trim().replace(":","").replace("*","");oldValueObj.push(mnyobj)}$("#"+aids[i]).find("input").not(":hidden").each(function(){if($(this).hasClass("ffb-input")){var mnyobj={};var id=(this.id).replace("_desc","");mnyobj.__id=id;mnyobj["ovDto['"+id+"']"]=$(this).prev().val().trim().replace(":","").replace("*","");mnyobj["ovDto['"+id+"__label']"]=$(this).parent().parent().parent().find("label").text().trim().replace(":","").replace("*","");mnyobj["ovDto['"+id+"__desc']"]=$(this).val().trim().replace(":","").replace("*","");oldValueObj.push(mnyobj)}else{var mnyobj={};mnyobj.__id=this.id;mnyobj["ovDto['"+this.id+"']"]=$(this).val().trim().replace(":","").replace("*","");mnyobj["ovDto['"+this.id+"__label']"]=$(this).parent().parent().find("label").text().trim().replace(":","").replace("*","");oldValueObj.push(mnyobj)}})}else{if($obj.hasClass("amountfield")){var mnyobj={};mnyobj.__id=aids[i];mnyobj["ovDto['"+aids[i]+"']"]=$("#"+aids[i]+"_hidden").val().trim().replace(":","").replace("*","");mnyobj["ovDto['"+aids[i]+"__label']"]=$("#"+aids[i]+"_hidden").parent().parent().find("label").text().trim().replace(":","").replace("*","");oldValueObj.push(mnyobj)}else{alert("提交的submit ids只能是panel,fieldset,box,form elements,form,div,datagrid这些元素的id");return false}}}document._oldValueObj=oldValueObj;return oldValueObj}function spinnerImgClick(id){var spinner=Ta.core.TaUIManager.getCmp(id);if(spinner){spinner.spinnerImgClick(id)}}function insertSort(arr,sortfn,desc){for(var i=1;i<arr.length;i++){var tmp=arr[i],j=i;while(arr[j-1]>tmp){arr[j]=arr[j-1];--j}arr[j]=tmp}return arr}function _setChecked($_d,type){if(type=="checkbox"){if($_d.hasClass("ta-chk-uncheck")){$_d.removeClass("ta-chk-uncheck").addClass("ta-chk-checked")}else{if($_d.hasClass("ta-chk-uncheck-disabled")){$_d.removeClass("ta-chk-uncheck-disabled").addClass("ta-chk-checked-disabled")}}}else{if(type=="radio"){if($_d.hasClass("ta-radio-uncheck")){$_d.removeClass("ta-radio-uncheck").addClass("ta-radio-checked")}else{if($_d.hasClass("ta-radio-uncheck-disabled")){$_d.removeClass("ta-radio-uncheck-disabled").addClass("ta-radio-checked-disabled")}}}}}function _setUnChecked($_d,type){if(type=="checkbox"){if($_d.hasClass("ta-chk-checked")){$_d.removeClass("ta-chk-checked").addClass("ta-chk-uncheck")}else{if($_d.hasClass("ta-chk-checked-disabled")){$_d.removeClass("ta-chk-checked-disabled").addClass("ta-chk-uncheck-disabled")}}}else{if(type=="radio"){if($_d.hasClass("ta-radio-checked")){$_d.removeClass("ta-radio-checked").addClass("ta-radio-uncheck")}else{if($_d.hasClass("ta-radio-checked-disabled")){$_d.removeClass("ta-radio-checked-disabled").addClass("ta-radio-uncheck-disabled")}}}}}function funPlaceholder(element){var placeholder="";if(element&&!("placeholder" in document.createElement("input"))&&(placeholder=element.getAttribute("placeholder"))){var idLabel=element.id;if(!idLabel){idLabel="placeholder_"+new Date().getTime();element.id=idLabel}var eleLabel=document.createElement("label");eleLabel.htmlFor=idLabel;eleLabel.style.position="absolute";eleLabel.style.margin="0 0 0 0";eleLabel.style.color="graytext";eleLabel.style.cursor="text";eleLabel.style.display="block";element.parentNode.insertBefore(eleLabel,element);element.onfocus=function(){eleLabel.innerHTML=""};element.onblur=function(){if(this.value===""){eleLabel.innerHTML=placeholder}};eleLabel.onclick=function(){element.focus()};element.onpropertychange=function(){if(element.value!=""){eleLabel.innerHTML=""}};if(element.value===""){eleLabel.innerHTML=placeholder}}}return{_getPreFormField:_getPreFormField,_getNextFormField:_getNextFormField,getObj:getObj,getFieldLabel:getFieldLabel,setFieldLabel:setFieldLabel,_setReadOnly:_setReadOnly,setReadOnly:setReadOnly,_setEnable:_setEnable,setEnable:setEnable,setDisabled:setDisabled,_setIsRequired:_setIsRequired,setRequired:setRequired,setDisRequired:setDisRequired,setValue:setValue,getValue:getValue,focus:focus,showObj:showObj,hideObj:hideObj,resetForm:resetForm,validateTab:validateTab,validateForm:validateForm,setInvalidField:setInvalidField,clearInvalidStyle:clearInvalidStyle,clearData:clearData,cancelBubble:cancelBubble,getIdCardBirthday:getIdCardBirthday,getIdCardGender:getIdCardGender,idcard218:idcard218,getHandleStatus:getHandleStatus,showHandleStatus:showHandleStatus,selectValue:selectValue,saveOldValue:saveOldValue,spinnerImgClick:spinnerImgClick,insertSort:insertSort,_setChecked:_setChecked,_setUnChecked:_setUnChecked,funPlaceholder:funPlaceholder,setSelectDataValue:setSelectDataValue}}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery","TaJsUtil"],a)}else{a(jQuery)}}(function($){$.extend(true,window,{Base:core()});function core(){return{_enableButtonLayout:_enableButtonLayout,showMask:showMask,hideMask:hideMask,getJson:getJson,submit:submit,submitForm:submitForm,loadValues:loadValues,_ajax:_ajax,_doSubmitIds:_doSubmitIds,_dealdata:_dealdata,compareOldData:compareOldData};function _enableButtonLayout(enable){if(enable){$("div.panel-button,div.button-panel,div.panel-toolbar").each(function(){$("<div class='enableButtonLayout' style='top:"+$(this).offset().top+"px;left:"+$(this).offset().left+"px;height:"+$(this).outerHeight(true)+"px;width:"+$(this).outerWidth(true)+"px'></div>").appendTo($("body"))});Base.globvar.isSubmitNow=true}else{Base.hideMask()}}function showMask(id,showLoading){var height=$(window).height(),width=$(window).width(),top=0,left=0;var obj=null;if(id&&(obj=Base.getObj(id))){var $obj=$(obj);height=$obj.height();width=$obj.width();top=$obj.offset().top;left=$obj.offset().left;if($obj.hasClass("panel")&&$(">div.panel-header",$obj).length>0){top+=$(">div.panel-header",$obj).outerHeight(true);height-=$(">div.panel-header",$obj).outerHeight(true)}else{if(obj.tagName.toLowerCase()=="fieldset"){top+=22;height-=5;width+=18}}}var loadding="";if(showLoading===false){}else{loadding="<div style='left:"+((width-left)/2-20)+"px;top:"+((height-top)/2+10)+"px;width:60px;height:30px;opacity:1;position: absolute;font-size:12px'>读取中...</div>"}$("<div class='enableButtonLayout "+(showLoading===false?"":"loading")+"' style='top:"+top+"px;left:"+left+"px;height:"+height+"px;width:"+width+"px'>"+loadding+"</div>").appendTo($("body"))}function hideMask(){$("body >div.enableButtonLayout").remove();Base.globvar.isSubmitNow=false}function getJson(url,parameter,callback,async){var ret;url=(url.indexOf("?")==-1?(url+"?_r="+Math.random()):(url+"&_r="+Math.random()));Base._ajax({url:url,type:"POST",data:parameter,success:function(data){if(!$.isArray(data)&&!$.isEmptyObject(data)){var tempData=data.fieldData,newData={};for(var i in tempData){if(i.indexOf("_sel_")==0){newData[i.substring(5)]=tempData[i]}else{newData[i]=tempData[i]}}data.fieldData=newData}ret=data;if(typeof callback=="function"){callback(data)}},async:async===true?true:false,dataType:"json"});return ret}function submit(submitIds,url,parameter,onSubmit,autoValidate,_succCallback,_failCallback,isIncludeNullFields,token){if(token==null){token=true}autoValidate=(autoValidate===false?false:true);if((onSubmit&&!onSubmit())||(autoValidate&&!Base.validateForm(submitIds))){Base.hideMask();return false}Base._enableButtonLayout(false);var showMaskTime=setTimeout(function(){Base.showMask("body")},300);submitIds=submitIds?submitIds:"";var aids=submitIds.split(",");var queryStr=_doSubmitIds(aids,parameter,isIncludeNullFields,token);if(false){var form=Base.getObj(submitIds);if(aids.length==1&&form&&form.tagName=="FORM"){$(form).attr("action",url);$(form).attr("enctype","multipart/form-data");form.submit()}else{if(Base.globvar.developMode){alert("文件上传只能传入唯一的form元素id")}}}else{Base._ajax({url:url,data:queryStr,succCallback:function(data,dataType){clearTimeout(showMaskTime);Base._dealdata(data);Base.hideMask();if(_succCallback){_succCallback(data,dataType)}Base._enableButtonLayout(false)},failCallback:function(data,dataType){Base._dealdata(data);Base.hideMask();if(_failCallback){_failCallback(data,dataType)}Base._enableButtonLayout(false)},type:"POST",dataType:"json"})}}function submitForm(formId,onSubmit,autoValidate,url,parameter){Base.showMask();if(formId){form=document.getElementById(formId)}else{alert("传入formId为空");return false}if(!form){alert("找不到需要提交的form元素");return false}if((onSubmit&&!onSubmit())||(autoValidate&&!Base.validateForm(formId))){Base.hideMask();return false}if(parameter){url+="?"+jQuery.param(parameter)}$form=$(form);if(url){$form.attr("action",url)}$("div.datagrid").each(function(){var gridId=$(this).attr("id");if(!document.getElementById(gridId+"_selected")){$form.append('<input type="hidden" id="'+gridId+'_selected" name="gridInfo[\''+gridId+"_selected']\"/>");document.getElementById(gridId+"_selected").value=Ta.util.obj2string(Base.getGridSelectedRows(gridId))}else{document.getElementById(gridId+"_selected").value=Ta.util.obj2string(Base.getGridSelectedRows(gridId))}if(!document.getElementById(gridId+"_modified")){$form.append('<input type="hidden" id="'+gridId+'_modified" name="gridInfo[\''+gridId+'_modified\']" value="'+Ta.util.obj2string(Base.getGridModifiedRows(gridId))+'"/>')}else{document.getElementById(gridId+"_modified").value=Ta.util.obj2string(Base.getGridModifiedRows(gridId))}if(!document.getElementById(gridId+"_removed")){$form.append('<input type="hidden" id="'+gridId+'_removed" name="gridInfo[\''+gridId+'_removed\']" value="'+Ta.util.obj2string(Base.getGridRemovedRows(gridId))+'"/>')}else{document.getElementById(gridId+"_removed").value=Ta.util.obj2string(Base.getGridRemovedRows(gridId))}if(!document.getElementById(gridId+"_added")){$form.append('<input type="hidden" id="'+gridId+'_added" name="gridInfo[\''+gridId+'_added\']" value="'+Ta.util.obj2string(Base.getGridAddedRows(gridId))+'"/>')}else{document.getElementById(gridId+"_added").value=Ta.util.obj2string(Base.getGridAddedRows(gridId))}});form.submit()}function loadValues(submitids,url,parameter,succCallback,failCallback,async){}function _ajax(options){var _options=options;if(!_options.url){throw"Base._ajax方法必须传入URL"}_options.url=encodeURI(_options.url);var error=false;var _data=null,dataType="";var succCallback=options.succCallback,failCallback=options.failCallback;delete _options.succCallback;delete _options.failCallback;_options.complete=function(_XMLHTTPRequest,textStatus){Base._enableButtonLayout(false);if(_XMLHTTPRequest&&_XMLHTTPRequest.getResponseHeader){if(_XMLHTTPRequest.getResponseHeader("__timeout")){alert("操作提示：会话已经超时，请重新登录!");top.location.href="index.jsp?randId="+parseInt(1000*Math.random());return}if(_XMLHTTPRequest.getResponseHeader("__forbidden")){Base.alert(["系统访问权限提示：","你目前没有权限访问：",this.url].join(","));return}if(_XMLHTTPRequest.getResponseHeader("__exception")){Base._dealdata(eval("("+_XMLHTTPRequest.responseText+")"));return}if(_XMLHTTPRequest.getResponseHeader("__samelogin")){alert("帐号在其他地方登录，您已被迫下线！");top.location.href="index.jsp?randId="+parseInt(1000*Math.random());return}}if(error){if(textStatus==="parsererror"){alert(["返回的数据格式不满足json格式，解析错误:\n",_data].join(","))}else{alert(["执行发生异常,可能网络连接失败"].join(","))}}else{if(_data){if(_data.success||typeof _data==="string"){if(succCallback){succCallback.call(this,_data,dataType)}}else{if(_data.success!=undefined&&_data.success.toString().toLowerCase()=="false"){if(failCallback){failCallback.call(this,_data,dataType)}}else{}}}}};var success=_options.success;_options.success=success?function(data,statusText){_data=data;success(data,statusText)}:function(data,statusText){_data=data};_options.error=function(_XMLHTTPRequest,errmsg,exception){_data=_XMLHTTPRequest.responseText;error=true};_options.dataFilter=function(data,type){dataType=type;return data};_options.beforeSend=function(_XMLHTTPRequest){_XMLHTTPRequest.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8");return true};jQuery.ajax(_options)}function _doSubmitIds(aids,parameter,isIncludeNullFields,token){var queryStr="",datagridids=[];if(aids){for(var i=0;i<aids.length;i++){if(aids[i]==null||aids[i]==""){continue}var obj=Base.getObj(aids[i]);if(obj==undefined){continue}var $obj=$(obj);if(obj&&obj.cmptype!="datagrid"&&($obj.hasClass("panel")||$obj.hasClass("grid")||obj.cmptype=="flexbox"||(obj.tagName&&(obj.tagName=="FORM"||obj.tagName=="FIELDSET"||obj.tagName=="DIV"||obj.tagName=="INPUT"||obj.tagName=="TEXTAREA"||obj.tagName=="SELECT")))){if(obj.cmptype=="flexbox"){obj=$("#"+aids[i]);var tmd5=$("#"+aids[i]+"_md5list");if(tmd5[0]){if(queryStr==""){queryStr+=$("#"+aids[i]+"_md5list").taserialize(isIncludeNullFields)}else{queryStr+="&"+$("#"+aids[i]+"_md5list").taserialize(isIncludeNullFields)}}}for(var j=0;j<aids.length;j++){if(aids[j]==null||aids[j]==""){continue}var obj2=Base.getObj(aids[j]);if(obj2.cmptype=="flexbox"){obj2=$("#"+aids[j])}if(i!=j&&obj2.cmptype!="datagrid"){if($(obj).has($(obj2)).length>0){alert(aids[j]+"对象在"+aids[i]+"对象里面，指定提交的元素id不能有包含与被包含关系");return false}if($(obj2).has($(obj)).length>0){alert(aids[i]+"对象在"+aids[j]+"对象里面，指定提交的元素id不能有包含与被包含关系");return false}}}if($obj.hasClass("amountfield")){if(queryStr==""){queryStr+=$("#"+aids[i]+"_hidden").taserialize(isIncludeNullFields)}else{queryStr+="&"+$("#"+aids[i]+"_hidden").taserialize(isIncludeNullFields)}}if(queryStr==""){queryStr+=$("#"+aids[i]).taserialize(isIncludeNullFields)}else{queryStr+="&"+$("#"+aids[i]).taserialize(isIncludeNullFields)}}else{if($obj.hasClass("amountfield")){if(queryStr==""){queryStr+=$("#"+aids[i]+"_hidden").taserializeisIncludeNullFields()}else{queryStr+="&"+$("#"+aids[i]+"_hidden").taserialize(isIncludeNullFields)}}else{if(obj.cmptype=="datagrid"){datagridids.push(new String(aids[i]));if(queryStr==""){queryStr+=$("#"+aids[i]).taserialize(isIncludeNullFields)}else{queryStr+="&"+$("#"+aids[i]).taserialize(isIncludeNullFields)}aids[i]=null}else{alert("提交的submit ids只能是panel,fieldset,box,form elements,form,div,datagrid这些元素的id");return false}}}}}$("div.datagrid").each(function(){for(var i=0;i<aids.length;i++){if(aids[i]&&aids[i]!=""&&$("#"+aids[i]).has($(this)).length==0){if(queryStr==""){queryStr=$("input:hidden[name^=gridInfo]",$(this)).taserialize(isIncludeNullFields)}else{queryStr+="&"+$("input:hidden[name^=gridInfo]",$(this)).taserialize(isIncludeNullFields)}}break}});for(var i=0;i<datagridids.length;i++){var p={};p["gridInfo['"+datagridids[i]+"_selected']"]=Ta.util.obj2string(Base.getGridSelectedRows(datagridids[i]));p["gridInfo['"+datagridids[i]+"_modified']"]=Ta.util.obj2string(Base.getGridModifiedRows(datagridids[i]));p["gridInfo['"+datagridids[i]+"_removed']"]=Ta.util.obj2string(Base.getGridRemovedRows(datagridids[i]));p["gridInfo['"+datagridids[i]+"_added']"]=Ta.util.obj2string(Base.getGridAddedRows(datagridids[i]));if(queryStr==""){queryStr=jQuery.param(p)}else{queryStr+="&"+jQuery.param(p)}}if(document._dataSubmitStore&&document._dataSubmitStore.length>0){parameter=$.extend(parameter,document._dataSubmitStore[0])}var parameterOld=Base.compareOldData(aids);parameter=$.extend(parameter,parameterOld);if(parameter){if(queryStr==""){queryStr=jQuery.param(parameter)}else{queryStr+="&"+jQuery.param(parameter)}}return queryStr}function _dealdata(data){if(typeof data!="object"){return}if(data.fieldData){Base.setValue(data.fieldData)}if(data.validateErrors){var focus=null,_errors=data.validateErrors;for(var fieldId in _errors){if(!focus){focus=fieldId}Base.setInvalidField(fieldId,_errors[fieldId])}if(focus&&!data.focus){data.focus=focus}}if(data.lists){var _lists=data.lists;for(var list in _lists){if(list=="_dataSubmitStore"){document._dataSubmitStore=_lists[list]}if(list=="_oldValueObj"){document._oldValueObj=_lists[list]["list"]}Base._setGridData(list,_lists[list])}}if(data.operation){var _operation=data.operation;for(var i=0;i<_operation.length;i++){var op=_operation[i];switch(op.type){case"readonly":Base.setReadOnly(op.ids);break;case"enable":Base.setEnable(op.ids);break;case"disabled":Base.setDisabled(op.ids);break;case"select_tab":Base.selectTab(op.ids);break;case"hide":Base.hideObj(op.ids);break;case"show":Base.showObj(op.ids);break;case"unvisible":Base.hideObj(op.ids,true);break;case"resetForm":Base.resetForm(op.ids[0]);break;case"required":Base.setRequired(op.ids);break;case"disrequired":Base.setDisRequired(op.ids);break}}}if(data.msg){var focus=null;if(data.focus){focus=function(_fieldId){return function(){Base.focus(_fieldId,100)}}(data.focus)}var msg=data.msg;var developMode=Base.globvar.developMode;if(developMode){if(data.errorDetail){msg+="&nbsp;&nbsp;&nbsp;<div><a onClick=\"$('<div style=overflow:auto>'+$('#_expwinerrmsg').html()+'</div>').appendTo('body').window({width:600,height:400,title:'详细信息'})\">[查看详细]</a></div><div id='_expwinerrmsg' style='display:none'><hr>"+data.errorDetail+"</div>"}}Base.alert(msg,data.success?"success":"error",focus)}if(data.msgBox){var focus=null;if(data.focus){focus=function(_fieldId){return function(){Base.focus(_fieldId,100)}}(data.focus)}var msg=data.msgBox.msg;if(data.errorDetail){msg+="&nbsp;&nbsp;&nbsp;<div><a onClick=\"$('<div style=overflow:auto>'+$('#_expwinerrmsg').html()+'</div>').appendTo('body').window({width:600,height:400,title:'详细信息'})\">[查看详细]</a></div><div id='_expwinerrmsg' style='display:none'><hr>"+data.errorDetail+"</div>"}Base.alert(msg,data.msgBox.msgType,focus)}if(!data.msg&&data.focus){Base.focus(data.focus,50)}if(data.topTipMsg){var topTip=data.topTipMsg;Base.msgTopTip(topTip.topMsg,topTip.time,topTip.width,topTip.height)}else{if(data.topMsg&&!data.topTipMsg){Base.msgTopTip(data.topMsg)}}}function compareOldData(ids){var submitparam={};if(document._oldValueObj&&document._oldValueObj.length>0){var oldArray=document._oldValueObj;for(var i=0;i<oldArray.length;i++){for(var j=0;j<ids.length;j++){var $obj=$("#"+ids);if(ids[j]==oldArray[i].__id){if($obj.val()!=oldArray[i]["ovDto['"+oldArray[i].__id+"']"]){submitparam=$.extend(submitparam,oldArray[i])}}else{if($obj.has(oldArray[i].__id)){if($("#"+oldArray[i].__id).val()!=oldArray[i]["ovDto['"+oldArray[i].__id+"']"]){submitparam=$.extend(submitparam,oldArray[i])}}}}}}else{return{}}delete submitparam.__id;return submitparam}}}));